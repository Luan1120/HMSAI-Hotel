{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import'./Auth.css';import MeteorBg from'./MeteorBg';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ResetPassword=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);const[message,setMessage]=useState('');const[error,setError]=useState('');// Prefill email from query string if provided\nuseEffect(()=>{try{const params=new URLSearchParams(window.location.search);const qEmail=params.get('email');if(qEmail)setEmail(qEmail);}catch(_unused){}},[]);const handleSubmit=async e=>{e.preventDefault();if(password!==confirmPassword){setError('Mật khẩu xác nhận không khớp!');setMessage('');return;}try{const res=await fetch('http://localhost:5000/api/reset-password',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok){setError(data.message||'Đổi mật khẩu thất bại');setMessage('');return;}setMessage(data.message||'Đổi mật khẩu thành công!');setError('');// clear sensitive fields\nsetPassword('');setConfirmPassword('');}catch(err){setError('Có lỗi xảy ra, vui lòng thử lại!');setMessage('');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MeteorBg,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"snake-border-top\"}),/*#__PURE__*/_jsx(\"div\",{className:\"snake-border-bottom\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"T\\u1EA0O M\\u1EACT KH\\u1EA8U M\\u1EDAI\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt Kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',placeholder:\"M\\u1EADt kh\\u1EA9u\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-password\",onClick:()=>setShowPassword(!showPassword),children:showPassword?'Ẩn':'Hiện'})]}),/*#__PURE__*/_jsx(\"label\",{children:\"X\\xE1c Nh\\u1EADn M\\u1EADt Kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:showConfirmPassword?'text':'password',placeholder:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-password\",onClick:()=>setShowConfirmPassword(!showConfirmPassword),children:showConfirmPassword?'Ẩn':'Hiện'})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"X\\xE1c nh\\u1EADn\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-msg\",children:error}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"success-msg\",children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-links\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"T\\u1EA1o t\\xE0i kho\\u1EA3n m\\u1EDBi ? \"}),/*#__PURE__*/_jsx(Link,{className:\"auth-link\",to:\"/register\",children:\"\\u0110\\u0103ng k\\xFD\"})]})]})]});};export default ResetPassword;","map":{"version":3,"names":["React","useEffect","useState","Link","MeteorBg","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPassword","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","message","setMessage","error","setError","params","URLSearchParams","window","location","search","qEmail","get","_unused","handleSubmit","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","data","json","ok","err","children","className","onSubmit","htmlFor","type","placeholder","value","onChange","target","required","onClick","to"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/ResetPassword.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Auth.css';\r\nimport MeteorBg from './MeteorBg';\r\n\r\nconst ResetPassword = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    // Prefill email from query string if provided\r\n    useEffect(() => {\r\n        try {\r\n            const params = new URLSearchParams(window.location.search);\r\n            const qEmail = params.get('email');\r\n            if (qEmail) setEmail(qEmail);\r\n        } catch {}\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (password !== confirmPassword) {\r\n            setError('Mật khẩu xác nhận không khớp!');\r\n            setMessage('');\r\n            return;\r\n        }\r\n        try {\r\n            const res = await fetch('http://localhost:5000/api/reset-password', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ email, password })\r\n            });\r\n            const data = await res.json();\r\n            if (!res.ok) {\r\n                setError(data.message || 'Đổi mật khẩu thất bại');\r\n                setMessage('');\r\n                return;\r\n            }\r\n            setMessage(data.message || 'Đổi mật khẩu thành công!');\r\n            setError('');\r\n            // clear sensitive fields\r\n            setPassword('');\r\n            setConfirmPassword('');\r\n        } catch (err) {\r\n            setError('Có lỗi xảy ra, vui lòng thử lại!');\r\n            setMessage('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <MeteorBg />\r\n            <div className=\"auth-container\">\r\n                <div className=\"snake-border-top\"></div>\r\n                <div className=\"snake-border-bottom\"></div>\r\n                <h2>TẠO MẬT KHẨU MỚI</h2>\r\n                <form onSubmit={handleSubmit}>\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        placeholder=\"Email\"\r\n                        value={email}\r\n                        onChange={e => setEmail(e.target.value)}\r\n                        required\r\n                    />\r\n                    <label>Mật Khẩu</label>\r\n                    <div className=\"password-field\">\r\n                        <input\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            placeholder=\"Mật khẩu\"\r\n                            value={password}\r\n                            onChange={e => setPassword(e.target.value)}\r\n                            required\r\n                        />\r\n                        <span className=\"toggle-password\" onClick={() => setShowPassword(!showPassword)}>{showPassword ? 'Ẩn' : 'Hiện'}</span>\r\n                    </div>\r\n                    <label>Xác Nhận Mật Khẩu</label>\r\n                    <div className=\"password-field\">\r\n                        <input\r\n                            type={showConfirmPassword ? 'text' : 'password'}\r\n                            placeholder=\"Xác nhận mật khẩu\"\r\n                            value={confirmPassword}\r\n                            onChange={e => setConfirmPassword(e.target.value)}\r\n                            required\r\n                        />\r\n                        <span className=\"toggle-password\" onClick={() => setShowConfirmPassword(!showConfirmPassword)}>{showConfirmPassword ? 'Ẩn' : 'Hiện'}</span>\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn-primary\">Xác nhận</button>\r\n                </form>\r\n                {error && <div className=\"error-msg\">{error}</div>}\r\n                {message && <div className=\"success-msg\">{message}</div>}\r\n                <div className=\"auth-links\">\r\n                    <span>Tạo tài khoản mới ? </span>\r\n                    <Link className=\"auth-link\" to=\"/register\">Đăng ký</Link>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ResetPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}