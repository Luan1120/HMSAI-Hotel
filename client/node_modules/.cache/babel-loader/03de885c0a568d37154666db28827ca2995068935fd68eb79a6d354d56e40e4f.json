{"ast":null,"code":"import _objectSpread from\"D:/DA_TichHop/HMS_AI Hotel/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import'./HomePage.css';import{authHeaders,getUserRole}from'./auth';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function StaffSupport(_ref){var _detail$ticket,_detail$ticket2,_detail$ticket$custom,_detail$ticket$custom2,_detail$messages;let{isModal,onClose}=_ref;const[list,setList]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[activeId,setActiveId]=useState(null);const[detail,setDetail]=useState(null);const[reply,setReply]=useState('');const[sending,setSending]=useState(false);const role=getUserRole();const isStaff=role==='Staff';useEffect(()=>{if(!isStaff)return;let alive=true;const load=async()=>{setLoading(true);setError('');try{const res=await fetch('/api/staff/support/tickets?_='+Date.now(),{headers:authHeaders()});if(!res.ok)throw new Error('HTTP '+res.status);const j=await res.json();if(alive)setList(Array.isArray(j.items)?j.items:[]);}catch(e){if(alive)setError(e.message||'Lỗi tải danh sách');}finally{if(alive)setLoading(false);}};load();return()=>{alive=false;};},[isStaff]);useEffect(()=>{if(!activeId){setDetail(null);return;}let alive=true;const load=async()=>{setDetail(null);try{const res=await fetch(\"/api/staff/support/tickets/\".concat(activeId,\"?_=\").concat(Date.now()),{headers:authHeaders()});if(!res.ok)throw new Error('HTTP '+res.status);const j=await res.json();if(alive)setDetail(j);}catch(e){if(alive)setDetail({error:e.message||'Lỗi tải chi tiết'});}};load();return()=>{alive=false;};},[activeId]);const sendReply=async()=>{if(!activeId||!reply.trim())return;setSending(true);try{const res=await fetch(\"/api/staff/support/tickets/\".concat(activeId,\"/reply\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({body:reply.trim()})});if(!res.ok)throw new Error('Không gửi được phản hồi');setReply('');// reload detail\nconst r2=await fetch(\"/api/staff/support/tickets/\".concat(activeId,\"?_=\").concat(Date.now()),{headers:authHeaders()});if(r2.ok)setDetail(await r2.json());}catch(e){alert(e.message||'Lỗi gửi phản hồi');}finally{setSending(false);}};const resolveTicket=async()=>{if(!activeId)return;if(!window.confirm('Đóng ticket này?'))return;try{const res=await fetch(\"/api/staff/support/tickets/\".concat(activeId,\"/resolve\"),{method:'POST',headers:authHeaders()});if(!res.ok)throw new Error('Lỗi đóng ticket');// refresh list and detail\nsetList(prev=>prev.map(x=>x.id===activeId?_objectSpread(_objectSpread({},x),{},{status:'Closed'}):x));setDetail(d=>d?_objectSpread(_objectSpread({},d),{},{ticket:_objectSpread(_objectSpread({},d.ticket),{},{status:'Closed'})}):d);}catch(e){alert(e.message||'Không thể đóng ticket');}};if(!isStaff){return/*#__PURE__*/_jsxs(\"div\",{className:\"ph-table\",style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"home-rooms-title\",style:{textAlign:'left',marginTop:0},children:\"H\\u1ED7 tr\\u1EE3 kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Ch\\u1EE9c n\\u0103ng n\\xE0y d\\xE0nh cho Nh\\xE2n vi\\xEAn.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-rooms\",style:{padding:isModal?0:'80px 12px 20px'},children:[!isModal&&/*#__PURE__*/_jsx(\"header\",{className:\"home-header\",style:{position:'sticky',top:0},children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-header-left\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"logo\",className:\"home-header-logo\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"home-header-title home-header-home-btn\",children:\"TRANG CH\\u1EE6\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-table\",style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"home-rooms-title\",style:{textAlign:'left',marginTop:0},children:\"H\\u1ED7 tr\\u1EE3 kh\\xE1ch h\\xE0ng (Nh\\xE2n vi\\xEAn)\"}),loading?/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"\\u0110ang t\\u1EA3i danh s\\xE1ch...\"}):error?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318'},children:error}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'320px 1fr',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #eee',borderRadius:8,overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:8,background:'#f7f7fb',fontWeight:700},children:\"Danh s\\xE1ch y\\xEAu c\\u1EA7u\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:520,overflow:'auto'},children:list.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:12,color:'#888'},children:\"Ch\\u01B0a c\\xF3 y\\xEAu c\\u1EA7u n\\xE0o.\"}):list.map(it=>/*#__PURE__*/_jsxs(\"button\",{className:\"ph-list-item \".concat(activeId===it.id?'is-active':''),onClick:()=>setActiveId(it.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-list-title\",children:it.subject}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-list-sub\",children:[it.customerName||it.customerEmail||'Khách',\" \\u2022 \",it.status]}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-badge \".concat(it.status==='Closed'?'ph-badge--gray':it.status==='Open'?'ph-badge--blue':'ph-badge--green'),children:it.status})]},it.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #eee',borderRadius:8,overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:8,background:'#f7f7fb',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:(detail===null||detail===void 0?void 0:(_detail$ticket=detail.ticket)===null||_detail$ticket===void 0?void 0:_detail$ticket.subject)||(activeId?\"Ticket #\".concat(activeId):'Chi tiết')}),!!activeId&&(detail===null||detail===void 0?void 0:(_detail$ticket2=detail.ticket)===null||_detail$ticket2===void 0?void 0:_detail$ticket2.status)!=='Closed'&&/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",onClick:resolveTicket,children:\"\\u0110\\xF3ng ticket\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:12,minHeight:360},children:!activeId?/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"Ch\\u1ECDn m\\u1ED9t ticket \\u0111\\u1EC3 xem chi ti\\u1EBFt.\"}):!detail?/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"\\u0110ang t\\u1EA3i chi ti\\u1EBFt...\"}):detail.error?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318'},children:detail.error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:8,color:'#444'},children:[\"Kh\\xE1ch h\\xE0ng: \",/*#__PURE__*/_jsx(\"b\",{children:((_detail$ticket$custom=detail.ticket.customer)===null||_detail$ticket$custom===void 0?void 0:_detail$ticket$custom.name)||((_detail$ticket$custom2=detail.ticket.customer)===null||_detail$ticket$custom2===void 0?void 0:_detail$ticket$custom2.email)||'—'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-thread\",children:(_detail$messages=detail.messages)===null||_detail$messages===void 0?void 0:_detail$messages.map(m=>/*#__PURE__*/_jsxs(\"div\",{className:\"ph-msg \".concat(m.role==='Staff'?'ph-msg--staff':'ph-msg--cust'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ph-msg-meta\",children:[m.role==='Staff'?'Nhân viên':'Khách',\" \\u2022 \",new Date(m.createdAt).toLocaleString('vi-VN')]}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-msg-body\",children:m.body})]},m.id))}),detail.ticket.status!=='Closed'&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"rv-textarea\",rows:4,placeholder:\"Nh\\u1EADp n\\u1ED9i dung ph\\u1EA3n h\\u1ED3i...\",value:reply,onChange:e=>setReply(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:6},children:[/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn\",disabled:sending||!reply.trim(),onClick:sendReply,children:sending?'Đang gửi...':'Gửi phản hồi'}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",onClick:()=>setReply(''),children:\"X\\xF3a\"})]})]})]})})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","authHeaders","getUserRole","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StaffSupport","_ref","_detail$ticket","_detail$ticket2","_detail$ticket$custom","_detail$ticket$custom2","_detail$messages","isModal","onClose","list","setList","loading","setLoading","error","setError","activeId","setActiveId","detail","setDetail","reply","setReply","sending","setSending","role","isStaff","alive","load","res","fetch","Date","now","headers","ok","Error","status","j","json","Array","isArray","items","e","message","concat","sendReply","trim","method","_objectSpread","body","JSON","stringify","r2","alert","resolveTicket","window","confirm","prev","map","x","id","d","ticket","className","style","padding","children","textAlign","marginTop","position","top","src","alt","href","color","display","gridTemplateColumns","gap","border","borderRadius","overflow","background","fontWeight","maxHeight","length","it","onClick","subject","customerName","customerEmail","justifyContent","alignItems","minHeight","marginBottom","customer","name","email","messages","m","createdAt","toLocaleString","rows","placeholder","value","onChange","target","disabled"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/StaffSupport.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './HomePage.css';\r\nimport { authHeaders, getUserRole } from './auth';\r\n\r\nexport default function StaffSupport({ isModal, onClose }) {\r\n  const [list, setList] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [activeId, setActiveId] = useState(null);\r\n  const [detail, setDetail] = useState(null);\r\n  const [reply, setReply] = useState('');\r\n  const [sending, setSending] = useState(false);\r\n\r\n  const role = getUserRole();\r\n  const isStaff = role === 'Staff';\r\n\r\n  useEffect(() => {\r\n    if (!isStaff) return;\r\n    let alive = true;\r\n    const load = async () => {\r\n      setLoading(true); setError('');\r\n      try {\r\n        const res = await fetch('/api/staff/support/tickets?_=' + Date.now(), { headers: authHeaders() });\r\n        if (!res.ok) throw new Error('HTTP ' + res.status);\r\n        const j = await res.json();\r\n        if (alive) setList(Array.isArray(j.items) ? j.items : []);\r\n      } catch (e) { if (alive) setError(e.message || 'Lỗi tải danh sách'); }\r\n      finally { if (alive) setLoading(false); }\r\n    };\r\n    load();\r\n    return () => { alive = false; };\r\n  }, [isStaff]);\r\n\r\n  useEffect(() => {\r\n    if (!activeId) { setDetail(null); return; }\r\n    let alive = true;\r\n    const load = async () => {\r\n      setDetail(null);\r\n      try {\r\n        const res = await fetch(`/api/staff/support/tickets/${activeId}?_=${Date.now()}`, { headers: authHeaders() });\r\n        if (!res.ok) throw new Error('HTTP ' + res.status);\r\n        const j = await res.json();\r\n        if (alive) setDetail(j);\r\n      } catch (e) { if (alive) setDetail({ error: e.message || 'Lỗi tải chi tiết' }); }\r\n    };\r\n    load();\r\n    return () => { alive = false; };\r\n  }, [activeId]);\r\n\r\n  const sendReply = async () => {\r\n    if (!activeId || !reply.trim()) return;\r\n    setSending(true);\r\n    try {\r\n      const res = await fetch(`/api/staff/support/tickets/${activeId}/reply`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json', ...authHeaders() },\r\n        body: JSON.stringify({ body: reply.trim() })\r\n      });\r\n      if (!res.ok) throw new Error('Không gửi được phản hồi');\r\n      setReply('');\r\n      // reload detail\r\n      const r2 = await fetch(`/api/staff/support/tickets/${activeId}?_=${Date.now()}`, { headers: authHeaders() });\r\n      if (r2.ok) setDetail(await r2.json());\r\n    } catch (e) {\r\n      alert(e.message || 'Lỗi gửi phản hồi');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const resolveTicket = async () => {\r\n    if (!activeId) return;\r\n    if (!window.confirm('Đóng ticket này?')) return;\r\n    try {\r\n      const res = await fetch(`/api/staff/support/tickets/${activeId}/resolve`, { method: 'POST', headers: authHeaders() });\r\n      if (!res.ok) throw new Error('Lỗi đóng ticket');\r\n      // refresh list and detail\r\n      setList(prev => prev.map(x => x.id === activeId ? { ...x, status: 'Closed' } : x));\r\n      setDetail(d => d ? { ...d, ticket: { ...d.ticket, status: 'Closed' } } : d);\r\n    } catch (e) {\r\n      alert(e.message || 'Không thể đóng ticket');\r\n    }\r\n  };\r\n\r\n  if (!isStaff) {\r\n    return (\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Hỗ trợ khách hàng</h2>\r\n        <div>Chức năng này dành cho Nhân viên.</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-rooms\" style={{ padding: isModal ? 0 : '80px 12px 20px' }}>\r\n      {!isModal && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <a href=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</a>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Hỗ trợ khách hàng (Nhân viên)</h2>\r\n        {loading ? <div style={{ color:'#666' }}>Đang tải danh sách...</div> : error ? <div style={{ color:'#b42318' }}>{error}</div> : (\r\n          <div style={{ display:'grid', gridTemplateColumns:'320px 1fr', gap:16 }}>\r\n            <div style={{ border:'1px solid #eee', borderRadius:8, overflow:'hidden' }}>\r\n              <div style={{ padding:8, background:'#f7f7fb', fontWeight:700 }}>Danh sách yêu cầu</div>\r\n              <div style={{ maxHeight: 520, overflow:'auto' }}>\r\n                {list.length === 0 ? (\r\n                  <div style={{ padding:12, color:'#888' }}>Chưa có yêu cầu nào.</div>\r\n                ) : list.map(it => (\r\n                  <button key={it.id} className={`ph-list-item ${activeId===it.id ? 'is-active' : ''}`} onClick={()=> setActiveId(it.id)}>\r\n                    <div className=\"ph-list-title\">{it.subject}</div>\r\n                    <div className=\"ph-list-sub\">{it.customerName || it.customerEmail || 'Khách'} • {it.status}</div>\r\n                    <div className={`ph-badge ${it.status==='Closed' ? 'ph-badge--gray' : it.status==='Open' ? 'ph-badge--blue' : 'ph-badge--green'}`}>{it.status}</div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            <div style={{ border:'1px solid #eee', borderRadius:8, overflow:'hidden' }}>\r\n              <div style={{ padding:8, background:'#f7f7fb', display:'flex', justifyContent:'space-between', alignItems:'center' }}>\r\n                <div style={{ fontWeight:700 }}>{detail?.ticket?.subject || (activeId ? `Ticket #${activeId}` : 'Chi tiết')}</div>\r\n                {!!activeId && detail?.ticket?.status !== 'Closed' && (\r\n                  <button className=\"ph-btn ph-btn--secondary\" onClick={resolveTicket}>Đóng ticket</button>\r\n                )}\r\n              </div>\r\n              <div style={{ padding: 12, minHeight: 360 }}>\r\n                {!activeId ? (\r\n                  <div style={{ color:'#666' }}>Chọn một ticket để xem chi tiết.</div>\r\n                ) : !detail ? (\r\n                  <div style={{ color:'#666' }}>Đang tải chi tiết...</div>\r\n                ) : detail.error ? (\r\n                  <div style={{ color:'#b42318' }}>{detail.error}</div>\r\n                ) : (\r\n                  <>\r\n                    <div style={{ marginBottom: 8, color:'#444' }}>\r\n                      Khách hàng: <b>{detail.ticket.customer?.name || detail.ticket.customer?.email || '—'}</b>\r\n                    </div>\r\n                    <div className=\"ph-thread\">\r\n                      {detail.messages?.map(m => (\r\n                        <div key={m.id} className={`ph-msg ${m.role==='Staff' ? 'ph-msg--staff' : 'ph-msg--cust'}`}>\r\n                          <div className=\"ph-msg-meta\">{m.role === 'Staff' ? 'Nhân viên' : 'Khách'} • {new Date(m.createdAt).toLocaleString('vi-VN')}</div>\r\n                          <div className=\"ph-msg-body\">{m.body}</div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    {detail.ticket.status !== 'Closed' && (\r\n                      <div style={{ marginTop: 12 }}>\r\n                        <textarea className=\"rv-textarea\" rows={4} placeholder=\"Nhập nội dung phản hồi...\" value={reply} onChange={(e)=>setReply(e.target.value)} />\r\n                        <div style={{ display:'flex', gap:8, marginTop:6 }}>\r\n                          <button className=\"ph-btn\" disabled={sending || !reply.trim()} onClick={sendReply}>{sending ? 'Đang gửi...' : 'Gửi phản hồi'}</button>\r\n                          <button className=\"ph-btn ph-btn--secondary\" onClick={()=> setReply('')}>Xóa</button>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}