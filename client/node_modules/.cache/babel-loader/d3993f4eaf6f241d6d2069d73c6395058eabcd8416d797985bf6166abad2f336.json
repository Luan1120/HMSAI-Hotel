{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{Link,useSearchParams,useNavigate}from'react-router-dom';import'./HomePage.css';import{jsPDF}from'jspdf';import html2canvas from'html2canvas';import{isLoggedIn}from'./auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PaymentSuccess(){const[params]=useSearchParams();const navigate=useNavigate();const token=params.get('token')||'';const amount=Number(params.get('amount')||0);const code=params.get('code')||'';const rt=params.get('rt')||'';const rn=params.get('rn')||'';const ci=params.get('ci')||'';const co=params.get('co')||'';const ad=Number(params.get('ad')||0);const ch=Number(params.get('ch')||0);const[hotelName,setHotelName]=useState('');const summary=useMemo(()=>{try{const raw=token?localStorage.getItem('hmsBooking:'+token):null;if(raw)return JSON.parse(raw);}catch(_unused){}return{token,code,amount,roomType:rt,roomNames:rn,checkIn:ci,checkOut:co,adults:ad,children:ch,hotelId:Number(params.get('hid')||0)||null,hotel:'',checkInTime:'14:00',checkOutTime:'12:00'};},[token,code,amount,rt,rn,ci,co,ad,ch,params]);useEffect(()=>{let cancelled=false;const setName=name=>{if(!cancelled)setHotelName(name);};const fetchHotel=hid=>{if(!hid)return;fetch(\"/api/hotels/\".concat(hid)).then(r=>r.ok?r.json():null).then(j=>{if(j&&j.name)setName(j.name);}).catch(()=>{});};if(!hotelName){const hidParam=Number(params.get('hid')||0)||null;if(summary.hotelId){fetchHotel(summary.hotelId);}else if(hidParam){fetchHotel(hidParam);}else if(summary.roomType){fetch(\"/api/room-types/\".concat(encodeURIComponent(summary.roomType),\"/rooms\")).then(r=>r.ok?r.json():null).then(j=>{if(j&&j.roomType){if(j.roomType.hotelName&&!hotelName)setName(j.roomType.hotelName);if(j.roomType.hotelId)fetchHotel(j.roomType.hotelId);}}).catch(()=>{});}}return()=>{cancelled=true;};},[summary.hotelId,summary.roomType,hotelName,params]);const detailsHref=useMemo(()=>{const q=new URLSearchParams({amount:String(summary.amount||amount||0),code:String(summary.code||code||''),rn:String(summary.roomNames||rn||''),rt:String(summary.roomType||rt||''),ci:String(summary.checkIn||ci||''),co:String(summary.checkOut||co||''),ad:String(summary.adults||ad||0),ch:String(summary.children||ch||0),hid:String(summary.hotelId||params.get('hid')||'')});return\"/booking/\".concat(token||summary.token||'',\"?\").concat(q.toString());},[summary,token,amount,code,rn,ci,co,ad,ch,params]);const toBase64=buf=>{let binary='';const bytes=new Uint8Array(buf);const len=bytes.byteLength;for(let i=0;i<len;i++)binary+=String.fromCharCode(bytes[i]);return btoa(binary);};const ensurePdfFonts=async()=>{const REG_KEY='hmsPdfFont:DejaVu-Regular';const BOLD_KEY='hmsPdfFont:DejaVu-Bold';let regular='';let bold='';try{regular=localStorage.getItem(REG_KEY)||'';}catch(_unused2){}try{bold=localStorage.getItem(BOLD_KEY)||'';}catch(_unused3){}const fetchFont=async url=>{const res=await fetch(url,{mode:'cors'});if(!res.ok)throw new Error('Font fetch failed');const buf=await res.arrayBuffer();return toBase64(buf);};if(!regular){regular=await fetchFont('https://raw.githubusercontent.com/dejavu-fonts/dejavu-fonts/master/ttf/DejaVuSans.ttf');try{localStorage.setItem(REG_KEY,regular);}catch(_unused4){}}if(!bold){bold=await fetchFont('https://raw.githubusercontent.com/dejavu-fonts/dejavu-fonts/master/ttf/DejaVuSans-Bold.ttf');try{localStorage.setItem(BOLD_KEY,bold);}catch(_unused5){}}return{regular,bold};};const printReceipt=async()=>{const hotel=hotelName||summary.hotel||'';const file=\"\".concat(summary.code||token||'receipt',\".pdf\");const container=document.createElement('div');container.style.position='fixed';container.style.left='-99999px';container.style.top='0';container.style.width='560px';container.style.background='#fff';container.style.padding='24px 16px';container.style.fontFamily=\"'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'DejaVu Sans', 'Liberation Sans', sans-serif\";container.innerHTML=\"\\n      <div>\\n        <div style=\\\"font-weight:800;font-size:22px;margin:0 0 10px 0;\\\">Phi\\u1EBFu x\\xE1c nh\\u1EADn \\u0111\\u1EB7t ph\\xF2ng</div>\\n        <div style=\\\"height:1px;background:#e6e6e6;margin:8px 0 14px 0;\\\"></div>\\n        <div style=\\\"display:grid;grid-template-columns:180px 1fr;gap:10px 16px;font-size:13px;\\\">\\n          <div style=\\\"color:#666;font-weight:700;\\\">M\\xE3 \\u0111\\u1EB7t ph\\xF2ng</div>\\n          <div style=\\\"font-weight:800;\\\">\".concat(String(summary.code||token),\"</div>\\n          <div style=\\\"color:#666;font-weight:700;\\\">Kh\\xE1ch s\\u1EA1n</div>\\n          <div style=\\\"font-weight:800;\\\">\").concat(hotel||'—',\"</div>\\n          <div style=\\\"color:#666;font-weight:700;\\\">Ng\\xE0y nh\\u1EADn</div>\\n          <div style=\\\"font-weight:800;\\\">\").concat(summary.checkIn,\" - \").concat(summary.checkInTime,\"</div>\\n          <div style=\\\"color:#666;font-weight:700;\\\">Ng\\xE0y tr\\u1EA3</div>\\n          <div style=\\\"font-weight:800;\\\">\").concat(summary.checkOut,\" - \").concat(summary.checkOutTime,\"</div>\\n          <div style=\\\"color:#666;font-weight:700;\\\">Ph\\xF2ng</div>\\n          <div style=\\\"font-weight:800;\\\">\").concat(String(summary.roomNames||summary.roomType||'—'),\"</div>\\n          <div style=\\\"color:#666;font-weight:700;\\\">Kh\\xE1ch</div>\\n          <div style=\\\"font-weight:800;\\\">\").concat(summary.adults||0,\" ng\\u01B0\\u1EDDi l\\u1EDBn\").concat(summary.children?\" \\u2022 \".concat(summary.children,\" tr\\u1EBB em\"):'',\"</div>\\n          <div style=\\\"color:#666;font-weight:700;\\\">T\\u1ED5ng c\\u1ED9ng</div>\\n          <div style=\\\"font-weight:800;\\\">\").concat(Number(summary.amount||0).toLocaleString('vi-VN'),\" VND</div>\\n        </div>\\n        <div style=\\\"margin-top:10px;font-weight:800;\\\">(\\u0110\\xC3 THANH TO\\xC1N)</div>\\n      </div>\");document.body.appendChild(container);try{const canvas=await html2canvas(container,{scale:2,useCORS:true,backgroundColor:'#ffffff'});const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF({unit:'pt',format:'a4'});const pageWidth=pdf.internal.pageSize.getWidth();const pageHeight=pdf.internal.pageSize.getHeight();const imgWidth=Math.min(540,pageWidth-56*2);const imgHeight=canvas.height*imgWidth/canvas.width;const x=(pageWidth-imgWidth)/2;let y=56;if(imgHeight>pageHeight-112){// Multi-page if content longer than one page\nlet remaining=imgHeight;let offset=0;while(remaining>0){pdf.addImage(imgData,'PNG',x,y-offset,imgWidth,imgHeight);remaining-=pageHeight-112;offset+=pageHeight-112;if(remaining>0){pdf.addPage();}}}else{pdf.addImage(imgData,'PNG',x,y,imgWidth,imgHeight);}pdf.save(file);}finally{document.body.removeChild(container);}};// Save to DB on mount (once)\nuseEffect(()=>{if(!isLoggedIn()){try{sessionStorage.setItem('hmsRedirectAfterLogin',window.location.pathname+window.location.search);}catch(_unused6){}navigate('/login');return;// skip saving\n}const save=async()=>{try{const raw=token?localStorage.getItem('hmsBooking:'+token):null;if(!raw)return;const s=JSON.parse(raw);let email=s.userEmail||'';if(!email){try{const rawUser=localStorage.getItem('hmsUser');if(rawUser)email=JSON.parse(rawUser).email||'';}catch(_unused7){}}if(!email)return;const body={token:token||s.token,email,checkIn:s.checkIn,checkOut:s.checkOut,method:s.payMethod||'MOMO',rooms:(s.rooms||[]).map(r=>({id:r.id,adults:r.adults||1,children:r.children||0,price:r.price}))};await fetch('/api/payments/complete',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});}catch(_unused8){}};save();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"home-root success-root\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"success-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"success-top\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"success-home\",children:\"\\u2190 Quay l\\u1EA1i Trang Ch\\u1EE7\"}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"success-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/success.png\",alt:\"success\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"success-title\",children:\"Thanh To\\xE1n Th\\xE0nh C\\xF4ng!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"success-sub\",children:\"C\\u1EA3m \\u01A1n b\\u1EA1n \\u0111\\xE3 \\u0111\\u1EB7t ph\\xF2ng t\\u1EA1i HMS Hotel.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"success-code-line\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"M\\xE3 \\u0110\\u1EB7t Ph\\xF2ng\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:summary.code||token})]}),/*#__PURE__*/_jsx(\"div\",{className:\"success-sep\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"success-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Kh\\xE1ch S\\u1EA1n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:hotelName||summary.hotel||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Ng\\xE0y Nh\\u1EADn\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[summary.checkIn,\" - \",summary.checkInTime]}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Ng\\xE0y Tr\\u1EA3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[summary.checkOut,\" - \",summary.checkOutTime]}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"H\\u1EA1ng Ph\\xF2ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:summary.roomType||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Ph\\xF2ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value wrap\",children:summary.roomNames||summary.roomType}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"Kh\\xE1ch\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[summary.adults||0,\" ng\\u01B0\\u1EDDi l\\u1EDBn\",summary.children?\" \\u2022 \".concat(summary.children,\" tr\\u1EBB em\"):'']}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"T\\u1ED5ng C\\u1ED9ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value bold nowrap\",children:[Number(summary.amount||0).toLocaleString('vi-VN'),\" VND\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"success-paid\",children:\"(\\u0110\\xC3 THANH TO\\xC1N)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"success-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"checkout-btn success-btn\",onClick:printReceipt,children:\"T\\u1EA3i phi\\u1EBFu x\\xE1c nh\\u1EADn (PDF)\"})})]})});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","useSearchParams","useNavigate","jsPDF","html2canvas","isLoggedIn","jsx","_jsx","jsxs","_jsxs","PaymentSuccess","params","navigate","token","get","amount","Number","code","rt","rn","ci","co","ad","ch","hotelName","setHotelName","summary","raw","localStorage","getItem","JSON","parse","_unused","roomType","roomNames","checkIn","checkOut","adults","children","hotelId","hotel","checkInTime","checkOutTime","cancelled","setName","name","fetchHotel","hid","fetch","concat","then","r","ok","json","j","catch","hidParam","encodeURIComponent","detailsHref","q","URLSearchParams","String","toString","toBase64","buf","binary","bytes","Uint8Array","len","byteLength","i","fromCharCode","btoa","ensurePdfFonts","REG_KEY","BOLD_KEY","regular","bold","_unused2","_unused3","fetchFont","url","res","mode","Error","arrayBuffer","setItem","_unused4","_unused5","printReceipt","file","container","document","createElement","style","position","left","top","width","background","padding","fontFamily","innerHTML","toLocaleString","body","appendChild","canvas","scale","useCORS","backgroundColor","imgData","toDataURL","pdf","unit","format","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","imgWidth","Math","min","imgHeight","height","x","y","remaining","offset","addImage","addPage","save","removeChild","sessionStorage","window","location","pathname","search","_unused6","s","email","userEmail","rawUser","_unused7","method","payMethod","rooms","map","id","price","headers","stringify","_unused8","className","to","src","alt","onClick"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/PaymentSuccess.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Link, useSearchParams, useNavigate } from 'react-router-dom';\r\nimport './HomePage.css';\r\nimport { jsPDF } from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport { isLoggedIn } from './auth';\r\n\r\nexport default function PaymentSuccess() {\r\n  const [params] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const token = params.get('token') || '';\r\n  const amount = Number(params.get('amount') || 0);\r\n  const code = params.get('code') || '';\r\n  const rt = params.get('rt') || '';\r\n  const rn = params.get('rn') || '';\r\n  const ci = params.get('ci') || '';\r\n  const co = params.get('co') || '';\r\n  const ad = Number(params.get('ad') || 0);\r\n  const ch = Number(params.get('ch') || 0);\r\n\r\n  const [hotelName, setHotelName] = useState('');\r\n  const summary = useMemo(() => {\r\n    try {\r\n      const raw = token ? localStorage.getItem('hmsBooking:' + token) : null;\r\n      if (raw) return JSON.parse(raw);\r\n    } catch {}\r\n    return {\r\n      token, code, amount, roomType: rt, roomNames: rn, checkIn: ci, checkOut: co, adults: ad, children: ch, hotelId: (Number(params.get('hid')||0)||null),\r\n      hotel: '', checkInTime: '14:00', checkOutTime: '12:00'\r\n    };\r\n  }, [token, code, amount, rt, rn, ci, co, ad, ch, params]);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const setName = (name) => { if (!cancelled) setHotelName(name); };\r\n    const fetchHotel = (hid) => {\r\n      if (!hid) return;\r\n      fetch(`/api/hotels/${hid}`).then(r => r.ok ? r.json() : null).then(j => {\r\n        if (j && j.name) setName(j.name);\r\n      }).catch(() => {});\r\n    };\r\n    if (!hotelName) {\r\n      const hidParam = Number(params.get('hid') || 0) || null;\r\n      if (summary.hotelId) {\r\n        fetchHotel(summary.hotelId);\r\n      } else if (hidParam) {\r\n        fetchHotel(hidParam);\r\n      } else if (summary.roomType) {\r\n        fetch(`/api/room-types/${encodeURIComponent(summary.roomType)}/rooms`)\r\n          .then(r => r.ok ? r.json() : null)\r\n          .then(j => {\r\n            if (j && j.roomType) {\r\n              if (j.roomType.hotelName && !hotelName) setName(j.roomType.hotelName);\r\n              if (j.roomType.hotelId) fetchHotel(j.roomType.hotelId);\r\n            }\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    }\r\n    return () => { cancelled = true; };\r\n  }, [summary.hotelId, summary.roomType, hotelName, params]);\r\n\r\n  const detailsHref = useMemo(() => {\r\n    const q = new URLSearchParams({\r\n      amount: String(summary.amount || amount || 0),\r\n      code: String(summary.code || code || ''),\r\n      rn: String(summary.roomNames || rn || ''),\r\n      rt: String(summary.roomType || rt || ''),\r\n      ci: String(summary.checkIn || ci || ''),\r\n      co: String(summary.checkOut || co || ''),\r\n      ad: String(summary.adults || ad || 0),\r\n      ch: String(summary.children || ch || 0),\r\n      hid: String(summary.hotelId || params.get('hid') || ''),\r\n    });\r\n    return `/booking/${token || summary.token || ''}?${q.toString()}`;\r\n  }, [summary, token, amount, code, rn, ci, co, ad, ch, params]);\r\n\r\n  const toBase64 = (buf) => {\r\n    let binary = '';\r\n    const bytes = new Uint8Array(buf);\r\n    const len = bytes.byteLength;\r\n    for (let i = 0; i < len; i++) binary += String.fromCharCode(bytes[i]);\r\n    return btoa(binary);\r\n  };\r\n\r\n  const ensurePdfFonts = async () => {\r\n    const REG_KEY = 'hmsPdfFont:DejaVu-Regular';\r\n    const BOLD_KEY = 'hmsPdfFont:DejaVu-Bold';\r\n    let regular = '';\r\n    let bold = '';\r\n    try { regular = localStorage.getItem(REG_KEY) || ''; } catch {}\r\n    try { bold = localStorage.getItem(BOLD_KEY) || ''; } catch {}\r\n    const fetchFont = async (url) => {\r\n      const res = await fetch(url, { mode: 'cors' });\r\n      if (!res.ok) throw new Error('Font fetch failed');\r\n      const buf = await res.arrayBuffer();\r\n      return toBase64(buf);\r\n    };\r\n    if (!regular) {\r\n      regular = await fetchFont('https://raw.githubusercontent.com/dejavu-fonts/dejavu-fonts/master/ttf/DejaVuSans.ttf');\r\n      try { localStorage.setItem(REG_KEY, regular); } catch {}\r\n    }\r\n    if (!bold) {\r\n      bold = await fetchFont('https://raw.githubusercontent.com/dejavu-fonts/dejavu-fonts/master/ttf/DejaVuSans-Bold.ttf');\r\n      try { localStorage.setItem(BOLD_KEY, bold); } catch {}\r\n    }\r\n    return { regular, bold };\r\n  };\r\n\r\n  const printReceipt = async () => {\r\n    const hotel = hotelName || summary.hotel || '';\r\n    const file = `${summary.code || token || 'receipt'}.pdf`;\r\n    const container = document.createElement('div');\r\n    container.style.position = 'fixed';\r\n    container.style.left = '-99999px';\r\n    container.style.top = '0';\r\n    container.style.width = '560px';\r\n    container.style.background = '#fff';\r\n    container.style.padding = '24px 16px';\r\n    container.style.fontFamily = \"'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'DejaVu Sans', 'Liberation Sans', sans-serif\";\r\n    container.innerHTML = `\r\n      <div>\r\n        <div style=\"font-weight:800;font-size:22px;margin:0 0 10px 0;\">Phiếu xác nhận đặt phòng</div>\r\n        <div style=\"height:1px;background:#e6e6e6;margin:8px 0 14px 0;\"></div>\r\n        <div style=\"display:grid;grid-template-columns:180px 1fr;gap:10px 16px;font-size:13px;\">\r\n          <div style=\"color:#666;font-weight:700;\">Mã đặt phòng</div>\r\n          <div style=\"font-weight:800;\">${String(summary.code || token)}</div>\r\n          <div style=\"color:#666;font-weight:700;\">Khách sạn</div>\r\n          <div style=\"font-weight:800;\">${hotel || '—'}</div>\r\n          <div style=\"color:#666;font-weight:700;\">Ngày nhận</div>\r\n          <div style=\"font-weight:800;\">${summary.checkIn} - ${summary.checkInTime}</div>\r\n          <div style=\"color:#666;font-weight:700;\">Ngày trả</div>\r\n          <div style=\"font-weight:800;\">${summary.checkOut} - ${summary.checkOutTime}</div>\r\n          <div style=\"color:#666;font-weight:700;\">Phòng</div>\r\n          <div style=\"font-weight:800;\">${String(summary.roomNames || summary.roomType || '—')}</div>\r\n          <div style=\"color:#666;font-weight:700;\">Khách</div>\r\n          <div style=\"font-weight:800;\">${summary.adults || 0} người lớn${summary.children ? ` • ${summary.children} trẻ em` : ''}</div>\r\n          <div style=\"color:#666;font-weight:700;\">Tổng cộng</div>\r\n          <div style=\"font-weight:800;\">${Number(summary.amount || 0).toLocaleString('vi-VN')} VND</div>\r\n        </div>\r\n        <div style=\"margin-top:10px;font-weight:800;\">(ĐÃ THANH TOÁN)</div>\r\n      </div>`;\r\n    document.body.appendChild(container);\r\n    try {\r\n      const canvas = await html2canvas(container, { scale: 2, useCORS: true, backgroundColor: '#ffffff' });\r\n      const imgData = canvas.toDataURL('image/png');\r\n      const pdf = new jsPDF({ unit: 'pt', format: 'a4' });\r\n      const pageWidth = pdf.internal.pageSize.getWidth();\r\n      const pageHeight = pdf.internal.pageSize.getHeight();\r\n      const imgWidth = Math.min(540, pageWidth - 56 * 2);\r\n      const imgHeight = (canvas.height * imgWidth) / canvas.width;\r\n      const x = (pageWidth - imgWidth) / 2;\r\n      let y = 56;\r\n      if (imgHeight > pageHeight - 112) {\r\n        // Multi-page if content longer than one page\r\n        let remaining = imgHeight;\r\n        let offset = 0;\r\n        while (remaining > 0) {\r\n          pdf.addImage(imgData, 'PNG', x, y - offset, imgWidth, imgHeight);\r\n          remaining -= (pageHeight - 112);\r\n          offset += (pageHeight - 112);\r\n          if (remaining > 0) {\r\n            pdf.addPage();\r\n          }\r\n        }\r\n      } else {\r\n        pdf.addImage(imgData, 'PNG', x, y, imgWidth, imgHeight);\r\n      }\r\n      pdf.save(file);\r\n    } finally {\r\n      document.body.removeChild(container);\r\n    }\r\n  };\r\n\r\n  // Save to DB on mount (once)\r\n  useEffect(() => {\r\n    if (!isLoggedIn()) {\r\n      try { sessionStorage.setItem('hmsRedirectAfterLogin', window.location.pathname + window.location.search); } catch {}\r\n      navigate('/login');\r\n      return; // skip saving\r\n    }\r\n    const save = async () => {\r\n      try {\r\n        const raw = token ? localStorage.getItem('hmsBooking:' + token) : null;\r\n        if (!raw) return;\r\n        const s = JSON.parse(raw);\r\n        let email = s.userEmail || '';\r\n        if (!email) {\r\n          try { const rawUser = localStorage.getItem('hmsUser'); if (rawUser) email = JSON.parse(rawUser).email || ''; } catch {}\r\n        }\r\n        if (!email) return;\r\n        const body = {\r\n          token: token || s.token,\r\n          email,\r\n          checkIn: s.checkIn,\r\n          checkOut: s.checkOut,\r\n          method: s.payMethod || 'MOMO',\r\n          rooms: (s.rooms || []).map(r => ({ id: r.id, adults: r.adults || 1, children: r.children || 0, price: r.price })),\r\n        };\r\n        await fetch('/api/payments/complete', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });\r\n      } catch {}\r\n    };\r\n    save();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"home-root success-root\">\r\n      <div className=\"success-card\">\r\n        <div className=\"success-top\">\r\n          <Link to=\"/\" className=\"success-home\">← Quay lại Trang Chủ</Link>\r\n          <span />\r\n        </div>\r\n        <div className=\"success-icon\">\r\n          <img src=\"/success.png\" alt=\"success\" />\r\n        </div>\r\n        <h2 className=\"success-title\">Thanh Toán Thành Công!</h2>\r\n        <div className=\"success-sub\">Cảm ơn bạn đã đặt phòng tại HMS Hotel.</div>\r\n  <div className=\"success-code-line\"><span className=\"label\">Mã Đặt Phòng</span><span className=\"value\">{summary.code || token}</span></div>\r\n        <div className=\"success-sep\" />\r\n        <div className=\"success-grid\">\r\n          <div className=\"label\">Khách Sạn</div><div className=\"value\">{hotelName || summary.hotel || '—'}</div>\r\n          <div className=\"label\">Ngày Nhận</div><div className=\"value\">{summary.checkIn} - {summary.checkInTime}</div>\r\n          <div className=\"label\">Ngày Trả</div><div className=\"value\">{summary.checkOut} - {summary.checkOutTime}</div>\r\n          <div className=\"label\">Hạng Phòng</div><div className=\"value\">{summary.roomType || '—'}</div>\r\n          <div className=\"label\">Phòng</div><div className=\"value wrap\">{summary.roomNames || summary.roomType}</div>\r\n          <div className=\"label\">Khách</div><div className=\"value\">{summary.adults || 0} người lớn{summary.children ? ` • ${summary.children} trẻ em` : ''}</div>\r\n          <div className=\"label\">Tổng Cộng</div><div className=\"value bold nowrap\">{Number(summary.amount || 0).toLocaleString('vi-VN')} VND</div>\r\n        </div>\r\n        <div className=\"success-paid\">(ĐÃ THANH TOÁN)</div>\r\n        <div className=\"success-actions\">\r\n          <button className=\"checkout-btn success-btn\" onClick={printReceipt}>Tải phiếu xác nhận (PDF)</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}