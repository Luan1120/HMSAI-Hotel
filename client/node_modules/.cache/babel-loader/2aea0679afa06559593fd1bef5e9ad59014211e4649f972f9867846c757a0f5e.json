{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\AdminFeedback.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { authHeaders, getUserRole } from './auth';\nimport './HomePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction feedbackStatusBadge(status) {\n  const v = String(status || '').toLowerCase();\n  if (v === 'replied') return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"status-badge status-green\",\n    children: \"\\u0110\\xE3 ph\\u1EA3n h\\u1ED3i\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 28\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"status-badge status-yellow\",\n    children: \"Ch\\u01B0a ph\\u1EA3n h\\u1ED3i\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 10\n  }, this);\n}\nexport default function AdminFeedback({\n  isModal,\n  onClose\n}) {\n  _s();\n  const isAdmin = getUserRole() === 'Admin';\n  const [q, setQ] = useState('');\n  const [status, setStatus] = useState('all');\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n  const [detail, setDetail] = useState(null);\n  const [replyDraft, setReplyDraft] = useState({}); // { [reviewId]: text }\n\n  const load = async () => {\n    setLoading(true);\n    setErr('');\n    try {\n      const url = new URL('/api/admin/reviews', window.location.origin);\n      if (q) url.searchParams.set('q', q);\n      if (status && status !== 'all') url.searchParams.set('status', status);\n      url.searchParams.set('_', String(Date.now()));\n      const res = await fetch(url.toString(), {\n        headers: authHeaders(),\n        cache: 'no-store'\n      });\n      if (!res.ok) throw new Error('Không thể tải danh sách phản hồi');\n      const j = await res.json();\n      setItems(Array.isArray(j.items) ? j.items : []);\n    } catch (e) {\n      setErr(e.message || 'Lỗi tải dữ liệu');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (isAdmin) load();\n  }, []);\n  useEffect(() => {\n    if (!isAdmin) return;\n    const id = setTimeout(load, 300);\n    return () => clearTimeout(id);\n  }, [q, status]);\n  const openDetail = async id => {\n    try {\n      const res = await fetch(`/api/admin/reviews/${id}?_=${Date.now()}`, {\n        headers: authHeaders(),\n        cache: 'no-store'\n      });\n      if (!res.ok) throw new Error('Không thể tải chi tiết');\n      const j = await res.json();\n      setDetail(j);\n    } catch (e) {\n      setErr(e.message || 'Lỗi');\n    }\n  };\n  const sendReply = async id => {\n    const body = (replyDraft[id] || '').trim();\n    if (!body) return;\n    try {\n      const res = await fetch(`/api/admin/reviews/${id}/reply`, {\n        method: 'POST',\n        headers: {\n          ...authHeaders(),\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          body\n        })\n      });\n      if (!res.ok) throw new Error('Gửi phản hồi thất bại');\n      setReplyDraft(s => ({\n        ...s,\n        [id]: ''\n      }));\n      load();\n    } catch (e) {\n      alert(e.message || 'Lỗi gửi phản hồi');\n    }\n  };\n  if (!isAdmin) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ph-table\",\n    style: {\n      padding: 16,\n      color: '#b42318'\n    },\n    children: \"Ch\\u1EE9c n\\u0103ng ch\\u1EC9 d\\xE0nh cho qu\\u1EA3n tr\\u1ECB vi\\xEAn.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 24\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ph-table af-container\",\n    style: {\n      padding: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"home-rooms-title\",\n      style: {\n        textAlign: 'center',\n        marginTop: 0\n      },\n      children: \"Qu\\u1EA3n l\\xFD ph\\u1EA3n h\\u1ED3i kh\\xE1ch h\\xE0ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-toolbar af-toolbar\",\n      style: {\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-field reports-field-group af-field-grow\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reports-label\",\n          children: \"T\\xECm ki\\u1EBFm kh\\xE1ch h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"reports-input\",\n          style: {\n            width: '100%'\n          },\n          placeholder: \"T\\xEAn, email, ph\\xF2ng, KS...\",\n          value: q,\n          onChange: e => setQ(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-field reports-field-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reports-label\",\n          children: \"Tr\\u1EA1ng th\\xE1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: `reports-select af-status-select ${status === 'replied' ? 'af-select-green' : status === 'unreplied' ? 'af-select-yellow' : ''}`,\n          value: status,\n          onChange: e => setStatus(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            children: \"T\\u1EA5t c\\u1EA3 tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"unreplied\",\n            children: \"Ch\\u01B0a ph\\u1EA3n h\\u1ED3i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"replied\",\n            children: \"\\u0110\\xE3 ph\\u1EA3n h\\u1ED3i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"ph-btn ph-btn--secondary af-refresh\",\n        onClick: load,\n        children: \"L\\xE0m m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 8,\n        color: '#666'\n      },\n      children: \"\\u0110ang t\\u1EA3i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"ph-table-el af-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"M\\xE3 ph\\u1EA3n h\\u1ED3i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"N\\u1ED9i dung ph\\u1EA3n \\xE1nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ng\\xE0y ph\\u1EA3n \\xE1nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Nh\\u1EADp ph\\u1EA3n h\\u1ED3i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ng\\xE0y ph\\u1EA3n h\\u1ED3i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [items.map(it => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td code\",\n            children: it.code\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td\",\n            children: it.customerName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td\",\n            children: it.content || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td center\",\n            children: fmt(it.reviewDate)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"rv-textarea\",\n              rows: 2,\n              placeholder: \"Nh\\u1EADp ph\\u1EA3n h\\u1ED3i t\\u1EA1i \\u0111\\xE2y...\",\n              value: replyDraft[it.reviewId] || '',\n              onChange: e => setReplyDraft(s => ({\n                ...s,\n                [it.reviewId]: e.target.value\n              })),\n              style: {\n                minWidth: 220\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 6\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ph-btn\",\n                onClick: () => sendReply(it.reviewId),\n                children: \"G\\u1EEDi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td center\",\n            children: it.replyDate ? fmt(it.replyDate) : '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td center\",\n            children: feedbackStatusBadge(it.status)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td action\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ph-btn ph-btn--secondary\",\n              onClick: () => openDetail(it.reviewId),\n              children: \"Chi ti\\u1EBFt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this)]\n        }, it.reviewId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)), items.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"ph-td\",\n            colSpan: 8,\n            style: {\n              textAlign: 'center',\n              color: '#666'\n            },\n            children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#b42318',\n        marginTop: 8\n      },\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-overlay\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      onMouseDown: e => {\n        if (e.target === e.currentTarget) setDetail(null);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"profile-back\",\n        type: \"button\",\n        \"aria-label\": \"Quay l\\u1EA1i\",\n        onClick: () => setDetail(null),\n        children: \"\\u2190 Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-modal\",\n        style: {\n          maxWidth: '720px',\n          width: '96%',\n          marginTop: 56\n        },\n        onMouseDown: e => e.stopPropagation(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-table\",\n          style: {\n            padding: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"home-rooms-title\",\n            style: {\n              textAlign: 'left',\n              marginTop: 0\n            },\n            children: \"Chi ti\\u1EBFt ph\\u1EA3n h\\u1ED3i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#444',\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: detail.review.customerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 22\n              }, this), \" \\u2014 \", detail.review.customerEmail]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"KS: \", detail.review.hotelName, \", Ph\\xF2ng: \", detail.review.roomName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"\\u0110\\u1EB7t ph\\xF2ng: BK\", String(detail.review.bookingId).padStart(6, '0'), \" (\", fmt(detail.review.checkIn), \" \\u2013 \", fmt(detail.review.checkOut), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Ng\\xE0y \\u0111\\xE1nh gi\\xE1: \", fmt(detail.review.createdAt), \" \\u2014 \", detail.review.rating.toFixed(1), \" sao\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 8\n              },\n              children: [\"N\\u1ED9i dung: \", detail.review.comment || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              borderTop: '1px dashed #e5e5e5',\n              margin: '8px 0'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reports-label\",\n              style: {\n                marginBottom: 6\n              },\n              children: \"L\\u1ECBch s\\u1EED ph\\u1EA3n h\\u1ED3i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 17\n            }, this), detail.replies.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#666'\n              },\n              children: \"Ch\\u01B0a c\\xF3 ph\\u1EA3n h\\u1ED3i.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              style: {\n                margin: 0,\n                paddingLeft: 16\n              },\n              children: detail.replies.map(r => /*#__PURE__*/_jsxDEV(\"li\", {\n                style: {\n                  margin: '6px 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: r.adminName || 'Admin'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 30\n                  }, this), \" \\u2014 \", fmt(r.createdAt)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: r.body\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 25\n                }, this)]\n              }, r.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\n        .af-status-select { transition: background-color .25s, color .25s, border-color .25s; }\n        .af-select-green { background:#e6f7ec; color:#086637; border:1px solid #bfe6ce; font-weight:500; }\n        .af-select-yellow { background:#fff4d6; color:#8a6d00; border:1px solid #f2d291; font-weight:500; }\n        .af-select-green option, .af-select-yellow option { color:#111; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 3\n  }, this);\n}\n_s(AdminFeedback, \"3e9+OaT7SfXJDQvxZJC5N+Hq5S0=\");\n_c = AdminFeedback;\nfunction fmt(d) {\n  try {\n    const dt = new Date(d);\n    const dd = String(dt.getDate()).padStart(2, '0');\n    const mm = String(dt.getMonth() + 1).padStart(2, '0');\n    const yy = dt.getFullYear();\n    return `${dd}/${mm}/${yy}`;\n  } catch {\n    return '—';\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"AdminFeedback\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","authHeaders","getUserRole","jsxDEV","_jsxDEV","feedbackStatusBadge","status","v","String","toLowerCase","className","children","fileName","_jsxFileName","lineNumber","columnNumber","AdminFeedback","isModal","onClose","_s","isAdmin","q","setQ","setStatus","items","setItems","loading","setLoading","err","setErr","detail","setDetail","replyDraft","setReplyDraft","load","url","URL","window","location","origin","searchParams","set","Date","now","res","fetch","toString","headers","cache","ok","Error","j","json","Array","isArray","e","message","id","setTimeout","clearTimeout","openDetail","sendReply","body","trim","method","JSON","stringify","s","alert","style","padding","color","textAlign","marginTop","marginBottom","width","placeholder","value","onChange","target","onClick","map","it","code","customerName","content","fmt","reviewDate","rows","reviewId","minWidth","replyDate","length","colSpan","role","onMouseDown","currentTarget","type","maxWidth","stopPropagation","review","customerEmail","hotelName","roomName","bookingId","padStart","checkIn","checkOut","createdAt","rating","toFixed","comment","borderTop","margin","replies","paddingLeft","r","adminName","_c","d","dt","dd","getDate","mm","getMonth","yy","getFullYear","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminFeedback.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { authHeaders, getUserRole } from './auth';\r\nimport './HomePage.css';\r\n\r\nfunction feedbackStatusBadge(status){\r\n  const v = String(status||'').toLowerCase();\r\n  if(v==='replied') return <span className=\"status-badge status-green\">Đã phản hồi</span>;\r\n  return <span className=\"status-badge status-yellow\">Chưa phản hồi</span>;\r\n}\r\n\r\nexport default function AdminFeedback({ isModal, onClose }){\r\n  const isAdmin = getUserRole() === 'Admin';\r\n  const [q, setQ] = useState('');\r\n  const [status, setStatus] = useState('all');\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState('');\r\n  const [detail, setDetail] = useState(null);\r\n  const [replyDraft, setReplyDraft] = useState({}); // { [reviewId]: text }\r\n\r\n  const load = async () => {\r\n    setLoading(true); setErr('');\r\n    try {\r\n      const url = new URL('/api/admin/reviews', window.location.origin);\r\n      if (q) url.searchParams.set('q', q);\r\n      if (status && status !== 'all') url.searchParams.set('status', status);\r\n      url.searchParams.set('_', String(Date.now()));\r\n      const res = await fetch(url.toString(), { headers: authHeaders(), cache: 'no-store' });\r\n      if (!res.ok) throw new Error('Không thể tải danh sách phản hồi');\r\n      const j = await res.json();\r\n      setItems(Array.isArray(j.items) ? j.items : []);\r\n    } catch (e) {\r\n      setErr(e.message || 'Lỗi tải dữ liệu');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(()=>{ if (isAdmin) load(); }, []);\r\n  useEffect(()=>{\r\n    if (!isAdmin) return; const id = setTimeout(load, 300); return () => clearTimeout(id);\r\n  }, [q, status]);\r\n\r\n  const openDetail = async (id) => {\r\n    try {\r\n      const res = await fetch(`/api/admin/reviews/${id}?_=${Date.now()}`, { headers: authHeaders(), cache: 'no-store' });\r\n      if (!res.ok) throw new Error('Không thể tải chi tiết');\r\n      const j = await res.json();\r\n      setDetail(j);\r\n    } catch (e) { setErr(e.message || 'Lỗi'); }\r\n  };\r\n\r\n  const sendReply = async (id) => {\r\n    const body = (replyDraft[id] || '').trim();\r\n    if (!body) return;\r\n    try {\r\n      const res = await fetch(`/api/admin/reviews/${id}/reply`, {\r\n        method: 'POST',\r\n        headers: { ...authHeaders(), 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ body })\r\n      });\r\n      if (!res.ok) throw new Error('Gửi phản hồi thất bại');\r\n      setReplyDraft(s => ({ ...s, [id]: '' }));\r\n      load();\r\n    } catch (e) { alert(e.message || 'Lỗi gửi phản hồi'); }\r\n  };\r\n\r\n  if (!isAdmin) return <div className=\"ph-table\" style={{ padding: 16, color:'#b42318' }}>Chức năng chỉ dành cho quản trị viên.</div>;\r\n\r\n  return (\r\n  <div className=\"ph-table af-container\" style={{ padding: 12 }}>\r\n      <h2 className=\"home-rooms-title\" style={{ textAlign: 'center', marginTop: 0 }}>Quản lý phản hồi khách hàng</h2>\r\n\r\n      <div className=\"reports-toolbar af-toolbar\" style={{ marginBottom: 10 }}>\r\n        <div className=\"reports-field reports-field-group af-field-grow\">\r\n          <div className=\"reports-label\">Tìm kiếm khách hàng</div>\r\n          <input className=\"reports-input\" style={{ width: '100%' }} placeholder=\"Tên, email, phòng, KS...\" value={q} onChange={e=>setQ(e.target.value)} />\r\n        </div>\r\n        <div className=\"reports-field reports-field-group\">\r\n          <div className=\"reports-label\">Trạng thái</div>\r\n          <select className={`reports-select af-status-select ${status==='replied'?'af-select-green':status==='unreplied'?'af-select-yellow':''}`} value={status} onChange={e=>setStatus(e.target.value)}>\r\n            <option value=\"all\">Tất cả trạng thái</option>\r\n            <option value=\"unreplied\">Chưa phản hồi</option>\r\n            <option value=\"replied\">Đã phản hồi</option>\r\n          </select>\r\n        </div>\r\n        <button className=\"ph-btn ph-btn--secondary af-refresh\" onClick={load}>Làm mới</button>\r\n      </div>\r\n\r\n      {loading ? <div style={{ padding: 8, color:'#666' }}>Đang tải...</div> : (\r\n        <table className=\"ph-table-el af-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Mã phản hồi</th>\r\n              <th>Khách hàng</th>\r\n              <th>Nội dung phản ánh</th>\r\n              <th>Ngày phản ánh</th>\r\n              <th>Nhập phản hồi</th>\r\n              <th>Ngày phản hồi</th>\r\n              <th>Trạng thái</th>\r\n              <th>Hành động</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map(it => (\r\n              <tr key={it.reviewId}>\r\n                <td className=\"ph-td code\">{it.code}</td>\r\n                <td className=\"ph-td\">{it.customerName}</td>\r\n                <td className=\"ph-td\">{it.content || '—'}</td>\r\n                <td className=\"ph-td center\">{fmt(it.reviewDate)}</td>\r\n                <td className=\"ph-td\">\r\n                  <textarea\r\n                    className=\"rv-textarea\"\r\n                    rows={2}\r\n                    placeholder=\"Nhập phản hồi tại đây...\"\r\n                    value={replyDraft[it.reviewId] || ''}\r\n                    onChange={e=>setReplyDraft(s => ({ ...s, [it.reviewId]: e.target.value }))}\r\n                    style={{ minWidth: 220 }}\r\n                  />\r\n                  <div style={{ marginTop: 6 }}>\r\n                    <button className=\"ph-btn\" onClick={()=>sendReply(it.reviewId)}>Gửi</button>\r\n                  </div>\r\n                </td>\r\n                <td className=\"ph-td center\">{it.replyDate ? fmt(it.replyDate) : '—'}</td>\r\n                <td className=\"ph-td center\">\r\n                  {feedbackStatusBadge(it.status)}\r\n                </td>\r\n                <td className=\"ph-td action\"><button className=\"ph-btn ph-btn--secondary\" onClick={()=>openDetail(it.reviewId)}>Chi tiết</button></td>\r\n              </tr>\r\n            ))}\r\n            {items.length === 0 && !loading && (\r\n              <tr><td className=\"ph-td\" colSpan={8} style={{ textAlign:'center', color:'#666' }}>Không có dữ liệu.</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n\r\n      {err && <div style={{ color:'#b42318', marginTop: 8 }}>{err}</div>}\r\n\r\n      {detail && (\r\n        <div className=\"profile-overlay\" role=\"dialog\" aria-modal=\"true\" onMouseDown={(e)=>{ if (e.target === e.currentTarget) setDetail(null); }}>\r\n          <button className=\"profile-back\" type=\"button\" aria-label=\"Quay lại\" onClick={()=>setDetail(null)}>← Quay lại</button>\r\n          <div className=\"profile-modal\" style={{ maxWidth: '720px', width: '96%', marginTop: 56 }} onMouseDown={(e)=> e.stopPropagation()}>\r\n            <div className=\"ph-table\" style={{ padding: 12 }}>\r\n              <h3 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Chi tiết phản hồi</h3>\r\n              <div style={{ color:'#444', marginBottom: 8 }}>\r\n                <div><b>{detail.review.customerName}</b> — {detail.review.customerEmail}</div>\r\n                <div>KS: {detail.review.hotelName}, Phòng: {detail.review.roomName || '—'}</div>\r\n                <div>Đặt phòng: BK{String(detail.review.bookingId).padStart(6,'0')} ({fmt(detail.review.checkIn)} – {fmt(detail.review.checkOut)})</div>\r\n                <div>Ngày đánh giá: {fmt(detail.review.createdAt)} — {detail.review.rating.toFixed(1)} sao</div>\r\n                <div style={{ marginTop: 8 }}>Nội dung: {detail.review.comment || '—'}</div>\r\n              </div>\r\n              <div style={{ borderTop: '1px dashed #e5e5e5', margin: '8px 0' }} />\r\n              <div>\r\n                <div className=\"reports-label\" style={{ marginBottom: 6 }}>Lịch sử phản hồi</div>\r\n                {detail.replies.length === 0 ? (\r\n                  <div style={{ color:'#666' }}>Chưa có phản hồi.</div>\r\n                ) : (\r\n                  <ul style={{ margin: 0, paddingLeft: 16 }}>\r\n                    {detail.replies.map(r => (\r\n                      <li key={r.id} style={{ margin: '6px 0' }}>\r\n                        <div><b>{r.adminName || 'Admin'}</b> — {fmt(r.createdAt)}</div>\r\n                        <div>{r.body}</div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <style>{`\r\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\r\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\r\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\r\n        .af-status-select { transition: background-color .25s, color .25s, border-color .25s; }\r\n        .af-select-green { background:#e6f7ec; color:#086637; border:1px solid #bfe6ce; font-weight:500; }\r\n        .af-select-yellow { background:#fff4d6; color:#8a6d00; border:1px solid #f2d291; font-weight:500; }\r\n        .af-select-green option, .af-select-yellow option { color:#111; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction fmt(d){ try{ const dt = new Date(d); const dd = String(dt.getDate()).padStart(2,'0'); const mm=String(dt.getMonth()+1).padStart(2,'0'); const yy=dt.getFullYear(); return `${dd}/${mm}/${yy}`; }catch{ return '—'; } }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}