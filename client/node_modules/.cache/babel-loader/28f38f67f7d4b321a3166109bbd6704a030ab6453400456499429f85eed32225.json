{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\AdminBookings.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport './HomePage.css';\nimport { authHeaders } from './auth';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STATUS_FILTERS = [{\n  key: '',\n  label: 'Tất cả trạng thái'\n}, {\n  key: 'success',\n  label: 'Thành công'\n}, {\n  key: 'confirmed',\n  label: 'Đã xác nhận'\n}, {\n  key: 'pending',\n  label: 'Chờ xác nhận'\n}, {\n  key: 'canceled',\n  label: 'Đã hủy'\n}];\n\n// Color helper & badge renderer\nfunction bookingStatusClass(key) {\n  const v = String(key || '').toLowerCase();\n  if (v === 'success') return 'status-badge status-green';\n  if (v === 'canceled') return 'status-badge status-red';\n  if (v === 'pending' || v === 'confirmed') return 'status-badge status-yellow';\n  return 'status-badge';\n}\nfunction renderStatusBadge(k) {\n  const v = String(k || '').toLowerCase();\n  let label = '—';\n  if (v === 'success') label = 'Thành công';else if (v === 'confirmed') label = 'Đã xác nhận';else if (v === 'pending') label = 'Chờ xác nhận';else if (v === 'canceled') label = 'Đã hủy';\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: bookingStatusClass(v),\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 10\n  }, this);\n}\nexport default function AdminBookings({\n  isModal,\n  onClose,\n  highlightBookingId\n}) {\n  _s();\n  const [q, setQ] = useState('');\n  const [status, setStatus] = useState('');\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [detail, setDetail] = useState(null);\n\n  // Update booking status helper (optimistic)\n  // (updateStatus helper removed – not currently used in UI actions)\n\n  const fetchList = useCallback(async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const url = new URL('/api/admin/bookings', window.location.origin);\n      if (q) url.searchParams.set('q', q);\n      if (status) url.searchParams.set('status', status);\n      const res = await fetch(url, {\n        headers: {\n          ...authHeaders()\n        }\n      });\n      if (!res.ok) throw new Error('Không tải được danh sách đặt phòng');\n      const j = await res.json();\n      setItems(Array.isArray(j.items) ? j.items : []);\n    } catch (e) {\n      setError(e.message || 'Lỗi tải dữ liệu');\n      setItems([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [q, status]);\n  useEffect(() => {\n    fetchList();\n  }, [fetchList]);\n  // When highlightBookingId is provided, wait for items to load then scroll to and highlight it\n  useEffect(() => {\n    if (!highlightBookingId || items.length === 0) return;\n    // find the DOM row by data-booking-id\n    setTimeout(() => {\n      try {\n        const el = document.querySelector(`[data-booking-id=\"${highlightBookingId}\"]`);\n        if (el && el.scrollIntoView) {\n          el.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center'\n          });\n          el.classList.add('highlight-booking');\n          setTimeout(() => {\n            try {\n              el.classList.remove('highlight-booking');\n            } catch {}\n          }, 5000);\n        }\n      } catch (e) {}\n    }, 300);\n  }, [highlightBookingId, items]);\n  const debounceRef = useRef(null);\n  useEffect(() => {\n    if (debounceRef.current) clearTimeout(debounceRef.current);\n    debounceRef.current = setTimeout(fetchList, 250);\n    return () => {\n      if (debounceRef.current) clearTimeout(debounceRef.current);\n    };\n  }, [q, status, fetchList]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-rooms\",\n    style: {\n      padding: isModal ? 0 : '80px 12px 20px'\n    },\n    children: [!isModal && /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"home-header\",\n      style: {\n        position: 'sticky',\n        top: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"logo\",\n          className: \"home-header-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          className: \"home-header-title home-header-home-btn\",\n          children: \"TRANG CH\\u1EE6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ph-table\",\n      style: {\n        padding: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"home-rooms-title\",\n        style: {\n          textAlign: 'left',\n          marginTop: 0\n        },\n        children: \"Qu\\u1EA3n l\\xFD \\u0111\\u1EB7t ph\\xF2ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => e.preventDefault(),\n        className: \"au-toolbar\",\n        style: {\n          gridTemplateColumns: '1fr auto auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"au-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"au-input\",\n            placeholder: \"T\\xECm ki\\u1EBFm kh\\xE1ch h\\xE0ng...\",\n            value: q,\n            onChange: e => setQ(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"ph-btn ph-btn--secondary\",\n          value: status,\n          onChange: e => setStatus(e.target.value),\n          style: {\n            height: 36\n          },\n          children: STATUS_FILTERS.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s.key,\n            children: s.label\n          }, s.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 38\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ph-btn au-add-btn\",\n          type: \"button\",\n          onClick: () => alert('Chức năng thêm đặt phòng sẽ sớm có!'),\n          children: \"+ Th\\xEAm \\u0111\\u1EB7t ph\\xF2ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#666'\n        },\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 20\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#b42318'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 78\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-tr ph-head\",\n          style: {\n            gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"M\\xE3 \\u0111\\u01A1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"S\\u0110T\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"S\\u1ED1 ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Lo\\u1EA1i ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Ng\\xE0y nh\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Ng\\xE0y tr\\u1EA3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), items.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-td\",\n          style: {\n            padding: 12,\n            color: '#666'\n          },\n          children: \"Kh\\xF4ng c\\xF3 \\u0111\\u1EB7t ph\\xF2ng n\\xE0o.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this) : items.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-booking-id\": it.bookingId,\n          className: \"ph-tr\",\n          style: {\n            gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.code\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.customerName || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.customerPhone || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.roomName || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.roomType || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: fmtDate(it.checkIn)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: fmtDate(it.checkOut)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: renderStatusBadge(it.statusKey)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            style: {\n              display: 'flex',\n              gap: 6,\n              whiteSpace: 'nowrap'\n            },\n            children: (() => {\n              const st = String(it.statusKey || '').toLowerCase();\n              const isPending = st === 'pending';\n              const disabled = !isPending;\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `ph-btn booking-action-btn ${isPending ? 'booking-action--active' : 'booking-action--disabled'}`,\n                  type: \"button\",\n                  disabled: disabled,\n                  onClick: async () => {\n                    if (!isPending) return;\n                    try {\n                      const r = await fetch(`/api/payments/${it.bookingId}/confirm`, {\n                        method: 'PUT',\n                        headers: {\n                          ...authHeaders(),\n                          'Content-Type': 'application/json'\n                        }\n                      });\n                      if (!r.ok) {\n                        const t = await r.text();\n                        throw new Error(t);\n                      }\n                      setItems(list => list.map(b => b.bookingId === it.bookingId ? {\n                        ...b,\n                        statusKey: 'success'\n                      } : b));\n                    } catch (e) {\n                      alert(e.message || 'Lỗi xác nhận');\n                    }\n                  },\n                  title: isPending ? 'Xác nhận thanh toán' : 'Đã xử lý',\n                  children: \"X\\xE1c nh\\u1EADn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `ph-btn booking-action-btn ${isPending ? 'booking-action--active' : 'booking-action--disabled'}`,\n                  type: \"button\",\n                  disabled: disabled,\n                  onClick: async () => {\n                    if (!isPending) return;\n                    if (!window.confirm('Hủy đơn đặt phòng này?')) return;\n                    try {\n                      const r = await fetch(`/api/payments/${it.bookingId}/admin-cancel`, {\n                        method: 'PUT',\n                        headers: {\n                          ...authHeaders(),\n                          'Content-Type': 'application/json'\n                        }\n                      });\n                      if (!r.ok) {\n                        const t = await r.text();\n                        throw new Error(t);\n                      }\n                      setItems(list => list.map(b => b.bookingId === it.bookingId ? {\n                        ...b,\n                        statusKey: 'canceled'\n                      } : b));\n                    } catch (e) {\n                      alert(e.message || 'Lỗi hủy');\n                    }\n                  },\n                  title: isPending ? 'Hủy đơn & hoàn 100%' : 'Đã xử lý',\n                  children: \"H\\u1EE7y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ph-btn ph-btn--secondary\",\n                  type: \"button\",\n                  onClick: () => setDetail(it),\n                  children: \"Chi ti\\u1EBFt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true);\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this)]\n        }, it.bookingId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-overlay\",\n      onMouseDown: e => {\n        if (e.target === e.currentTarget) setDetail(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-modal\",\n        onMouseDown: e => e.stopPropagation(),\n        style: {\n          width: 720,\n          maxWidth: '98%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-table\",\n          style: {\n            padding: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: 0\n            },\n            children: \"Chi ti\\u1EBFt \\u0111\\u1EB7t ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 10,\n              display: 'grid',\n              gridTemplateColumns: '1fr 1fr',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"M\\xE3 \\u0111\\u01A1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 22\n              }, this), \" \", detail.code]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Tr\\u1EA1ng th\\xE1i:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 22\n              }, this), \" \", renderStatus(detail.statusKey)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Kh\\xE1ch h\\xE0ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 22\n              }, this), \" \", detail.customerName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"S\\u0110T:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 22\n              }, this), \" \", detail.customerPhone || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 22\n              }, this), \" \", detail.customerEmail || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Kh\\xE1ch s\\u1EA1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 22\n              }, this), \" \", detail.hotelName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Ph\\xF2ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 22\n              }, this), \" \", detail.roomName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Lo\\u1EA1i ph\\xF2ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 22\n              }, this), \" \", detail.roomType || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Ng\\xE0y nh\\u1EADn:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 22\n              }, this), \" \", fmtDate(detail.checkIn)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Ng\\xE0y tr\\u1EA3:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 22\n              }, this), \" \", fmtDate(detail.checkOut)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"S\\u1ED1 \\u0111\\xEAm:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 22\n              }, this), \" \", detail.nights]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Kh\\xE1ch:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 22\n              }, this), \" \", detail.guests]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"T\\u1ED5ng ti\\u1EC1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 22\n              }, this), \" \", Number(detail.total || 0).toLocaleString('vi-VN'), \" VN\\u0110\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Thanh to\\xE1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 22\n              }, this), \" \", detail.method || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              textAlign: 'right'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ph-btn\",\n              onClick: () => setDetail(null),\n              children: \"\\u0110\\xF3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\n        .status-red { background:#ffe8e6; color:#b42318; border-color:#f5b5ae; }\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\n        .booking-action-btn { min-width:82px; font-weight:700; letter-spacing:.3px; position:relative; overflow:hidden; }\n        .booking-action--active {\n          background:linear-gradient(135deg,#ffcc33,#ffe27a 55%,#fff3c1);\n          color:#222;\n          border:1px solid #f6c23e;\n          box-shadow:0 2px 4px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.4) inset;\n          transition: background .25s ease, box-shadow .25s ease, transform .15s ease;\n        }\n        .booking-action--active:hover { background:linear-gradient(135deg,#ffbd00,#ffd659 55%,#ffeaa4); box-shadow:0 4px 10px rgba(0,0,0,.18); }\n        .booking-action--active:active { transform:translateY(1px); }\n        .booking-action--active:focus-visible { outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 3px rgba(255,193,7,.55); }\n        .booking-action--disabled {\n          background:#d9d9d9;\n          color:#555;\n          cursor:not-allowed;\n          border:1px solid #d0d0d0;\n          box-shadow:0 1px 2px rgba(0,0,0,.06) inset, 0 0 0 1px #ececec;\n          text-shadow:0 1px 0 rgba(255,255,255,.55);\n        }\n        .booking-action--disabled:hover { background:#d9d9d9; }\n        .booking-action--disabled:focus-visible { outline:none; }\n        .highlight-booking { box-shadow: 0 0 0 3px rgba(10,103,193,0.18); background: rgba(10,103,193,0.04); transition: background .4s ease; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminBookings, \"9MO6CMKESopsWnkMNdvzygI+JZQ=\");\n_c = AdminBookings;\nfunction renderStatus(k) {\n  const v = String(k || '').toLowerCase();\n  if (v === 'success') return 'Thành công';\n  if (v === 'confirmed') return 'Đã xác nhận';\n  if (v === 'pending') return 'Chờ xác nhận';\n  if (v === 'canceled') return 'Đã hủy';\n  return '—';\n}\nfunction fmtDate(d) {\n  if (!d) return '—';\n  const dt = new Date(d);\n  const dd = String(dt.getDate()).padStart(2, '0');\n  const mm = String(dt.getMonth() + 1).padStart(2, '0');\n  const yy = dt.getFullYear();\n  return `${dd}/${mm}/${yy}`;\n}\nvar _c;\n$RefreshReg$(_c, \"AdminBookings\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","authHeaders","jsxDEV","_jsxDEV","Fragment","_Fragment","STATUS_FILTERS","key","label","bookingStatusClass","v","String","toLowerCase","renderStatusBadge","k","className","children","fileName","_jsxFileName","lineNumber","columnNumber","AdminBookings","isModal","onClose","highlightBookingId","_s","q","setQ","status","setStatus","items","setItems","loading","setLoading","error","setError","detail","setDetail","fetchList","url","URL","window","location","origin","searchParams","set","res","fetch","headers","ok","Error","j","json","Array","isArray","e","message","length","setTimeout","el","document","querySelector","scrollIntoView","behavior","block","classList","add","remove","debounceRef","current","clearTimeout","style","padding","position","top","src","alt","href","textAlign","marginTop","onSubmit","preventDefault","gridTemplateColumns","placeholder","value","onChange","target","height","map","s","type","onClick","alert","color","it","bookingId","code","customerName","customerPhone","roomName","roomType","fmtDate","checkIn","checkOut","statusKey","display","gap","whiteSpace","st","isPending","disabled","r","method","t","text","list","b","title","confirm","onMouseDown","currentTarget","stopPropagation","width","maxWidth","margin","renderStatus","customerEmail","hotelName","nights","guests","Number","total","toLocaleString","_c","d","dt","Date","dd","getDate","padStart","mm","getMonth","yy","getFullYear","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminBookings.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport './HomePage.css';\r\nimport { authHeaders } from './auth';\r\n\r\nconst STATUS_FILTERS = [\r\n  { key: '', label: 'Tất cả trạng thái' },\r\n  { key: 'success', label: 'Thành công' },\r\n  { key: 'confirmed', label: 'Đã xác nhận' },\r\n  { key: 'pending', label: 'Chờ xác nhận' },\r\n  { key: 'canceled', label: 'Đã hủy' },\r\n];\r\n\r\n// Color helper & badge renderer\r\nfunction bookingStatusClass(key){\r\n  const v = String(key||'').toLowerCase();\r\n  if(v==='success') return 'status-badge status-green';\r\n  if(v==='canceled') return 'status-badge status-red';\r\n  if(v==='pending' || v==='confirmed') return 'status-badge status-yellow';\r\n  return 'status-badge';\r\n}\r\nfunction renderStatusBadge(k){\r\n  const v = String(k||'').toLowerCase();\r\n  let label = '—';\r\n  if (v === 'success') label = 'Thành công';\r\n  else if (v === 'confirmed') label = 'Đã xác nhận';\r\n  else if (v === 'pending') label = 'Chờ xác nhận';\r\n  else if (v === 'canceled') label = 'Đã hủy';\r\n  return <span className={bookingStatusClass(v)}>{label}</span>;\r\n}\r\n\r\nexport default function AdminBookings({ isModal, onClose, highlightBookingId }) {\r\n  const [q, setQ] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [detail, setDetail] = useState(null);\r\n\r\n  // Update booking status helper (optimistic)\r\n  // (updateStatus helper removed – not currently used in UI actions)\r\n\r\n  const fetchList = useCallback(async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const url = new URL('/api/admin/bookings', window.location.origin);\r\n      if (q) url.searchParams.set('q', q);\r\n      if (status) url.searchParams.set('status', status);\r\n  const res = await fetch(url, { headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Không tải được danh sách đặt phòng');\r\n      const j = await res.json();\r\n      setItems(Array.isArray(j.items) ? j.items : []);\r\n    } catch (e) { setError(e.message || 'Lỗi tải dữ liệu'); setItems([]); }\r\n    finally { setLoading(false); }\r\n  }, [q, status]);\r\n\r\n  useEffect(() => { fetchList(); }, [fetchList]);\r\n  // When highlightBookingId is provided, wait for items to load then scroll to and highlight it\r\n  useEffect(() => {\r\n    if (!highlightBookingId || items.length === 0) return;\r\n    // find the DOM row by data-booking-id\r\n    setTimeout(() => {\r\n      try {\r\n  const el = document.querySelector(`[data-booking-id=\"${highlightBookingId}\"]`);\r\n        if (el && el.scrollIntoView) {\r\n          el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n          el.classList.add('highlight-booking');\r\n          setTimeout(() => { try { el.classList.remove('highlight-booking'); } catch {} }, 5000);\r\n        }\r\n      } catch (e) {}\r\n    }, 300);\r\n  }, [highlightBookingId, items]);\r\n  const debounceRef = useRef(null);\r\n  useEffect(() => {\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(fetchList, 250);\r\n    return () => { if (debounceRef.current) clearTimeout(debounceRef.current); };\r\n  }, [q, status, fetchList]);\r\n\r\n  return (\r\n    <div className=\"admin-rooms\" style={{ padding: isModal ? 0 : '80px 12px 20px' }}>\r\n      {!isModal && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <a href=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</a>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Quản lý đặt phòng</h2>\r\n        <form onSubmit={(e)=>e.preventDefault()} className=\"au-toolbar\" style={{ gridTemplateColumns: '1fr auto auto' }}>\r\n          <div className=\"au-group\">\r\n            <input className=\"au-input\" placeholder=\"Tìm kiếm khách hàng...\" value={q} onChange={e=>setQ(e.target.value)} />\r\n          </div>\r\n          <select className=\"ph-btn ph-btn--secondary\" value={status} onChange={e=>setStatus(e.target.value)} style={{ height: 36 }}>\r\n            {STATUS_FILTERS.map(s => <option key={s.key} value={s.key}>{s.label}</option>)}\r\n          </select>\r\n          <button className=\"ph-btn au-add-btn\" type=\"button\" onClick={()=>alert('Chức năng thêm đặt phòng sẽ sớm có!')}>+ Thêm đặt phòng</button>\r\n        </form>\r\n\r\n        {loading ? <div style={{ color:'#666' }}>Đang tải...</div> : error ? <div style={{ color:'#b42318' }}>{error}</div> : (\r\n          <div>\r\n            <div className=\"ph-tr ph-head\" style={{ gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr' }}>\r\n              <div className=\"ph-td\">Mã đơn</div>\r\n              <div className=\"ph-td\">Khách hàng</div>\r\n              <div className=\"ph-td\">SĐT</div>\r\n              <div className=\"ph-td\">Số phòng</div>\r\n              <div className=\"ph-td\">Loại phòng</div>\r\n              <div className=\"ph-td\">Ngày nhận</div>\r\n              <div className=\"ph-td\">Ngày trả</div>\r\n              <div className=\"ph-td\">Trạng thái</div>\r\n              <div className=\"ph-td\">Hành động</div>\r\n            </div>\r\n            {items.length === 0 ? (\r\n              <div className=\"ph-td\" style={{ padding: 12, color: '#666' }}>Không có đặt phòng nào.</div>\r\n            ) : items.map(it => (\r\n              <div key={it.bookingId} data-booking-id={it.bookingId} className=\"ph-tr\" style={{ gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr' }}>\r\n                <div className=\"ph-td\">{it.code}</div>\r\n                <div className=\"ph-td\">{it.customerName || '—'}</div>\r\n                <div className=\"ph-td\">{it.customerPhone || '—'}</div>\r\n                <div className=\"ph-td\">{it.roomName || '—'}</div>\r\n                <div className=\"ph-td\">{it.roomType || '—'}</div>\r\n                <div className=\"ph-td\">{fmtDate(it.checkIn)}</div>\r\n                <div className=\"ph-td\">{fmtDate(it.checkOut)}</div>\r\n                <div className=\"ph-td\">{renderStatusBadge(it.statusKey)}</div>\r\n                <div className=\"ph-td\" style={{ display:'flex', gap:6, whiteSpace:'nowrap' }}>\r\n                  {(() => {\r\n                    const st = String(it.statusKey||'').toLowerCase();\r\n                    const isPending = st === 'pending';\r\n                    const disabled = !isPending;\r\n                    return (\r\n                      <>\r\n                        <button\r\n                          className={`ph-btn booking-action-btn ${isPending? 'booking-action--active':'booking-action--disabled'}`}\r\n                          type=\"button\"\r\n                          disabled={disabled}\r\n                          onClick={async()=>{\r\n                            if(!isPending) return;\r\n                            try {\r\n                              const r = await fetch(`/api/payments/${it.bookingId}/confirm`, { method:'PUT', headers:{ ...authHeaders(), 'Content-Type':'application/json' } });\r\n                              if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                              setItems(list => list.map(b => b.bookingId===it.bookingId ? { ...b, statusKey:'success' } : b));\r\n                            } catch(e){ alert(e.message||'Lỗi xác nhận'); }\r\n                          }}\r\n                          title={isPending? 'Xác nhận thanh toán' : 'Đã xử lý'}\r\n                        >Xác nhận</button>\r\n                        <button\r\n                          className={`ph-btn booking-action-btn ${isPending? 'booking-action--active':'booking-action--disabled'}`}\r\n                          type=\"button\"\r\n                          disabled={disabled}\r\n                          onClick={async()=>{\r\n                            if(!isPending) return;\r\n                            if(!window.confirm('Hủy đơn đặt phòng này?')) return;\r\n                            try {\r\n                              const r = await fetch(`/api/payments/${it.bookingId}/admin-cancel`, { method:'PUT', headers:{ ...authHeaders(), 'Content-Type':'application/json' } });\r\n                              if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                              setItems(list => list.map(b => b.bookingId===it.bookingId ? { ...b, statusKey:'canceled' } : b));\r\n                            } catch(e){ alert(e.message||'Lỗi hủy'); }\r\n                          }}\r\n                          title={isPending? 'Hủy đơn & hoàn 100%' : 'Đã xử lý'}\r\n                        >Hủy</button>\r\n                        <button className=\"ph-btn ph-btn--secondary\" type=\"button\" onClick={()=>setDetail(it)}>Chi tiết</button>\r\n                      </>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {detail && (\r\n        <div className=\"profile-overlay\" onMouseDown={(e)=>{ if (e.target===e.currentTarget) setDetail(null); }}>\r\n          <div className=\"profile-modal\" onMouseDown={(e)=>e.stopPropagation()} style={{ width: 720, maxWidth:'98%' }}>\r\n            <div className=\"ph-table\" style={{ padding: 16 }}>\r\n              <h3 style={{ margin: 0 }}>Chi tiết đặt phòng</h3>\r\n              <div style={{ marginTop: 10, display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 8 }}>\r\n                <div><b>Mã đơn:</b> {detail.code}</div>\r\n                <div><b>Trạng thái:</b> {renderStatus(detail.statusKey)}</div>\r\n                <div><b>Khách hàng:</b> {detail.customerName || '—'}</div>\r\n                <div><b>SĐT:</b> {detail.customerPhone || '—'}</div>\r\n                <div><b>Email:</b> {detail.customerEmail || '—'}</div>\r\n                <div><b>Khách sạn:</b> {detail.hotelName || '—'}</div>\r\n                <div><b>Phòng:</b> {detail.roomName || '—'}</div>\r\n                <div><b>Loại phòng:</b> {detail.roomType || '—'}</div>\r\n                <div><b>Ngày nhận:</b> {fmtDate(detail.checkIn)}</div>\r\n                <div><b>Ngày trả:</b> {fmtDate(detail.checkOut)}</div>\r\n                <div><b>Số đêm:</b> {detail.nights}</div>\r\n                <div><b>Khách:</b> {detail.guests}</div>\r\n                <div><b>Tổng tiền:</b> {Number(detail.total || 0).toLocaleString('vi-VN')} VNĐ</div>\r\n                <div><b>Thanh toán:</b> {detail.method || '—'}</div>\r\n              </div>\r\n              <div style={{ marginTop: 12, textAlign: 'right' }}>\r\n                <button className=\"ph-btn\" onClick={()=>setDetail(null)}>Đóng</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <style>{`\r\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\r\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\r\n        .status-red { background:#ffe8e6; color:#b42318; border-color:#f5b5ae; }\r\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\r\n        .booking-action-btn { min-width:82px; font-weight:700; letter-spacing:.3px; position:relative; overflow:hidden; }\r\n        .booking-action--active {\r\n          background:linear-gradient(135deg,#ffcc33,#ffe27a 55%,#fff3c1);\r\n          color:#222;\r\n          border:1px solid #f6c23e;\r\n          box-shadow:0 2px 4px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.4) inset;\r\n          transition: background .25s ease, box-shadow .25s ease, transform .15s ease;\r\n        }\r\n        .booking-action--active:hover { background:linear-gradient(135deg,#ffbd00,#ffd659 55%,#ffeaa4); box-shadow:0 4px 10px rgba(0,0,0,.18); }\r\n        .booking-action--active:active { transform:translateY(1px); }\r\n        .booking-action--active:focus-visible { outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 3px rgba(255,193,7,.55); }\r\n        .booking-action--disabled {\r\n          background:#d9d9d9;\r\n          color:#555;\r\n          cursor:not-allowed;\r\n          border:1px solid #d0d0d0;\r\n          box-shadow:0 1px 2px rgba(0,0,0,.06) inset, 0 0 0 1px #ececec;\r\n          text-shadow:0 1px 0 rgba(255,255,255,.55);\r\n        }\r\n        .booking-action--disabled:hover { background:#d9d9d9; }\r\n        .booking-action--disabled:focus-visible { outline:none; }\r\n        .highlight-booking { box-shadow: 0 0 0 3px rgba(10,103,193,0.18); background: rgba(10,103,193,0.04); transition: background .4s ease; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction renderStatus(k) {\r\n  const v = String(k||'').toLowerCase();\r\n  if (v === 'success') return 'Thành công';\r\n  if (v === 'confirmed') return 'Đã xác nhận';\r\n  if (v === 'pending') return 'Chờ xác nhận';\r\n  if (v === 'canceled') return 'Đã hủy';\r\n  return '—';\r\n}\r\n\r\nfunction fmtDate(d){ if(!d) return '—'; const dt=new Date(d); const dd=String(dt.getDate()).padStart(2,'0'); const mm=String(dt.getMonth()+1).padStart(2,'0'); const yy=dt.getFullYear(); return `${dd}/${mm}/${yy}`; }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}