{"ast":null,"code":"import _objectSpread from\"D:/DA_TichHop/HMS_AI Hotel/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import'./Auth.css';import'./UniverseBg.css';import UniverseBg from'./UniverseBg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[rememberMe,setRememberMe]=useState(false);const[showPassword,setShowPassword]=useState(false);const[message,setMessage]=useState('');const[error,setError]=useState('');const googleBtnRef=useRef(null);// Initialize Google One Tap / button\nuseEffect(()=>{const clientId=process.env.REACT_APP_GOOGLE_CLIENT_ID||window.GOOGLE_CLIENT_ID;if(!clientId)return;// not configured\nconst init=()=>{if(!window.google||!window.google.accounts||!googleBtnRef.current)return;try{window.google.accounts.id.initialize({client_id:clientId,callback:async response=>{if(!response||!response.credential)return;setError('');setMessage('Đang xác thực Google...');try{const r=await fetch('/api/auth/google',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({credential:response.credential})});const data=await r.json();if(!r.ok)throw new Error(data.message||'Đăng nhập Google thất bại');setMessage(data.message||'Đăng nhập thành công');if(data.user){try{localStorage.setItem('hmsUser',JSON.stringify(data.user));window.dispatchEvent(new Event('hms-auth-change'));}catch(_unused){}}// redirect\nnavigate('/');}catch(e){setError(e.message);setMessage('');}},auto_select:false,cancel_on_tap_outside:true});window.google.accounts.id.renderButton(googleBtnRef.current,{theme:'outline',size:'large',width:320});}catch(e){/* ignore */}};// Wait for script\nif(window.google)init();else{const id=setTimeout(init,500);return()=>clearTimeout(id);}},[navigate]);// Helpers for per-email remembered passwords\nconst getCredMap=()=>{try{const raw=localStorage.getItem('hmsCredMap');return raw?JSON.parse(raw):{};}catch(_unused2){return{};}};const saveCredMap=map=>{try{localStorage.setItem('hmsCredMap',JSON.stringify(map));}catch(_unused3){}};// One-time migration from old single-credential storage to map\nuseEffect(()=>{try{const remember=localStorage.getItem('hmsRemember');const credsRaw=localStorage.getItem('hmsCreds');if(remember==='1'&&credsRaw){const prev=JSON.parse(credsRaw);const key=(prev.email||'').trim().toLowerCase();if(key){const map=getCredMap();map[key]=prev.password||'';saveCredMap(map);}}localStorage.removeItem('hmsRemember');localStorage.removeItem('hmsCreds');}catch(_unused4){}},[]);// When email changes, auto-fill password if we have it saved for that email\nconst handleEmailChange=val=>{setEmail(val);const key=(val||'').trim().toLowerCase();const map=getCredMap();if(key&&Object.prototype.hasOwnProperty.call(map,key)){setPassword(map[key]||'');setRememberMe(true);}else{// Clear password when switching to an email we don't recognize\nsetPassword('');setRememberMe(false);}};const handleSubmit=async e=>{e.preventDefault();setError('');setMessage('');try{const res=await fetch('http://localhost:5000/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok)throw new Error(data.message||'Đăng nhập thất bại');setMessage(data.message);// Lưu thông tin người dùng để hiện tên ở user menu\nif(data.user){try{let user=data.user;// If avatar missing, try to fetch profile for avatar enrichment\nif(!user.avatar&&user.email){try{const res2=await fetch(\"/api/users/profile?email=\".concat(encodeURIComponent(user.email),\"&_=\").concat(Date.now()));if(res2.ok){const j2=await res2.json();if(j2&&j2.user&&j2.user.avatar)user=_objectSpread(_objectSpread({},user),{},{avatar:j2.user.avatar});}}catch(_unused5){}}localStorage.setItem('hmsUser',JSON.stringify(user));// Thông báo cho các component khác (cùng tab) cập nhật\nwindow.dispatchEvent(new Event('hms-auth-change'));}catch(_unused6){}}// Xử lý Nhớ mật khẩu theo email: chỉ lưu/ghi đè khi được tick\ntry{const key=(email||'').trim().toLowerCase();if(key){const map=getCredMap();if(rememberMe)map[key]=password;// không xóa nếu unchecked\nsaveCredMap(map);}}catch(_unused7){}// Xóa dữ liệu trong input sau khi đăng nhập thành công\nsetEmail('');setPassword('');// Chuyển tới trang HomePage\nnavigate('/');try{setTimeout(()=>window.scrollTo(0,0),0);}catch(_unused8){}}catch(err){setError(err.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',minHeight:'100vh',overflow:'hidden'},children:[/*#__PURE__*/_jsx(UniverseBg,{}),/*#__PURE__*/_jsx(\"div\",{style:{position:'relative',zIndex:1},children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"snake-border-top\"}),/*#__PURE__*/_jsx(\"div\",{className:\"snake-border-bottom\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0102NG NH\\u1EACP\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Nh\\u1EADp \\u0111\\u1ECBa ch\\u1EC9 email\",value:email,onChange:e=>handleEmailChange(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',placeholder:\"M\\u1EADt kh\\u1EA9u\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-password\",onClick:()=>setShowPassword(!showPassword),children:showPassword?'Ẩn':'Hiện'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-remember\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"rememberMe\",type:\"checkbox\",checked:rememberMe,onChange:e=>setRememberMe(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rememberMe\",className:\"auth-remember-label\",children:\"Nh\\u1EDB m\\u1EADt kh\\u1EA9u\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",type:\"submit\",children:\"Ti\\u1EBFp\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-msg\",children:error}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"success-msg\",children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"or\",children:\"ho\\u1EB7c ti\\u1EBFp t\\u1EE5c v\\u1EDBi\"}),/*#__PURE__*/_jsx(\"div\",{ref:googleBtnRef,style:{display:'flex',justifyContent:'center',marginBottom:'12px'}}),!process.env.REACT_APP_GOOGLE_CLIENT_ID&&!window.GOOGLE_CLIENT_ID&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#888',textAlign:'center',marginBottom:'8px'},children:\"(Ch\\u01B0a c\\u1EA5u h\\xECnh Google Client ID - th\\xEAm REACT_APP_GOOGLE_CLIENT_ID v\\xE0o .env)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-links\",children:[/*#__PURE__*/_jsx(Link,{className:\"auth-link\",to:\"/forgot-password\",children:\"B\\u1EA1n qu\\xEAn m\\u1EADt kh\\u1EA9u?\"}),/*#__PURE__*/_jsx(Link,{className:\"auth-link\",to:\"/register\",children:\"\\u0110\\u0103ng k\\xFD\"})]})]})})]});}export default Login;","map":{"version":3,"names":["React","useEffect","useState","useRef","Link","useNavigate","UniverseBg","jsx","_jsx","jsxs","_jsxs","Login","navigate","email","setEmail","password","setPassword","rememberMe","setRememberMe","showPassword","setShowPassword","message","setMessage","error","setError","googleBtnRef","clientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","window","GOOGLE_CLIENT_ID","init","google","accounts","current","id","initialize","client_id","callback","response","credential","r","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","user","localStorage","setItem","dispatchEvent","Event","_unused","e","auto_select","cancel_on_tap_outside","renderButton","theme","size","width","setTimeout","clearTimeout","getCredMap","raw","getItem","parse","_unused2","saveCredMap","map","_unused3","remember","credsRaw","prev","key","trim","toLowerCase","removeItem","_unused4","handleEmailChange","val","Object","prototype","hasOwnProperty","call","handleSubmit","preventDefault","res","avatar","res2","concat","encodeURIComponent","Date","now","j2","_objectSpread","_unused5","_unused6","_unused7","scrollTo","_unused8","err","style","position","minHeight","overflow","children","zIndex","className","onSubmit","type","placeholder","value","onChange","target","required","onClick","checked","htmlFor","ref","display","justifyContent","marginBottom","fontSize","color","textAlign","to"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/Login.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport './Auth.css';\r\nimport './UniverseBg.css';\r\nimport UniverseBg from './UniverseBg';\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const googleBtnRef = useRef(null);\r\n\r\n  // Initialize Google One Tap / button\r\n  useEffect(() => {\r\n    const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || window.GOOGLE_CLIENT_ID;\r\n    if (!clientId) return; // not configured\r\n    const init = () => {\r\n      if (!window.google || !window.google.accounts || !googleBtnRef.current) return;\r\n      try {\r\n        window.google.accounts.id.initialize({\r\n          client_id: clientId,\r\n          callback: async (response) => {\r\n            if (!response || !response.credential) return;\r\n            setError('');\r\n            setMessage('Đang xác thực Google...');\r\n            try {\r\n              const r = await fetch('/api/auth/google', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ credential: response.credential })\r\n              });\r\n              const data = await r.json();\r\n              if (!r.ok) throw new Error(data.message || 'Đăng nhập Google thất bại');\r\n              setMessage(data.message || 'Đăng nhập thành công');\r\n              if (data.user) {\r\n                try {\r\n                  localStorage.setItem('hmsUser', JSON.stringify(data.user));\r\n                  window.dispatchEvent(new Event('hms-auth-change'));\r\n                } catch {}\r\n              }\r\n              // redirect\r\n              navigate('/');\r\n            } catch (e) {\r\n              setError(e.message);\r\n              setMessage('');\r\n            }\r\n          },\r\n          auto_select: false,\r\n          cancel_on_tap_outside: true\r\n        });\r\n        window.google.accounts.id.renderButton(googleBtnRef.current, { theme: 'outline', size: 'large', width: 320 });\r\n      } catch (e) { /* ignore */ }\r\n    };\r\n    // Wait for script\r\n    if (window.google) init();\r\n    else {\r\n      const id = setTimeout(init, 500);\r\n      return () => clearTimeout(id);\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Helpers for per-email remembered passwords\r\n  const getCredMap = () => {\r\n    try {\r\n      const raw = localStorage.getItem('hmsCredMap');\r\n      return raw ? JSON.parse(raw) : {};\r\n    } catch {\r\n      return {};\r\n    }\r\n  };\r\n\r\n  const saveCredMap = (map) => {\r\n    try {\r\n      localStorage.setItem('hmsCredMap', JSON.stringify(map));\r\n    } catch {}\r\n  };\r\n\r\n  // One-time migration from old single-credential storage to map\r\n  useEffect(() => {\r\n    try {\r\n      const remember = localStorage.getItem('hmsRemember');\r\n      const credsRaw = localStorage.getItem('hmsCreds');\r\n      if (remember === '1' && credsRaw) {\r\n        const prev = JSON.parse(credsRaw);\r\n        const key = (prev.email || '').trim().toLowerCase();\r\n        if (key) {\r\n          const map = getCredMap();\r\n          map[key] = prev.password || '';\r\n          saveCredMap(map);\r\n        }\r\n      }\r\n      localStorage.removeItem('hmsRemember');\r\n      localStorage.removeItem('hmsCreds');\r\n    } catch {}\r\n  }, []);\r\n\r\n  // When email changes, auto-fill password if we have it saved for that email\r\n  const handleEmailChange = (val) => {\r\n    setEmail(val);\r\n    const key = (val || '').trim().toLowerCase();\r\n    const map = getCredMap();\r\n    if (key && Object.prototype.hasOwnProperty.call(map, key)) {\r\n      setPassword(map[key] || '');\r\n      setRememberMe(true);\r\n    } else {\r\n      // Clear password when switching to an email we don't recognize\r\n      setPassword('');\r\n      setRememberMe(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setMessage('');\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.message || 'Đăng nhập thất bại');\r\n      setMessage(data.message);\r\n      // Lưu thông tin người dùng để hiện tên ở user menu\r\n      if (data.user) {\r\n        try {\r\n          let user = data.user;\r\n          // If avatar missing, try to fetch profile for avatar enrichment\r\n          if (!user.avatar && user.email) {\r\n            try {\r\n              const res2 = await fetch(`/api/users/profile?email=${encodeURIComponent(user.email)}&_=${Date.now()}`);\r\n              if (res2.ok) {\r\n                const j2 = await res2.json();\r\n                if (j2 && j2.user && j2.user.avatar) user = { ...user, avatar: j2.user.avatar };\r\n              }\r\n            } catch {}\r\n          }\r\n          localStorage.setItem('hmsUser', JSON.stringify(user));\r\n          // Thông báo cho các component khác (cùng tab) cập nhật\r\n          window.dispatchEvent(new Event('hms-auth-change'));\r\n        } catch {}\r\n      }\r\n      // Xử lý Nhớ mật khẩu theo email: chỉ lưu/ghi đè khi được tick\r\n      try {\r\n        const key = (email || '').trim().toLowerCase();\r\n        if (key) {\r\n          const map = getCredMap();\r\n          if (rememberMe) map[key] = password; // không xóa nếu unchecked\r\n          saveCredMap(map);\r\n        }\r\n      } catch {}\r\n      // Xóa dữ liệu trong input sau khi đăng nhập thành công\r\n      setEmail('');\r\n      setPassword('');\r\n      // Chuyển tới trang HomePage\r\n      navigate('/');\r\n      try { setTimeout(() => window.scrollTo(0, 0), 0); } catch {}\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{position:'relative', minHeight:'100vh', overflow:'hidden'}}>\r\n      <UniverseBg />\r\n      <div style={{position:'relative', zIndex:1}}>\r\n        <div className=\"auth-container\">\r\n          <div className=\"snake-border-top\"></div>\r\n          <div className=\"snake-border-bottom\"></div>\r\n          <h2>ĐĂNG NHẬP</h2>\r\n          <form onSubmit={handleSubmit}>\r\n            <label>Email</label>\r\n            <input type=\"email\" placeholder=\"Nhập địa chỉ email\" value={email} onChange={e => handleEmailChange(e.target.value)} required />\r\n            <label>Mật khẩu</label>\r\n            <div className=\"password-field\">\r\n              <input type={showPassword ? 'text' : 'password'} placeholder=\"Mật khẩu\" value={password} onChange={e => setPassword(e.target.value)} required />\r\n              <span className=\"toggle-password\" onClick={() => setShowPassword(!showPassword)}>\r\n                {showPassword ? 'Ẩn' : 'Hiện'}\r\n              </span>\r\n            </div>\r\n            <div className=\"auth-remember\">\r\n              <input\r\n                id=\"rememberMe\"\r\n                type=\"checkbox\"\r\n                checked={rememberMe}\r\n                onChange={(e) => setRememberMe(e.target.checked)}\r\n              />\r\n              <label htmlFor=\"rememberMe\" className=\"auth-remember-label\">Nhớ mật khẩu</label>\r\n            </div>\r\n            <button className=\"btn-primary\" type=\"submit\">Tiếp</button>\r\n          </form>\r\n          {error && <div className=\"error-msg\">{error}</div>}\r\n          {message && <div className=\"success-msg\">{message}</div>}\r\n          <div className=\"or\">hoặc tiếp tục với</div>\r\n          <div ref={googleBtnRef} style={{ display: 'flex', justifyContent: 'center', marginBottom: '12px' }} />\r\n          {!process.env.REACT_APP_GOOGLE_CLIENT_ID && !window.GOOGLE_CLIENT_ID && (\r\n            <div style={{fontSize:'12px',color:'#888',textAlign:'center',marginBottom:'8px'}}>\r\n              (Chưa cấu hình Google Client ID - thêm REACT_APP_GOOGLE_CLIENT_ID vào .env)\r\n            </div>\r\n          )}\r\n          <div className=\"auth-links\">\r\n            <Link className=\"auth-link\" to=\"/forgot-password\">Bạn quên mật khẩu?</Link>\r\n            <Link className=\"auth-link\" to=\"/register\">Đăng ký</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"sHAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,YAAY,CACnB,MAAO,kBAAkB,CACzB,MAAO,CAAAC,UAAU,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACf,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACiB,YAAY,CAAEC,eAAe,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAuB,YAAY,CAAGtB,MAAM,CAAC,IAAI,CAAC,CAEjC;AACAF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAyB,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,0BAA0B,EAAIC,MAAM,CAACC,gBAAgB,CAClF,GAAI,CAACL,QAAQ,CAAE,OAAQ;AACvB,KAAM,CAAAM,IAAI,CAAGA,CAAA,GAAM,CACjB,GAAI,CAACF,MAAM,CAACG,MAAM,EAAI,CAACH,MAAM,CAACG,MAAM,CAACC,QAAQ,EAAI,CAACT,YAAY,CAACU,OAAO,CAAE,OACxE,GAAI,CACFL,MAAM,CAACG,MAAM,CAACC,QAAQ,CAACE,EAAE,CAACC,UAAU,CAAC,CACnCC,SAAS,CAAEZ,QAAQ,CACnBa,QAAQ,CAAE,KAAO,CAAAC,QAAQ,EAAK,CAC5B,GAAI,CAACA,QAAQ,EAAI,CAACA,QAAQ,CAACC,UAAU,CAAE,OACvCjB,QAAQ,CAAC,EAAE,CAAC,CACZF,UAAU,CAAC,yBAAyB,CAAC,CACrC,GAAI,CACF,KAAM,CAAAoB,CAAC,CAAG,KAAM,CAAAC,KAAK,CAAC,kBAAkB,CAAE,CACxCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEP,UAAU,CAAED,QAAQ,CAACC,UAAW,CAAC,CAC1D,CAAC,CAAC,CACF,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAAP,CAAC,CAACQ,IAAI,CAAC,CAAC,CAC3B,GAAI,CAACR,CAAC,CAACS,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAACH,IAAI,CAAC5B,OAAO,EAAI,2BAA2B,CAAC,CACvEC,UAAU,CAAC2B,IAAI,CAAC5B,OAAO,EAAI,sBAAsB,CAAC,CAClD,GAAI4B,IAAI,CAACI,IAAI,CAAE,CACb,GAAI,CACFC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAER,IAAI,CAACC,SAAS,CAACC,IAAI,CAACI,IAAI,CAAC,CAAC,CAC1DvB,MAAM,CAAC0B,aAAa,CAAC,GAAI,CAAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CACpD,CAAE,MAAAC,OAAA,CAAM,CAAC,CACX,CACA;AACA9C,QAAQ,CAAC,GAAG,CAAC,CACf,CAAE,MAAO+C,CAAC,CAAE,CACVnC,QAAQ,CAACmC,CAAC,CAACtC,OAAO,CAAC,CACnBC,UAAU,CAAC,EAAE,CAAC,CAChB,CACF,CAAC,CACDsC,WAAW,CAAE,KAAK,CAClBC,qBAAqB,CAAE,IACzB,CAAC,CAAC,CACF/B,MAAM,CAACG,MAAM,CAACC,QAAQ,CAACE,EAAE,CAAC0B,YAAY,CAACrC,YAAY,CAACU,OAAO,CAAE,CAAE4B,KAAK,CAAE,SAAS,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,GAAI,CAAC,CAAC,CAC/G,CAAE,MAAON,CAAC,CAAE,CAAE,aAChB,CAAC,CACD;AACA,GAAI7B,MAAM,CAACG,MAAM,CAAED,IAAI,CAAC,CAAC,CAAC,IACrB,CACH,KAAM,CAAAI,EAAE,CAAG8B,UAAU,CAAClC,IAAI,CAAE,GAAG,CAAC,CAChC,MAAO,IAAMmC,YAAY,CAAC/B,EAAE,CAAC,CAC/B,CACF,CAAC,CAAE,CAACxB,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAAwD,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI,CACF,KAAM,CAAAC,GAAG,CAAGf,YAAY,CAACgB,OAAO,CAAC,YAAY,CAAC,CAC9C,MAAO,CAAAD,GAAG,CAAGtB,IAAI,CAACwB,KAAK,CAACF,GAAG,CAAC,CAAG,CAAC,CAAC,CACnC,CAAE,MAAAG,QAAA,CAAM,CACN,MAAO,CAAC,CAAC,CACX,CACF,CAAC,CAED,KAAM,CAAAC,WAAW,CAAIC,GAAG,EAAK,CAC3B,GAAI,CACFpB,YAAY,CAACC,OAAO,CAAC,YAAY,CAAER,IAAI,CAACC,SAAS,CAAC0B,GAAG,CAAC,CAAC,CACzD,CAAE,MAAAC,QAAA,CAAM,CAAC,CACX,CAAC,CAED;AACA1E,SAAS,CAAC,IAAM,CACd,GAAI,CACF,KAAM,CAAA2E,QAAQ,CAAGtB,YAAY,CAACgB,OAAO,CAAC,aAAa,CAAC,CACpD,KAAM,CAAAO,QAAQ,CAAGvB,YAAY,CAACgB,OAAO,CAAC,UAAU,CAAC,CACjD,GAAIM,QAAQ,GAAK,GAAG,EAAIC,QAAQ,CAAE,CAChC,KAAM,CAAAC,IAAI,CAAG/B,IAAI,CAACwB,KAAK,CAACM,QAAQ,CAAC,CACjC,KAAM,CAAAE,GAAG,CAAG,CAACD,IAAI,CAACjE,KAAK,EAAI,EAAE,EAAEmE,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACnD,GAAIF,GAAG,CAAE,CACP,KAAM,CAAAL,GAAG,CAAGN,UAAU,CAAC,CAAC,CACxBM,GAAG,CAACK,GAAG,CAAC,CAAGD,IAAI,CAAC/D,QAAQ,EAAI,EAAE,CAC9B0D,WAAW,CAACC,GAAG,CAAC,CAClB,CACF,CACApB,YAAY,CAAC4B,UAAU,CAAC,aAAa,CAAC,CACtC5B,YAAY,CAAC4B,UAAU,CAAC,UAAU,CAAC,CACrC,CAAE,MAAAC,QAAA,CAAM,CAAC,CACX,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,iBAAiB,CAAIC,GAAG,EAAK,CACjCvE,QAAQ,CAACuE,GAAG,CAAC,CACb,KAAM,CAAAN,GAAG,CAAG,CAACM,GAAG,EAAI,EAAE,EAAEL,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC5C,KAAM,CAAAP,GAAG,CAAGN,UAAU,CAAC,CAAC,CACxB,GAAIW,GAAG,EAAIO,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACf,GAAG,CAAEK,GAAG,CAAC,CAAE,CACzD/D,WAAW,CAAC0D,GAAG,CAACK,GAAG,CAAC,EAAI,EAAE,CAAC,CAC3B7D,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACL;AACAF,WAAW,CAAC,EAAE,CAAC,CACfE,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAwE,YAAY,CAAG,KAAO,CAAA/B,CAAC,EAAK,CAChCA,CAAC,CAACgC,cAAc,CAAC,CAAC,CAClBnE,QAAQ,CAAC,EAAE,CAAC,CACZF,UAAU,CAAC,EAAE,CAAC,CACd,GAAI,CACF,KAAM,CAAAsE,GAAG,CAAG,KAAM,CAAAjD,KAAK,CAAC,iCAAiC,CAAE,CACzDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEnC,KAAK,CAAEE,QAAS,CAAC,CAC1C,CAAC,CAAC,CACF,KAAM,CAAAkC,IAAI,CAAG,KAAM,CAAA2C,GAAG,CAAC1C,IAAI,CAAC,CAAC,CAC7B,GAAI,CAAC0C,GAAG,CAACzC,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAACH,IAAI,CAAC5B,OAAO,EAAI,oBAAoB,CAAC,CAClEC,UAAU,CAAC2B,IAAI,CAAC5B,OAAO,CAAC,CACxB;AACA,GAAI4B,IAAI,CAACI,IAAI,CAAE,CACb,GAAI,CACF,GAAI,CAAAA,IAAI,CAAGJ,IAAI,CAACI,IAAI,CACpB;AACA,GAAI,CAACA,IAAI,CAACwC,MAAM,EAAIxC,IAAI,CAACxC,KAAK,CAAE,CAC9B,GAAI,CACF,KAAM,CAAAiF,IAAI,CAAG,KAAM,CAAAnD,KAAK,6BAAAoD,MAAA,CAA6BC,kBAAkB,CAAC3C,IAAI,CAACxC,KAAK,CAAC,QAAAkF,MAAA,CAAME,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAAC,CACtG,GAAIJ,IAAI,CAAC3C,EAAE,CAAE,CACX,KAAM,CAAAgD,EAAE,CAAG,KAAM,CAAAL,IAAI,CAAC5C,IAAI,CAAC,CAAC,CAC5B,GAAIiD,EAAE,EAAIA,EAAE,CAAC9C,IAAI,EAAI8C,EAAE,CAAC9C,IAAI,CAACwC,MAAM,CAAExC,IAAI,CAAA+C,aAAA,CAAAA,aAAA,IAAQ/C,IAAI,MAAEwC,MAAM,CAAEM,EAAE,CAAC9C,IAAI,CAACwC,MAAM,EAAE,CACjF,CACF,CAAE,MAAAQ,QAAA,CAAM,CAAC,CACX,CACA/C,YAAY,CAACC,OAAO,CAAC,SAAS,CAAER,IAAI,CAACC,SAAS,CAACK,IAAI,CAAC,CAAC,CACrD;AACAvB,MAAM,CAAC0B,aAAa,CAAC,GAAI,CAAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CACpD,CAAE,MAAA6C,QAAA,CAAM,CAAC,CACX,CACA;AACA,GAAI,CACF,KAAM,CAAAvB,GAAG,CAAG,CAAClE,KAAK,EAAI,EAAE,EAAEmE,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9C,GAAIF,GAAG,CAAE,CACP,KAAM,CAAAL,GAAG,CAAGN,UAAU,CAAC,CAAC,CACxB,GAAInD,UAAU,CAAEyD,GAAG,CAACK,GAAG,CAAC,CAAGhE,QAAQ,CAAE;AACrC0D,WAAW,CAACC,GAAG,CAAC,CAClB,CACF,CAAE,MAAA6B,QAAA,CAAM,CAAC,CACT;AACAzF,QAAQ,CAAC,EAAE,CAAC,CACZE,WAAW,CAAC,EAAE,CAAC,CACf;AACAJ,QAAQ,CAAC,GAAG,CAAC,CACb,GAAI,CAAEsD,UAAU,CAAC,IAAMpC,MAAM,CAAC0E,QAAQ,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,CAAE,MAAAC,QAAA,CAAM,CAAC,CAC7D,CAAE,MAAOC,GAAG,CAAE,CACZlF,QAAQ,CAACkF,GAAG,CAACrF,OAAO,CAAC,CACvB,CACF,CAAC,CAED,mBACEX,KAAA,QAAKiG,KAAK,CAAE,CAACC,QAAQ,CAAC,UAAU,CAAEC,SAAS,CAAC,OAAO,CAAEC,QAAQ,CAAC,QAAQ,CAAE,CAAAC,QAAA,eACtEvG,IAAA,CAACF,UAAU,GAAE,CAAC,cACdE,IAAA,QAAKmG,KAAK,CAAE,CAACC,QAAQ,CAAC,UAAU,CAAEI,MAAM,CAAC,CAAC,CAAE,CAAAD,QAAA,cAC1CrG,KAAA,QAAKuG,SAAS,CAAC,gBAAgB,CAAAF,QAAA,eAC7BvG,IAAA,QAAKyG,SAAS,CAAC,kBAAkB,CAAM,CAAC,cACxCzG,IAAA,QAAKyG,SAAS,CAAC,qBAAqB,CAAM,CAAC,cAC3CzG,IAAA,OAAAuG,QAAA,CAAI,0BAAS,CAAI,CAAC,cAClBrG,KAAA,SAAMwG,QAAQ,CAAExB,YAAa,CAAAqB,QAAA,eAC3BvG,IAAA,UAAAuG,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBvG,IAAA,UAAO2G,IAAI,CAAC,OAAO,CAACC,WAAW,CAAC,wCAAoB,CAACC,KAAK,CAAExG,KAAM,CAACyG,QAAQ,CAAE3D,CAAC,EAAIyB,iBAAiB,CAACzB,CAAC,CAAC4D,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAAE,CAAC,cAChIhH,IAAA,UAAAuG,QAAA,CAAO,oBAAQ,CAAO,CAAC,cACvBrG,KAAA,QAAKuG,SAAS,CAAC,gBAAgB,CAAAF,QAAA,eAC7BvG,IAAA,UAAO2G,IAAI,CAAEhG,YAAY,CAAG,MAAM,CAAG,UAAW,CAACiG,WAAW,CAAC,oBAAU,CAACC,KAAK,CAAEtG,QAAS,CAACuG,QAAQ,CAAE3D,CAAC,EAAI3C,WAAW,CAAC2C,CAAC,CAAC4D,MAAM,CAACF,KAAK,CAAE,CAACG,QAAQ,MAAE,CAAC,cAChJhH,IAAA,SAAMyG,SAAS,CAAC,iBAAiB,CAACQ,OAAO,CAAEA,CAAA,GAAMrG,eAAe,CAAC,CAACD,YAAY,CAAE,CAAA4F,QAAA,CAC7E5F,YAAY,CAAG,IAAI,CAAG,MAAM,CACzB,CAAC,EACJ,CAAC,cACNT,KAAA,QAAKuG,SAAS,CAAC,eAAe,CAAAF,QAAA,eAC5BvG,IAAA,UACE4B,EAAE,CAAC,YAAY,CACf+E,IAAI,CAAC,UAAU,CACfO,OAAO,CAAEzG,UAAW,CACpBqG,QAAQ,CAAG3D,CAAC,EAAKzC,aAAa,CAACyC,CAAC,CAAC4D,MAAM,CAACG,OAAO,CAAE,CAClD,CAAC,cACFlH,IAAA,UAAOmH,OAAO,CAAC,YAAY,CAACV,SAAS,CAAC,qBAAqB,CAAAF,QAAA,CAAC,6BAAY,CAAO,CAAC,EAC7E,CAAC,cACNvG,IAAA,WAAQyG,SAAS,CAAC,aAAa,CAACE,IAAI,CAAC,QAAQ,CAAAJ,QAAA,CAAC,WAAI,CAAQ,CAAC,EACvD,CAAC,CACNxF,KAAK,eAAIf,IAAA,QAAKyG,SAAS,CAAC,WAAW,CAAAF,QAAA,CAAExF,KAAK,CAAM,CAAC,CACjDF,OAAO,eAAIb,IAAA,QAAKyG,SAAS,CAAC,aAAa,CAAAF,QAAA,CAAE1F,OAAO,CAAM,CAAC,cACxDb,IAAA,QAAKyG,SAAS,CAAC,IAAI,CAAAF,QAAA,CAAC,uCAAiB,CAAK,CAAC,cAC3CvG,IAAA,QAAKoH,GAAG,CAAEnG,YAAa,CAACkF,KAAK,CAAE,CAAEkB,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAE,CAAC,CACrG,CAACpG,OAAO,CAACC,GAAG,CAACC,0BAA0B,EAAI,CAACC,MAAM,CAACC,gBAAgB,eAClEvB,IAAA,QAAKmG,KAAK,CAAE,CAACqB,QAAQ,CAAC,MAAM,CAACC,KAAK,CAAC,MAAM,CAACC,SAAS,CAAC,QAAQ,CAACH,YAAY,CAAC,KAAK,CAAE,CAAAhB,QAAA,CAAC,gGAElF,CAAK,CACN,cACDrG,KAAA,QAAKuG,SAAS,CAAC,YAAY,CAAAF,QAAA,eACzBvG,IAAA,CAACJ,IAAI,EAAC6G,SAAS,CAAC,WAAW,CAACkB,EAAE,CAAC,kBAAkB,CAAApB,QAAA,CAAC,sCAAkB,CAAM,CAAC,cAC3EvG,IAAA,CAACJ,IAAI,EAAC6G,SAAS,CAAC,WAAW,CAACkB,EAAE,CAAC,WAAW,CAAApB,QAAA,CAAC,sBAAO,CAAM,CAAC,EACtD,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAApG,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}