{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\Profile.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport './Profile.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile({\n  isModal = false,\n  onClose\n}) {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    address: '',\n    birthDate: '',\n    country: 'Vietnam'\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [avatarUrl, setAvatarUrl] = useState('');\n  const fileRef = useRef(null);\n  const [dragging, setDragging] = useState(false);\n  const [removedAvatar, setRemovedAvatar] = useState(false);\n  const [toast, setToast] = useState('');\n  const [overTrash, setOverTrash] = useState(false);\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  // Gi·ªØ l·∫°i role hi·ªán t·∫°i ƒë·ªÉ kh√¥ng b·ªã m·∫•t khi c·∫≠p nh·∫≠t localStorage (tr√°nh m·∫•t menu theo quy·ªÅn)\n  const existingRoleRef = useRef('');\n  const toInputDate = v => {\n    if (!v) return '';\n    try {\n      if (v instanceof Date) {\n        const y = v.getFullYear();\n        const m = String(v.getMonth() + 1).padStart(2, '0');\n        const d = String(v.getDate()).padStart(2, '0');\n        return `${y}-${m}-${d}`;\n      }\n      const s = String(v).trim();\n      // If already yyyy-mm-dd\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(s)) return s;\n      // If mm/dd/yyyy\n      const md = s.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/);\n      if (md) {\n        const y = md[3];\n        const m = String(md[1]).padStart(2, '0');\n        const d = String(md[2]).padStart(2, '0');\n        return `${y}-${m}-${d}`;\n      }\n      const d = new Date(s);\n      if (!isNaN(d.getTime())) return toInputDate(d);\n    } catch {}\n    return '';\n  };\n\n  // Max DOB (>= 18 tu·ªïi)\n  const maxDobStr = useMemo(() => {\n    const now = new Date();\n    const d = new Date(now.getFullYear() - 18, now.getMonth(), now.getDate());\n    const y = d.getFullYear();\n    const m = String(d.getMonth() + 1).padStart(2, '0');\n    const da = String(d.getDate()).padStart(2, '0');\n    return `${y}-${m}-${da}`;\n  }, []);\n  useEffect(() => {\n    // Load from localStorage quickly\n    let email = '';\n    try {\n      const raw = localStorage.getItem('hmsUser');\n      const u = raw ? JSON.parse(raw) : null;\n      if (u) {\n        email = u.email || '';\n        existingRoleRef.current = u.role || existingRoleRef.current; // l∆∞u role ban ƒë·∫ßu\n        setForm(f => ({\n          ...f,\n          name: u.name || '',\n          email: u.email || '',\n          phone: u.phone || '',\n          address: u.address || '',\n          birthDate: toInputDate(u.birthDate || u.date_of_birth),\n          country: u.country || 'Vietnam'\n        }));\n        if (u.avatar) setAvatarUrl(u.avatar);\n      }\n    } catch {/* ignore */}\n\n    // Then fetch latest from DB\n    const fetchDb = async () => {\n      if (!email) return;\n      try {\n        const res = await fetch(`/api/users/profile?email=${encodeURIComponent(email)}`);\n        if (!res.ok) return; // keep local values if not found\n        const j = await res.json();\n        const u = j.user || {};\n        setForm(f => ({\n          ...f,\n          name: u.name || f.name,\n          email: u.email || f.email,\n          phone: u.phone || f.phone,\n          address: u.address || f.address,\n          birthDate: toInputDate(u.date_of_birth) || f.birthDate,\n          country: u.country || f.country\n        }));\n        if (u.avatar) setAvatarUrl(u.avatar);\n        // Sync localStorage\n        const next = {\n          name: u.name || '',\n          email: u.email || email,\n          phone: u.phone || '',\n          address: u.address || '',\n          birthDate: toInputDate(u.date_of_birth) || '',\n          country: u.country || 'Vietnam',\n          avatar: u.avatar || '',\n          role: u.role || existingRoleRef.current || '' // gi·ªØ l·∫°i role\n        };\n        try {\n          localStorage.setItem('hmsUser', JSON.stringify(next));\n        } catch {}\n      } catch {/* ignore fetch errors */}\n    };\n    fetchDb();\n  }, []);\n  const update = k => e => setForm(f => ({\n    ...f,\n    [k]: e.target.value\n  }));\n  const onSubmit = async e => {\n    var _form$name, _form$email;\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!((_form$name = form.name) !== null && _form$name !== void 0 && _form$name.trim())) {\n      setError('Vui l√≤ng nh·∫≠p h·ªç v√† t√™n');\n      return;\n    }\n    if (!((_form$email = form.email) !== null && _form$email !== void 0 && _form$email.trim())) {\n      setError('Thi·∫øu email');\n      return;\n    }\n    // Validate age >= 18\n    if (form.birthDate) {\n      const bd = new Date(form.birthDate);\n      if (!isNaN(bd.getTime())) {\n        const now = new Date();\n        const age = now.getFullYear() - bd.getFullYear() - (now.getMonth() < bd.getMonth() || now.getMonth() === bd.getMonth() && now.getDate() < bd.getDate() ? 1 : 0);\n        if (age < 18) {\n          setError('Ng√†y sinh kh√¥ng h·ª£p l·ªá: ph·∫£i ƒë·ªß 18 tu·ªïi tr·ªü l√™n');\n          return;\n        }\n      }\n    }\n    const ok = window.confirm('B·∫°n c√≥ ch·∫Øc mu·ªën c·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n?');\n    if (!ok) return;\n    try {\n      var _form$phone, _form$address, _j$user$name, _j$user, _j$user$email, _j$user2, _j$user$phone, _j$user3, _form$phone2, _j$user$address, _j$user4, _form$address2, _j$user$date_of_birth, _j$user5, _j$user$country, _j$user6, _j$user$avatar, _j$user7, _j$user$role, _j$user8;\n      const fd = new FormData();\n      fd.append('email', form.email.trim());\n      fd.append('originalEmail', form.email.trim());\n      fd.append('name', form.name.trim());\n      fd.append('phone', ((_form$phone = form.phone) === null || _form$phone === void 0 ? void 0 : _form$phone.trim()) || '');\n      fd.append('address', ((_form$address = form.address) === null || _form$address === void 0 ? void 0 : _form$address.trim()) || '');\n      fd.append('birthDate', form.birthDate || '');\n      fd.append('country', form.country || '');\n      if (avatarFile) fd.append('avatar', avatarFile);\n      if (removedAvatar && !avatarFile) fd.append('removeAvatar', '1');\n      const res = await fetch('/api/users/profile', {\n        method: 'PUT',\n        body: fd\n      });\n      if (!res.ok) {\n        const j = await res.json().catch(() => ({}));\n        throw new Error(j.message || `HTTP ${res.status}`);\n      }\n      const j = await res.json();\n      // L·∫•y role hi·ªán t·∫°i tr∆∞·ªõc khi ghi ƒë√®\n      let existingRole = existingRoleRef.current;\n      try {\n        const rawPrev = localStorage.getItem('hmsUser');\n        if (rawPrev) existingRole = JSON.parse(rawPrev).role || existingRole;\n      } catch {/* ignore */}\n      const next = {\n        name: (_j$user$name = (_j$user = j.user) === null || _j$user === void 0 ? void 0 : _j$user.name) !== null && _j$user$name !== void 0 ? _j$user$name : form.name.trim(),\n        email: (_j$user$email = (_j$user2 = j.user) === null || _j$user2 === void 0 ? void 0 : _j$user2.email) !== null && _j$user$email !== void 0 ? _j$user$email : form.email.trim(),\n        phone: ((_j$user$phone = (_j$user3 = j.user) === null || _j$user3 === void 0 ? void 0 : _j$user3.phone) !== null && _j$user$phone !== void 0 ? _j$user$phone : (_form$phone2 = form.phone) === null || _form$phone2 === void 0 ? void 0 : _form$phone2.trim()) || '',\n        address: ((_j$user$address = (_j$user4 = j.user) === null || _j$user4 === void 0 ? void 0 : _j$user4.address) !== null && _j$user$address !== void 0 ? _j$user$address : (_form$address2 = form.address) === null || _form$address2 === void 0 ? void 0 : _form$address2.trim()) || '',\n        birthDate: ((_j$user$date_of_birth = (_j$user5 = j.user) === null || _j$user5 === void 0 ? void 0 : _j$user5.date_of_birth) !== null && _j$user$date_of_birth !== void 0 ? _j$user$date_of_birth : form.birthDate) || '',\n        country: ((_j$user$country = (_j$user6 = j.user) === null || _j$user6 === void 0 ? void 0 : _j$user6.country) !== null && _j$user$country !== void 0 ? _j$user$country : form.country) || '',\n        avatar: (_j$user$avatar = (_j$user7 = j.user) === null || _j$user7 === void 0 ? void 0 : _j$user7.avatar) !== null && _j$user$avatar !== void 0 ? _j$user$avatar : avatarUrl,\n        // ƒê·∫∑t ngo·∫∑c ƒë·ªÉ tr√°nh l·ªói Babel khi k·∫øt h·ª£p ?? v√† ||\n        role: ((_j$user$role = (_j$user8 = j.user) === null || _j$user8 === void 0 ? void 0 : _j$user8.role) !== null && _j$user$role !== void 0 ? _j$user$role : existingRole) || ''\n      };\n      existingRoleRef.current = next.role || existingRoleRef.current;\n      localStorage.setItem('hmsUser', JSON.stringify(next));\n      try {\n        window.dispatchEvent(new Event('hms-auth-change'));\n      } catch {}\n      setSuccess('C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!');\n      setToast('C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng');\n      setTimeout(() => setToast(''), 2000);\n    } catch (err) {\n      setError(err.message || 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t th√¥ng tin');\n    }\n  };\n  const avatarPreview = useMemo(() => {\n    if (avatarFile) return URL.createObjectURL(avatarFile);\n    return avatarUrl || '';\n  }, [avatarFile, avatarUrl]);\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"profile-title\",\n      children: \"Th\\xF4ng Tin C\\xE1 Nh\\xE2n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-msg\",\n      role: \"alert\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-msg\",\n      role: \"status\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-avatar-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileRef,\n          type: \"file\",\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: e => {\n            const f = e.target.files && e.target.files[0];\n            if (f) setAvatarFile(f);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `profile-avatar clickable ${dragging ? 'dragging' : ''} ${overTrash ? 'drag-red' : ''}`,\n          type: \"button\",\n          draggable: true,\n          onDragStart: () => setDragging(true),\n          onDragEnd: () => {\n            setDragging(false);\n            setOverTrash(false);\n          },\n          onClick: () => fileRef.current && fileRef.current.click(),\n          title: \"Nh\\u1EA5p \\u0111\\u1EC3 ch\\u1ECDn \\u1EA3nh \\u0111\\u1EA1i di\\u1EC7n\",\n          children: avatarPreview ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatarPreview,\n            alt: \"avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-avatar-empty\",\n            children: \"\\u1EA2nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), dragging && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-trash\",\n        onDragOver: e => {\n          e.preventDefault();\n          const el = e.currentTarget;\n          el.classList.add('over');\n          setOverTrash(true);\n        },\n        onDragLeave: e => {\n          e.preventDefault();\n          e.currentTarget.classList.remove('over');\n          setOverTrash(false);\n        },\n        onDrop: e => {\n          e.preventDefault();\n          setDragging(false);\n          setAvatarFile(null);\n          setAvatarUrl('');\n          setRemovedAvatar(true);\n          e.currentTarget.classList.remove('over');\n          setOverTrash(false);\n        },\n        children: \"\\uD83D\\uDDD1\\uFE0F K\\xE9o v\\xE0o \\u0111\\xE2y \\u0111\\u1EC3 x\\xF3a \\u1EA3nh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"H\\u1ECD v\\xE0 T\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: form.name,\n        onChange: update('name'),\n        placeholder: \"Nh\\u1EADp h\\u1ECD v\\xE0 t\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        value: form.email,\n        onChange: update('email'),\n        placeholder: \"name@example.com\",\n        readOnly: true,\n        title: \"Email d\\xF9ng \\u0111\\u1EC3 \\u0111\\u1ECBnh danh; kh\\xF4ng th\\u1EC3 s\\u1EEDa t\\u1EA1i \\u0111\\xE2y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"tel\",\n        value: form.phone,\n        onChange: update('phone'),\n        placeholder: \"0901234567\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0110\\u1ECBa ch\\u1EC9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: form.address,\n        onChange: update('address'),\n        placeholder: \"S\\u1ED1 nh\\xE0, \\u0111\\u01B0\\u1EDDng, qu\\u1EADn/huy\\u1EC7n, t\\u1EC9nh/th\\xE0nh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Ng\\xE0y sinh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: form.birthDate,\n          onChange: update('birthDate'),\n          max: maxDobStr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"date-icon\",\n          onClick: () => setShowDatePicker(v => !v),\n          title: \"Ch\\u1ECDn ng\\xE0y/th\\xE1ng/n\\u0103m\",\n          \"aria-label\": \"Ch\\u1ECDn ng\\xE0y\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/icon-schedule.png\",\n            alt: \"Ch\\u1ECDn ng\\xE0y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this), showDatePicker && /*#__PURE__*/_jsxDEV(DateTriple, {\n        date: form.birthDate,\n        max: maxDobStr,\n        onApply: v => {\n          setForm(f => ({\n            ...f,\n            birthDate: v\n          }));\n          setShowDatePicker(false);\n        },\n        onClose: () => setShowDatePicker(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Qu\\u1ED1c gia\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: form.country,\n        onChange: update('country'),\n        children: ['Vietnam', 'United States', 'Japan', 'South Korea', 'China', 'Thailand', 'Singapore', 'Malaysia', 'France', 'Germany', 'United Kingdom', 'Australia'].map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c,\n          children: c\n        }, c, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-primary\",\n          style: {\n            width: 'auto',\n            minWidth: 160\n          },\n          children: \"C\\u1EADp Nh\\u1EADt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n  if (isModal) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-overlay\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      onMouseDown: e => {\n        if (e.target === e.currentTarget) onClose && onClose();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"profile-back\",\n        type: \"button\",\n        \"aria-label\": \"Quay l\\u1EA1i\",\n        onClick: () => onClose && onClose(),\n        children: \"\\u2190 Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), toast && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-toast\",\n        role: \"status\",\n        children: toast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-modal\",\n        onMouseDown: e => e.stopPropagation(),\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: content\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"Vtewzlo3xE2gIQYs07nViUywC4g=\");\n_c = Profile;\nfunction DateTriple({\n  date,\n  onApply,\n  onClose,\n  max\n}) {\n  _s2();\n  const parse = s => {\n    if (!s) return {\n      y: '',\n      m: '',\n      d: ''\n    };\n    const m = String(s).match(/^(\\d{4})-(\\d{2})-(\\d{2})$/);\n    if (!m) return {\n      y: '',\n      m: '',\n      d: ''\n    };\n    return {\n      y: m[1],\n      m: m[2],\n      d: m[3]\n    };\n  };\n  const init = parse(date);\n  const [y, setY] = useState(init.y);\n  const [m, setM] = useState(init.m);\n  const [d, setD] = useState(init.d);\n  const toDays = (yy, mm) => {\n    const year = Number(yy || 2000);\n    const month = Number(mm || 1);\n    return new Date(year, month, 0).getDate();\n  };\n  const now = new Date();\n  const maxDate = max && /^\\d{4}-\\d{2}-\\d{2}$/.test(max) ? new Date(max) : new Date(now.getFullYear() - 18, now.getMonth(), now.getDate());\n  const maxYear = maxDate.getFullYear();\n  const maxMonth = maxDate.getMonth() + 1; // 1-12\n  const maxDay = maxDate.getDate();\n  const years = Array.from({\n    length: 120\n  }, (_, i) => String(maxYear - i));\n  const allMonths = Array.from({\n    length: 12\n  }, (_, i) => String(i + 1).padStart(2, '0'));\n  const months = y && Number(y) === maxYear ? allMonths.filter(mm => Number(mm) <= maxMonth) : allMonths;\n  const candidateMaxDays = toDays(y || String(maxYear), m || '01');\n  let days = Array.from({\n    length: candidateMaxDays\n  }, (_, i) => String(i + 1).padStart(2, '0'));\n  if (y && Number(y) === maxYear && m && Number(m) === maxMonth) {\n    days = days.filter(dd => Number(dd) <= maxDay);\n  }\n  const apply = () => {\n    if (!y || !m || !d) return onClose();\n    const chosen = `${y}-${m}-${d}`;\n    // Validate 18+\n    const bd = new Date(chosen);\n    if (!isNaN(bd.getTime())) {\n      const now = new Date();\n      const age = now.getFullYear() - bd.getFullYear() - (now.getMonth() < bd.getMonth() || now.getMonth() === bd.getMonth() && now.getDate() < bd.getDate() ? 1 : 0);\n      if (age < 18) {\n        alert('Ng√†y sinh kh√¥ng h·ª£p l·ªá: Ph·∫£i ƒë·ªß 18 tu·ªïi tr·ªü l√™n');\n        return;\n      }\n    }\n    onApply(chosen);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"date-popover\",\n    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n      value: d,\n      onChange: e => setD(e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Ng\\xE0y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), days.map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: x,\n        children: x\n      }, x, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 26\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: m,\n      onChange: e => setM(e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Th\\xE1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this), months.map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: x,\n        children: x\n      }, x, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 28\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: y,\n      onChange: e => setY(e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"N\\u0103m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), years.map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: x,\n        children: x\n      }, x, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 27\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"date-apply\",\n      onClick: apply,\n      children: \"\\xC1p d\\u1EE5ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"date-cancel\",\n      onClick: onClose,\n      children: \"\\u0110\\xF3ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 409,\n    columnNumber: 5\n  }, this);\n}\n_s2(DateTriple, \"UoYEQTNKzuCyezSTUiEolWsWfzk=\");\n_c2 = DateTriple;\nvar _c, _c2;\n$RefreshReg$(_c, \"Profile\");\n$RefreshReg$(_c2, \"DateTriple\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","Profile","isModal","onClose","_s","form","setForm","name","email","phone","address","birthDate","country","error","setError","success","setSuccess","avatarFile","setAvatarFile","avatarUrl","setAvatarUrl","fileRef","dragging","setDragging","removedAvatar","setRemovedAvatar","toast","setToast","overTrash","setOverTrash","showDatePicker","setShowDatePicker","existingRoleRef","toInputDate","v","Date","y","getFullYear","m","String","getMonth","padStart","d","getDate","s","trim","test","md","match","isNaN","getTime","maxDobStr","now","da","raw","localStorage","getItem","u","JSON","parse","current","role","f","date_of_birth","avatar","fetchDb","res","fetch","encodeURIComponent","ok","j","json","user","next","setItem","stringify","update","k","e","target","value","onSubmit","_form$name","_form$email","preventDefault","bd","age","window","confirm","_form$phone","_form$address","_j$user$name","_j$user","_j$user$email","_j$user2","_j$user$phone","_j$user3","_form$phone2","_j$user$address","_j$user4","_form$address2","_j$user$date_of_birth","_j$user5","_j$user$country","_j$user6","_j$user$avatar","_j$user7","_j$user$role","_j$user8","fd","FormData","append","method","body","catch","Error","message","status","existingRole","rawPrev","dispatchEvent","Event","setTimeout","err","avatarPreview","URL","createObjectURL","content","className","children","fileName","_jsxFileName","lineNumber","columnNumber","noValidate","ref","type","accept","style","display","onChange","files","draggable","onDragStart","onDragEnd","onClick","click","title","src","alt","onDragOver","el","currentTarget","classList","add","onDragLeave","remove","onDrop","placeholder","readOnly","max","DateTriple","date","onApply","map","c","width","minWidth","onMouseDown","stopPropagation","_c","_s2","init","setY","setM","setD","toDays","yy","mm","year","Number","month","maxDate","maxYear","maxMonth","maxDay","years","Array","from","length","_","i","allMonths","months","filter","candidateMaxDays","days","dd","apply","chosen","alert","x","_c2","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/Profile.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport './Profile.css';\r\n\r\nexport default function Profile({ isModal = false, onClose }) {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    address: '',\r\n    birthDate: '',\r\n    country: 'Vietnam',\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [avatarFile, setAvatarFile] = useState(null);\r\n  const [avatarUrl, setAvatarUrl] = useState('');\r\n  const fileRef = useRef(null);\r\n  const [dragging, setDragging] = useState(false);\r\n  const [removedAvatar, setRemovedAvatar] = useState(false);\r\n  const [toast, setToast] = useState('');\r\n  const [overTrash, setOverTrash] = useState(false);\r\n  const [showDatePicker, setShowDatePicker] = useState(false);\r\n  // Gi·ªØ l·∫°i role hi·ªán t·∫°i ƒë·ªÉ kh√¥ng b·ªã m·∫•t khi c·∫≠p nh·∫≠t localStorage (tr√°nh m·∫•t menu theo quy·ªÅn)\r\n  const existingRoleRef = useRef('');\r\n\r\n  const toInputDate = (v) => {\r\n    if (!v) return '';\r\n    try {\r\n      if (v instanceof Date) {\r\n        const y = v.getFullYear();\r\n        const m = String(v.getMonth() + 1).padStart(2, '0');\r\n        const d = String(v.getDate()).padStart(2, '0');\r\n        return `${y}-${m}-${d}`;\r\n      }\r\n      const s = String(v).trim();\r\n      // If already yyyy-mm-dd\r\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(s)) return s;\r\n      // If mm/dd/yyyy\r\n      const md = s.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/);\r\n      if (md) {\r\n        const y = md[3];\r\n        const m = String(md[1]).padStart(2, '0');\r\n        const d = String(md[2]).padStart(2, '0');\r\n        return `${y}-${m}-${d}`;\r\n      }\r\n      const d = new Date(s);\r\n      if (!isNaN(d.getTime())) return toInputDate(d);\r\n    } catch {}\r\n    return '';\r\n  };\r\n\r\n  // Max DOB (>= 18 tu·ªïi)\r\n  const maxDobStr = useMemo(() => {\r\n    const now = new Date();\r\n    const d = new Date(now.getFullYear() - 18, now.getMonth(), now.getDate());\r\n    const y = d.getFullYear();\r\n    const m = String(d.getMonth() + 1).padStart(2, '0');\r\n    const da = String(d.getDate()).padStart(2, '0');\r\n    return `${y}-${m}-${da}`;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Load from localStorage quickly\r\n    let email = '';\r\n    try {\r\n      const raw = localStorage.getItem('hmsUser');\r\n      const u = raw ? JSON.parse(raw) : null;\r\n      if (u) {\r\n        email = u.email || '';\r\n        existingRoleRef.current = u.role || existingRoleRef.current; // l∆∞u role ban ƒë·∫ßu\r\n        setForm((f) => ({\r\n          ...f,\r\n          name: u.name || '',\r\n          email: u.email || '',\r\n          phone: u.phone || '',\r\n          address: u.address || '',\r\n          birthDate: toInputDate(u.birthDate || u.date_of_birth),\r\n          country: u.country || 'Vietnam',\r\n        }));\r\n        if (u.avatar) setAvatarUrl(u.avatar);\r\n      }\r\n    } catch { /* ignore */ }\r\n\r\n    // Then fetch latest from DB\r\n    const fetchDb = async () => {\r\n      if (!email) return;\r\n      try {\r\n        const res = await fetch(`/api/users/profile?email=${encodeURIComponent(email)}`);\r\n        if (!res.ok) return; // keep local values if not found\r\n        const j = await res.json();\r\n        const u = j.user || {};\r\n        setForm((f) => ({\r\n          ...f,\r\n          name: u.name || f.name,\r\n          email: u.email || f.email,\r\n          phone: u.phone || f.phone,\r\n          address: u.address || f.address,\r\n          birthDate: toInputDate(u.date_of_birth) || f.birthDate,\r\n          country: u.country || f.country,\r\n        }));\r\n        if (u.avatar) setAvatarUrl(u.avatar);\r\n        // Sync localStorage\r\n        const next = {\r\n          name: u.name || '',\r\n          email: u.email || email,\r\n          phone: u.phone || '',\r\n            address: u.address || '',\r\n          birthDate: toInputDate(u.date_of_birth) || '',\r\n          country: u.country || 'Vietnam',\r\n          avatar: u.avatar || '',\r\n          role: u.role || existingRoleRef.current || '' // gi·ªØ l·∫°i role\r\n        };\r\n        try { localStorage.setItem('hmsUser', JSON.stringify(next)); } catch {}\r\n      } catch { /* ignore fetch errors */ }\r\n    };\r\n    fetchDb();\r\n  }, []);\r\n\r\n  const update = (k) => (e) => setForm((f) => ({ ...f, [k]: e.target.value }));\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    if (!form.name?.trim()) {\r\n      setError('Vui l√≤ng nh·∫≠p h·ªç v√† t√™n');\r\n      return;\r\n    }\r\n    if (!form.email?.trim()) {\r\n      setError('Thi·∫øu email');\r\n      return;\r\n    }\r\n    // Validate age >= 18\r\n    if (form.birthDate) {\r\n      const bd = new Date(form.birthDate);\r\n      if (!isNaN(bd.getTime())) {\r\n        const now = new Date();\r\n        const age = now.getFullYear() - bd.getFullYear() - ((now.getMonth() < bd.getMonth() || (now.getMonth() === bd.getMonth() && now.getDate() < bd.getDate())) ? 1 : 0);\r\n        if (age < 18) {\r\n          setError('Ng√†y sinh kh√¥ng h·ª£p l·ªá: ph·∫£i ƒë·ªß 18 tu·ªïi tr·ªü l√™n');\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    const ok = window.confirm('B·∫°n c√≥ ch·∫Øc mu·ªën c·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n?');\r\n    if (!ok) return;\r\n    try {\r\n      const fd = new FormData();\r\n  fd.append('email', form.email.trim());\r\n  fd.append('originalEmail', form.email.trim());\r\n      fd.append('name', form.name.trim());\r\n      fd.append('phone', form.phone?.trim() || '');\r\n      fd.append('address', form.address?.trim() || '');\r\n      fd.append('birthDate', form.birthDate || '');\r\n      fd.append('country', form.country || '');\r\n  if (avatarFile) fd.append('avatar', avatarFile);\r\n  if (removedAvatar && !avatarFile) fd.append('removeAvatar', '1');\r\n\r\n      const res = await fetch('/api/users/profile', { method: 'PUT', body: fd });\r\n      if (!res.ok) {\r\n        const j = await res.json().catch(() => ({}));\r\n        throw new Error(j.message || `HTTP ${res.status}`);\r\n      }\r\n      const j = await res.json();\r\n      // L·∫•y role hi·ªán t·∫°i tr∆∞·ªõc khi ghi ƒë√®\r\n      let existingRole = existingRoleRef.current;\r\n      try {\r\n        const rawPrev = localStorage.getItem('hmsUser');\r\n        if (rawPrev) existingRole = JSON.parse(rawPrev).role || existingRole;\r\n      } catch { /* ignore */ }\r\n      const next = {\r\n        name: j.user?.name ?? form.name.trim(),\r\n        email: j.user?.email ?? form.email.trim(),\r\n        phone: (j.user?.phone ?? form.phone?.trim()) || '',\r\n        address: (j.user?.address ?? form.address?.trim()) || '',\r\n        birthDate: (j.user?.date_of_birth ?? form.birthDate) || '',\r\n        country: (j.user?.country ?? form.country) || '',\r\n        avatar: j.user?.avatar ?? avatarUrl,\r\n        // ƒê·∫∑t ngo·∫∑c ƒë·ªÉ tr√°nh l·ªói Babel khi k·∫øt h·ª£p ?? v√† ||\r\n        role: (j.user?.role ?? existingRole) || ''\r\n      };\r\n      existingRoleRef.current = next.role || existingRoleRef.current;\r\n      localStorage.setItem('hmsUser', JSON.stringify(next));\r\n      try { window.dispatchEvent(new Event('hms-auth-change')); } catch { }\r\n      setSuccess('C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!');\r\n      setToast('C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng');\r\n      setTimeout(() => setToast(''), 2000);\r\n    } catch (err) {\r\n      setError(err.message || 'Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t th√¥ng tin');\r\n    }\r\n  };\r\n\r\n  const avatarPreview = useMemo(() => {\r\n    if (avatarFile) return URL.createObjectURL(avatarFile);\r\n    return avatarUrl || '';\r\n  }, [avatarFile, avatarUrl]);\r\n\r\n  const content = (\r\n    <div className=\"profile-card\">\r\n        <h2 className=\"profile-title\">Th√¥ng Tin C√° Nh√¢n</h2>\r\n        {error && <div className=\"error-msg\" role=\"alert\">{error}</div>}\r\n        {success && <div className=\"success-msg\" role=\"status\">{success}</div>}\r\n        <form onSubmit={onSubmit} noValidate>\r\n          <div className=\"profile-avatar-row\">\r\n            <input\r\n              ref={fileRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              style={{ display: 'none' }}\r\n              onChange={(e) => {\r\n                const f = e.target.files && e.target.files[0];\r\n                if (f) setAvatarFile(f);\r\n              }}\r\n            />\r\n            <button\r\n              className={`profile-avatar clickable ${dragging ? 'dragging' : ''} ${overTrash ? 'drag-red' : ''}`}\r\n              type=\"button\"\r\n              draggable\r\n              onDragStart={() => setDragging(true)}\r\n              onDragEnd={() => { setDragging(false); setOverTrash(false); }}\r\n              onClick={() => fileRef.current && fileRef.current.click()}\r\n              title=\"Nh·∫•p ƒë·ªÉ ch·ªçn ·∫£nh ƒë·∫°i di·ªán\"\r\n            >\r\n              {avatarPreview ? (\r\n                <img src={avatarPreview} alt=\"avatar\" />\r\n              ) : (\r\n                <div className=\"profile-avatar-empty\">·∫¢nh</div>\r\n              )}\r\n            </button>\r\n          </div>\r\n          {dragging && (\r\n            <div\r\n              className=\"profile-trash\"\r\n              onDragOver={(e) => {\r\n                e.preventDefault();\r\n                const el = e.currentTarget;\r\n                el.classList.add('over');\r\n                setOverTrash(true);\r\n              }}\r\n              onDragLeave={(e) => {\r\n                e.preventDefault();\r\n                e.currentTarget.classList.remove('over');\r\n                setOverTrash(false);\r\n              }}\r\n              onDrop={(e) => {\r\n                e.preventDefault();\r\n                setDragging(false);\r\n                setAvatarFile(null);\r\n                setAvatarUrl('');\r\n                setRemovedAvatar(true);\r\n                e.currentTarget.classList.remove('over');\r\n                setOverTrash(false);\r\n              }}\r\n            >\r\n              üóëÔ∏è K√©o v√†o ƒë√¢y ƒë·ªÉ x√≥a ·∫£nh\r\n            </div>\r\n          )}\r\n\r\n          <label>H·ªç v√† T√™n</label>\r\n          <input\r\n            type=\"text\"\r\n            value={form.name}\r\n            onChange={update('name')}\r\n            placeholder=\"Nh·∫≠p h·ªç v√† t√™n\"\r\n          />\r\n\r\n          <label>Email</label>\r\n          <input\r\n            type=\"email\"\r\n            value={form.email}\r\n            onChange={update('email')}\r\n            placeholder=\"name@example.com\"\r\n            readOnly\r\n            title=\"Email d√πng ƒë·ªÉ ƒë·ªãnh danh; kh√¥ng th·ªÉ s·ª≠a t·∫°i ƒë√¢y\"\r\n          />\r\n\r\n          <label>S·ªë ƒëi·ªán tho·∫°i</label>\r\n          <input\r\n            type=\"tel\"\r\n            value={form.phone}\r\n            onChange={update('phone')}\r\n            placeholder=\"0901234567\"\r\n          />\r\n\r\n          <label>ƒê·ªãa ch·ªâ</label>\r\n          <input\r\n            type=\"text\"\r\n            value={form.address}\r\n            onChange={update('address')}\r\n            placeholder=\"S·ªë nh√†, ƒë∆∞·ªùng, qu·∫≠n/huy·ªán, t·ªânh/th√†nh\"\r\n          />\r\n\r\n          <label>Ng√†y sinh</label>\r\n          <div className=\"date-group\">\r\n            <input\r\n              type=\"date\"\r\n              value={form.birthDate}\r\n              onChange={update('birthDate')}\r\n              max={maxDobStr}\r\n            />\r\n            <button type=\"button\" className=\"date-icon\" onClick={() => setShowDatePicker((v) => !v)} title=\"Ch·ªçn ng√†y/th√°ng/nƒÉm\" aria-label=\"Ch·ªçn ng√†y\">\r\n              <img src=\"/icon-schedule.png\" alt=\"Ch·ªçn ng√†y\" />\r\n            </button>\r\n          </div>\r\n          {showDatePicker && (\r\n            <DateTriple\r\n              date={form.birthDate}\r\n              max={maxDobStr}\r\n              onApply={(v) => { setForm((f) => ({ ...f, birthDate: v })); setShowDatePicker(false); }}\r\n              onClose={() => setShowDatePicker(false)}\r\n            />\r\n          )}\r\n\r\n          <label>Qu·ªëc gia</label>\r\n          <select value={form.country} onChange={update('country')}>\r\n            {[\r\n              'Vietnam','United States','Japan','South Korea','China','Thailand','Singapore','Malaysia','France','Germany','United Kingdom','Australia'\r\n            ].map((c) => (\r\n              <option key={c} value={c}>{c}</option>\r\n            ))}\r\n          </select>\r\n\r\n          <div className=\"profile-actions\">\r\n            <button type=\"submit\" className=\"btn-primary\" style={{ width: 'auto', minWidth: 160 }}>\r\n              C·∫≠p Nh·∫≠t\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n  );\r\n\r\n  if (isModal) {\r\n    return (\r\n      <div\r\n        className=\"profile-overlay\"\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        onMouseDown={(e)=>{ if (e.target === e.currentTarget) onClose && onClose(); }}\r\n      >\r\n        <button className=\"profile-back\" type=\"button\" aria-label=\"Quay l·∫°i\" onClick={() => onClose && onClose()}>\r\n          ‚Üê Quay l·∫°i\r\n        </button>\r\n        {toast && <div className=\"profile-toast\" role=\"status\">{toast}</div>}\r\n        <div className=\"profile-modal\" onMouseDown={(e)=> e.stopPropagation()}>\r\n          {content}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      {content}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DateTriple({ date, onApply, onClose, max }) {\r\n  const parse = (s) => {\r\n    if (!s) return { y: '', m: '', d: '' };\r\n    const m = String(s).match(/^(\\d{4})-(\\d{2})-(\\d{2})$/);\r\n    if (!m) return { y: '', m: '', d: '' };\r\n    return { y: m[1], m: m[2], d: m[3] };\r\n  };\r\n  const init = parse(date);\r\n  const [y, setY] = useState(init.y);\r\n  const [m, setM] = useState(init.m);\r\n  const [d, setD] = useState(init.d);\r\n\r\n  const toDays = (yy, mm) => {\r\n    const year = Number(yy || 2000);\r\n    const month = Number(mm || 1);\r\n    return new Date(year, month, 0).getDate();\r\n  };\r\n  const now = new Date();\r\n  const maxDate = max && /^\\d{4}-\\d{2}-\\d{2}$/.test(max) ? new Date(max) : new Date(now.getFullYear() - 18, now.getMonth(), now.getDate());\r\n  const maxYear = maxDate.getFullYear();\r\n  const maxMonth = maxDate.getMonth() + 1; // 1-12\r\n  const maxDay = maxDate.getDate();\r\n\r\n  const years = Array.from({ length: 120 }, (_, i) => String(maxYear - i));\r\n  const allMonths = Array.from({ length: 12 }, (_, i) => String(i + 1).padStart(2, '0'));\r\n  const months = (y && Number(y) === maxYear)\r\n    ? allMonths.filter((mm) => Number(mm) <= maxMonth)\r\n    : allMonths;\r\n  const candidateMaxDays = toDays(y || String(maxYear), m || '01');\r\n  let days = Array.from({ length: candidateMaxDays }, (_, i) => String(i + 1).padStart(2, '0'));\r\n  if (y && Number(y) === maxYear && m && Number(m) === maxMonth) {\r\n    days = days.filter((dd) => Number(dd) <= maxDay);\r\n  }\r\n\r\n  const apply = () => {\r\n    if (!y || !m || !d) return onClose();\r\n    const chosen = `${y}-${m}-${d}`;\r\n    // Validate 18+\r\n    const bd = new Date(chosen);\r\n    if (!isNaN(bd.getTime())) {\r\n      const now = new Date();\r\n      const age = now.getFullYear() - bd.getFullYear() - ((now.getMonth() < bd.getMonth() || (now.getMonth() === bd.getMonth() && now.getDate() < bd.getDate())) ? 1 : 0);\r\n      if (age < 18) {\r\n        alert('Ng√†y sinh kh√¥ng h·ª£p l·ªá: Ph·∫£i ƒë·ªß 18 tu·ªïi tr·ªü l√™n');\r\n        return;\r\n      }\r\n    }\r\n    onApply(chosen);\r\n  };\r\n\r\n  return (\r\n    <div className=\"date-popover\">\r\n      <select value={d} onChange={(e) => setD(e.target.value)}>\r\n        <option value=\"\">Ng√†y</option>\r\n        {days.map((x) => <option key={x} value={x}>{x}</option>)}\r\n      </select>\r\n      <select value={m} onChange={(e) => setM(e.target.value)}>\r\n        <option value=\"\">Th√°ng</option>\r\n        {months.map((x) => <option key={x} value={x}>{x}</option>)}\r\n      </select>\r\n      <select value={y} onChange={(e) => setY(e.target.value)}>\r\n        <option value=\"\">NƒÉm</option>\r\n        {years.map((x) => <option key={x} value={x}>{x}</option>)}\r\n      </select>\r\n      <button type=\"button\" className=\"date-apply\" onClick={apply}>√Åp d·ª•ng</button>\r\n      <button type=\"button\" className=\"date-cancel\" onClick={onClose}>ƒê√≥ng</button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}