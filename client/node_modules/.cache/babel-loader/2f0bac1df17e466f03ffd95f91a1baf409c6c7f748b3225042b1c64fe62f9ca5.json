{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\AdminRooms.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport './HomePage.css';\nimport { authHeaders } from './auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS_UI = ['Trống', 'Đang ở', 'Đang dọn dẹp', 'Đang bảo trì'];\nconst statusDbToUi = s => {\n  const v = String(s || '').toLowerCase();\n  if (v === 'available') return 'Trống';\n  if (v === 'occupied') return 'Đang ở';\n  if (v === 'cleaning') return 'Đang dọn dẹp';\n  if (v === 'maintenance') return 'Đang bảo trì';\n  return 'Trống';\n};\nconst statusUiToDb = s => {\n  const v = String(s || '').toLowerCase();\n  if (v.includes('trống')) return 'Available';\n  if (v.includes('đang ở')) return 'Occupied';\n  if (v.includes('dọn')) return 'Cleaning';\n  if (v.includes('bảo trì')) return 'Maintenance';\n  return 'Available';\n};\nexport default function AdminRooms({\n  isModal,\n  onClose\n}) {\n  _s();\n  const [q, setQ] = useState('');\n  const [typeId, setTypeId] = useState('');\n  const [hotelFilter, setHotelFilter] = useState('');\n  const [items, setItems] = useState([]);\n  const [totalRoomCount, setTotalRoomCount] = useState(0); // tổng số phòng (không lọc)\n  const [types, setTypes] = useState([]);\n  const [hotels, setHotels] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [newRoom, setNewRoom] = useState({\n    images: [],\n    price: '',\n    roomNumber: '',\n    status: 'Trống',\n    roomTypeId: '',\n    floor: '',\n    description: ''\n  });\n  const [newErrors, setNewErrors] = useState({});\n  // For per-room image upload\n  const roomImageInputRef = useRef(null);\n  const [activeRoomForImage, setActiveRoomForImage] = useState(null);\n  // Ảnh tạm thời (chưa upload) mỗi phòng: { [roomId]: { file, preview } }\n  const [pendingRoomImages, setPendingRoomImages] = useState({});\n  // Amenities editing state\n  const [allAmenities, setAllAmenities] = useState([]); // full amenity catalog\n  const [editAmenitiesForType, setEditAmenitiesForType] = useState(null); // roomTypeId currently editing\n  const [amenityWorking, setAmenityWorking] = useState(false);\n  const [amenityDraft, setAmenityDraft] = useState([]); // [{id,name,included}]\n\n  const fetchRooms = async (params = {}) => {\n    setLoading(true);\n    setError('');\n    try {\n      const url = new URL('/api/admin/rooms', window.location.origin);\n      if (q) url.searchParams.set('q', q);\n      if (typeId) url.searchParams.set('typeId', String(typeId));\n      if (hotelFilter) url.searchParams.set('hotelId', String(hotelFilter));\n      if (params.q !== undefined) {\n        url.searchParams.set('q', params.q);\n      }\n      if (params.typeId !== undefined) {\n        if (params.typeId) url.searchParams.set('typeId', String(params.typeId));else url.searchParams.delete('typeId');\n      }\n      if (params.hotelId !== undefined) {\n        if (params.hotelId) url.searchParams.set('hotelId', String(params.hotelId));else url.searchParams.delete('hotelId');\n      }\n      const res = await fetch(url.toString(), {\n        headers: {\n          ...authHeaders()\n        }\n      });\n      if (!res.ok) throw new Error('Không tải được danh sách phòng');\n      const j = await res.json();\n      const list = Array.isArray(j.rooms) ? j.rooms : [];\n      const mapped = list.map(r => {\n        let imgs = r.images;\n        if (typeof imgs === 'string') {\n          try {\n            const parsed = JSON.parse(imgs);\n            if (Array.isArray(parsed)) imgs = parsed;\n          } catch {/* ignore */}\n        }\n        if (!Array.isArray(imgs)) imgs = [];\n        return {\n          ...r,\n          images: imgs,\n          statusVi: statusDbToUi(r.status)\n        };\n      });\n      setItems(mapped);\n      // Cập nhật tổng số phòng (không lọc: gọi một lần không tham số nếu có filter)\n      try {\n        if (q || typeId || hotelFilter) {\n          const allRes = await fetch(new URL('/api/admin/rooms', window.location.origin), {\n            headers: {\n              ...authHeaders()\n            }\n          });\n          if (allRes.ok) {\n            const allJ = await allRes.json();\n            const allList = Array.isArray(allJ.rooms) ? allJ.rooms : [];\n            setTotalRoomCount(allList.length);\n          }\n        } else {\n          setTotalRoomCount(mapped.length);\n        }\n      } catch {}\n    } catch (e) {\n      setError(e.message || 'Lỗi tải dữ liệu');\n      setItems([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchTypes = async hotelId => {\n    try {\n      const url = new URL('/api/room-types', window.location.origin);\n      if (hotelId) url.searchParams.set('hotelId', String(hotelId));\n      const res = await fetch(url, {\n        headers: {\n          ...authHeaders()\n        }\n      });\n      if (!res.ok) throw new Error();\n      const list = await res.json();\n      setTypes(Array.isArray(list) ? list : []);\n    } catch {\n      setTypes([]);\n    }\n  };\n  const fetchHotels = async () => {\n    try {\n      const res = await fetch('/api/hotels');\n      if (!res.ok) throw new Error();\n      const list = await res.json();\n      setHotels(Array.isArray(list) ? list : []);\n    } catch {\n      setHotels([]);\n    }\n  };\n  useEffect(() => {\n    fetchHotels();\n    fetchTypes();\n    fetchRooms({\n      q: ''\n    });\n  }, []);\n  // Load amenities catalog once\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const res = await fetch('/api/admin/amenities', {\n          headers: {\n            ...authHeaders()\n          }\n        });\n        if (!res.ok) throw new Error();\n        const j = await res.json();\n        const arr = Array.isArray(j.items) ? j.items : [];\n        // Map to {id,name}\n        setAllAmenities(arr.map(a => ({\n          id: a.Id,\n          name: a.AmenityName || a.Name || ''\n        })));\n      } catch {/* ignore */}\n    };\n    load();\n  }, []);\n  const openAmenitiesEditor = roomTypeId => {\n    // find one room with that type to read its amenitiesDetailed if available\n    const room = items.find(r => r.roomTypeId === roomTypeId);\n    const detailed = room && Array.isArray(room.amenitiesDetailed) ? room.amenitiesDetailed : [];\n    // Merge with catalog for stable list\n    const mergedMap = new Map();\n    allAmenities.forEach(a => mergedMap.set(a.id, {\n      id: a.id,\n      name: a.name,\n      included: false\n    }));\n    detailed.forEach(a => mergedMap.set(a.id, {\n      id: a.id,\n      name: a.name,\n      included: !!a.included\n    }));\n    setAmenityDraft(Array.from(mergedMap.values()).sort((a, b) => a.name.localeCompare(b.name)));\n    setEditAmenitiesForType(roomTypeId);\n  };\n  const toggleAmenity = id => {\n    setAmenityDraft(prev => prev.map(a => a.id === id ? {\n      ...a,\n      included: !a.included\n    } : a));\n  };\n  const saveAmenities = async () => {\n    if (!editAmenitiesForType) return;\n    setAmenityWorking(true);\n    try {\n      const payload = {\n        amenities: amenityDraft.filter(a => a.included).map(a => ({\n          amenityId: a.id,\n          included: true\n        }))\n      };\n      const res = await fetch(`/api/admin/room-types/${editAmenitiesForType}/amenities`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeaders()\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error('Lưu tiện nghi thất bại');\n      // Refresh rooms list to reflect new summary\n      await fetchRooms({});\n      setEditAmenitiesForType(null);\n    } catch (e) {\n      alert(e.message || 'Lỗi lưu tiện nghi');\n    } finally {\n      setAmenityWorking(false);\n    }\n  };\n\n  // Live search debounce\n  const debounceRef = useRef(null);\n  useEffect(() => {\n    if (debounceRef.current) clearTimeout(debounceRef.current);\n    debounceRef.current = setTimeout(() => {\n      fetchRooms({});\n    }, 250);\n    return () => {\n      if (debounceRef.current) clearTimeout(debounceRef.current);\n    };\n  }, [q, typeId, hotelFilter]);\n  const updateField = (id, field, value) => {\n    setItems(prev => prev.map(it => it.id === id ? {\n      ...it,\n      [field]: value\n    } : it));\n  };\n  const handleSave = async it => {\n    try {\n      let imagesToPersist = it.images && it.images.length ? [...it.images] : [];\n      // Nếu có ảnh pending thì upload trước rồi thay preview\n      if (pendingRoomImages[it.id]) {\n        const {\n          file,\n          preview\n        } = pendingRoomImages[it.id];\n        const form = new FormData();\n        form.append('files', file);\n        const uploadRes = await fetch('/api/admin/rooms/upload', {\n          method: 'POST',\n          body: form,\n          headers: {\n            ...authHeaders()\n          }\n        });\n        if (!uploadRes.ok) throw new Error('Tải ảnh thất bại');\n        const uj = await uploadRes.json();\n        const upList = Array.isArray(uj.files) ? uj.files : [];\n        if (!upList.length) throw new Error('Không nhận được ảnh');\n        const realPath = upList[0];\n        if (imagesToPersist.length) {\n          if (imagesToPersist[0] === preview) {\n            imagesToPersist[0] = realPath;\n          } else {\n            imagesToPersist = [realPath, ...imagesToPersist];\n          }\n        } else {\n          imagesToPersist = [realPath];\n        }\n        // cleanup preview object URL & state\n        URL.revokeObjectURL(preview);\n        setPendingRoomImages(prev => {\n          const cp = {\n            ...prev\n          };\n          delete cp[it.id];\n          return cp;\n        });\n      }\n      // Loại bỏ mọi blob preview còn sót\n      imagesToPersist = imagesToPersist.filter(u => typeof u === 'string' && !u.startsWith('blob:'));\n      const payload = {\n        roomNumber: it.roomNumber,\n        roomTypeId: it.roomTypeId,\n        status: statusUiToDb(it.statusVi),\n        images: imagesToPersist.length ? imagesToPersist : undefined\n      };\n      const res = await fetch(`/api/admin/rooms/${it.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeaders()\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error('Lưu thất bại');\n      await fetchRooms({});\n      alert('Đã lưu phòng');\n    } catch (e) {\n      alert(e.message || 'Lỗi lưu');\n    }\n  };\n  const onSelectRoomImage = room => {\n    var _roomImageInputRef$cu;\n    setActiveRoomForImage(room);\n    (_roomImageInputRef$cu = roomImageInputRef.current) === null || _roomImageInputRef$cu === void 0 ? void 0 : _roomImageInputRef$cu.click();\n  };\n  const onRoomImageChosen = async e => {\n    const files = Array.from(e.target.files || []);\n    if (!files.length || !activeRoomForImage) return;\n    const f = files[0];\n    const preview = URL.createObjectURL(f);\n    const roomId = activeRoomForImage.id;\n    // Lưu ảnh tạm\n    setPendingRoomImages(prev => ({\n      ...prev,\n      [roomId]: {\n        file: f,\n        preview\n      }\n    }));\n    // Hiển thị ngay preview ở vị trí ảnh đầu\n    setItems(prev => prev.map(it => it.id === roomId ? {\n      ...it,\n      images: it.images && it.images.length ? [preview, ...it.images.slice(1)] : [preview]\n    } : it));\n    setActiveRoomForImage(null);\n    if (roomImageInputRef.current) roomImageInputRef.current.value = '';\n  };\n  const handleDelete = async it => {\n    if (!window.confirm('Xóa phòng này?')) return;\n    try {\n      const res = await fetch(`/api/admin/rooms/${it.id}`, {\n        method: 'DELETE',\n        headers: {\n          ...authHeaders()\n        }\n      });\n      if (!res.ok) throw new Error('Xóa thất bại');\n      await fetchRooms({});\n    } catch (e) {\n      alert(e.message || 'Lỗi xóa');\n    }\n  };\n  const selectedType = useMemo(() => {\n    const id = Number(newRoom.roomTypeId || 0);\n    return types.find(t => Number(t.id) === id) || null;\n  }, [types, newRoom.roomTypeId]);\n  const selectedHotel = useMemo(() => {\n    const hid = Number(newRoom.hotelId || 0);\n    return hotels.find(h => Number(h.id) === hid) || null;\n  }, [hotels, newRoom.hotelId]);\n  const computedErrors = useMemo(() => {\n    const e = {};\n    if (!newRoom.roomNumber || !String(newRoom.roomNumber).trim()) e.roomNumber = 'Vui lòng nhập số phòng';\n    if (!newRoom.hotelId) e.hotelId = 'Vui lòng chọn khách sạn';\n    if (!newRoom.roomTypeId) e.roomTypeId = 'Vui lòng chọn loại phòng';\n    if (!newRoom.status) e.status = 'Vui lòng chọn trạng thái';\n    if (newRoom.floor !== '' && Number.isNaN(Number(newRoom.floor))) e.floor = 'Tầng không hợp lệ';\n    return e;\n  }, [newRoom]);\n  const isFormValid = useMemo(() => Object.keys(computedErrors).length === 0, [computedErrors]);\n  const tooltipText = useMemo(() => {\n    if (isFormValid || creating) return '';\n    const msgs = [];\n    if (computedErrors.roomNumber) msgs.push(computedErrors.roomNumber);\n    if (computedErrors.roomTypeId) msgs.push(computedErrors.roomTypeId);\n    if (computedErrors.status) msgs.push(computedErrors.status);\n    return msgs.join('; ');\n  }, [computedErrors, isFormValid, creating]);\n  const handleCreate = async () => {\n    setNewErrors(computedErrors);\n    if (!isFormValid) return;\n    setCreating(true);\n    try {\n      const payload = {\n        roomNumber: String(newRoom.roomNumber).trim(),\n        roomTypeId: Number(newRoom.roomTypeId),\n        status: statusUiToDb(newRoom.status),\n        hotelId: newRoom.hotelId ? Number(newRoom.hotelId) : undefined,\n        floor: newRoom.floor !== '' ? Number(newRoom.floor) : undefined,\n        price: selectedType ? Number(selectedType.basePrice || 0) : undefined,\n        description: newRoom.description || undefined,\n        images: newRoom.images && newRoom.images.length ? newRoom.images : undefined\n      };\n      const res = await fetch('/api/admin/rooms', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeaders()\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        let msg = 'Tạo thất bại';\n        try {\n          const j = await res.json();\n          if (j !== null && j !== void 0 && j.message) msg = j.message;\n        } catch {\n          const t = await res.text();\n          if (t) msg = t;\n        }\n        throw new Error(msg);\n      }\n      setNewRoom({\n        images: [],\n        price: '',\n        roomNumber: '',\n        status: 'Trống',\n        hotelId: '',\n        roomTypeId: '',\n        floor: '',\n        description: ''\n      });\n      setNewErrors({});\n      // Reset filters and refresh list to default view\n      setQ('');\n      setTypeId('');\n      setHotelFilter('');\n      await fetchTypes();\n      await fetchRooms({\n        q: '',\n        typeId: '',\n        hotelId: ''\n      });\n      setCreating(false);\n      alert('Tạo phòng thành công');\n      setIsCreateOpen(false);\n    } catch (e) {\n      alert(e.message || 'Lỗi tạo');\n      setCreating(false);\n    }\n  };\n  const fileInputRef = useRef(null);\n  const onPickFiles = () => {\n    var _fileInputRef$current;\n    return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const onFilesSelected = async e => {\n    const files = Array.from(e.target.files || []);\n    if (!files.length) return;\n    const current = (newRoom.images || []).length;\n    const spaceLeft = Math.max(0, 5 - current);\n    if (spaceLeft <= 0) {\n      alert('Bạn chỉ có thể chọn tối đa 5 ảnh.');\n      return;\n    }\n    const pick = files.slice(0, spaceLeft);\n    const form = new FormData();\n    for (const f of pick) form.append('files', f);\n    try {\n      const res = await fetch('/api/admin/rooms/upload', {\n        method: 'POST',\n        body: form,\n        headers: {\n          ...authHeaders()\n        }\n      });\n      if (!res.ok) throw new Error('Tải ảnh thất bại');\n      const j = await res.json();\n      const list = Array.isArray(j.files) ? j.files : [];\n      setNewRoom(r => ({\n        ...r,\n        images: [...(r.images || []), ...list]\n      }));\n    } catch (err) {\n      alert(err.message || 'Lỗi tải ảnh');\n    }\n  };\n  const removeImage = idx => {\n    setNewRoom(r => ({\n      ...r,\n      images: (r.images || []).filter((_, i) => i !== idx)\n    }));\n  };\n  const statusColorClass = label => {\n    if (!label) return '';\n    if (label.includes('Trống')) return 'room-status-green';\n    if (label.includes('dọn')) return 'room-status-yellow';\n    if (label.includes('Đang ở') || label.includes('bảo trì')) return 'room-status-red';\n    return '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-rooms\",\n    style: {\n      padding: isModal ? 0 : '80px 12px 20px'\n    },\n    children: [!isModal && /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"home-header\",\n      style: {\n        position: 'sticky',\n        top: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"logo\",\n          className: \"home-header-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          className: \"home-header-title home-header-home-btn\",\n          children: \"TRANG CH\\u1EE6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ph-table\",\n      style: {\n        padding: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"home-rooms-title\",\n        style: {\n          textAlign: 'left',\n          marginTop: 0\n        },\n        children: \"Qu\\u1EA3n l\\xFD ph\\xF2ng kh\\xE1ch s\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => e.preventDefault(),\n        className: \"au-toolbar\",\n        style: {\n          gridTemplateColumns: '1fr auto auto auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"au-group\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"au-input\",\n              placeholder: \"T\\xECm ki\\u1EBFm ph\\xF2ng...\",\n              value: q,\n              onChange: e => setQ(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), totalRoomCount ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"room-count-badge\",\n              title: \"T\\u1ED5ng s\\u1ED1 ph\\xF2ng hi\\u1EC7n c\\xF3 trong h\\u1EC7 th\\u1ED1ng\",\n              children: [\"T\\u1ED5ng: \", totalRoomCount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"ph-btn ph-btn--secondary\",\n          value: hotelFilter,\n          onChange: e => {\n            const hid = e.target.value;\n            setHotelFilter(hid);\n            fetchTypes(hid || undefined);\n          },\n          style: {\n            height: 36\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"T\\u1EA5t c\\u1EA3 kh\\xE1ch s\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), hotels.map(h => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: h.id,\n            children: h.name\n          }, h.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 30\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"ph-btn ph-btn--secondary\",\n          value: typeId,\n          onChange: e => setTypeId(e.target.value),\n          style: {\n            height: 36\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"T\\u1EA5t c\\u1EA3 lo\\u1EA1i ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), types.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: t.id,\n            children: t.name\n          }, t.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ph-btn au-add-btn\",\n          type: \"button\",\n          onClick: () => {\n            setIsCreateOpen(true);\n            setNewErrors({});\n          },\n          children: \"+ Th\\xEAm ph\\xF2ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#666'\n        },\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 20\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#b42318'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 78\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-tr ph-head\",\n          style: {\n            gridTemplateColumns: '100px 120px 1.1fr 1fr 1fr 1.4fr 1fr 1.2fr'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"\\u1EA2nh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"S\\u1ED1 ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Lo\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Gi\\xE1 (VN\\u0110/\\u0111\\xEAm)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"S\\u1EE9c ch\\u1EE9a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Ti\\u1EC7n nghi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this), items.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-td\",\n          style: {\n            padding: 12,\n            color: '#666'\n          },\n          children: \"Kh\\xF4ng c\\xF3 ph\\xF2ng n\\xE0o.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 15\n        }, this) : items.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-tr\",\n          style: {\n            gridTemplateColumns: '100px 120px 1.1fr 1fr 1fr 1.4fr 1fr 1.2fr'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => onSelectRoomImage(it),\n              className: \"admin-room-thumb\",\n              title: \"B\\u1EA5m \\u0111\\u1EC3 th\\xEAm/\\u0111\\u1ED5i \\u1EA3nh\",\n              children: Array.isArray(it.images) && it.images.length ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: it.images[0],\n                alt: \"thumb\",\n                style: pendingRoomImages[it.id] ? {\n                  outline: '2px dashed #ff9800'\n                } : undefined\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"No image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              value: it.roomNumber || '',\n              onChange: e => updateField(it.id, 'roomNumber', e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: it.roomTypeId || '',\n              onChange: e => updateField(it.id, 'roomTypeId', Number(e.target.value)),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u2014\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this), types.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: t.id,\n                children: t.name\n              }, t.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 37\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: Number(it.basePrice || 0).toLocaleString('vi-VN')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: [Number(it.maxAdults || 0), \" kh\\xE1ch\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            title: it.amenities || '',\n            style: {\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              whiteSpace: 'nowrap'\n            },\n            children: [it.amenities || '—', /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"ph-btn ph-btn--secondary\",\n              style: {\n                marginLeft: 6,\n                padding: '2px 6px',\n                fontSize: 12\n              },\n              onClick: () => openAmenitiesEditor(it.roomTypeId),\n              title: \"Ch\\u1EC9nh s\\u1EEDa ti\\u1EC7n nghi c\\u1EE7a lo\\u1EA1i ph\\xF2ng\",\n              children: \"S\\u1EEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: it.statusVi,\n              onChange: e => updateField(it.id, 'statusVi', e.target.value),\n              className: statusColorClass(it.statusVi),\n              children: STATUS_UI.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: s,\n                children: s\n              }, s, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ph-btn\",\n              type: \"button\",\n              onClick: () => handleSave(it),\n              children: \"S\\u1EEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ph-btn ph-btn--secondary\",\n              type: \"button\",\n              onClick: () => handleDelete(it),\n              children: \"X\\xF3a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 17\n          }, this)]\n        }, it.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: roomImageInputRef,\n        type: \"file\",\n        accept: \"image/*\",\n        hidden: true,\n        onChange: onRoomImageChosen\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this), isCreateOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-overlay\",\n      onMouseDown: e => {\n        if (e.target === e.currentTarget) setIsCreateOpen(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-modal\",\n        onMouseDown: e => e.stopPropagation(),\n        style: {\n          width: 980,\n          maxWidth: '98%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-table\",\n          style: {\n            padding: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginTop: 0,\n              textAlign: 'center'\n            },\n            children: \"Th\\xEAm Ph\\xF2ng M\\u1EDBi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"room-create-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rc-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"H\\xECnh \\u1EA3nh ph\\xF2ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-uploader\",\n                onClick: onPickFiles,\n                children: [(newRoom.images || []).length ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-thumbs\",\n                  children: newRoom.images.map((url, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rc-thumb\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: url,\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 435,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"rc-thumb-del\",\n                      onClick: ev => {\n                        ev.stopPropagation();\n                        removeImage(idx);\n                      },\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 436,\n                      columnNumber: 29\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-empty\",\n                  children: \"B\\u1EA5m \\u0111\\u1EC3 ch\\u1ECDn \\u1EA3nh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  ref: fileInputRef,\n                  onChange: onFilesSelected,\n                  type: \"file\",\n                  accept: \"image/*\",\n                  multiple: true,\n                  hidden: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-hint\",\n                children: [(newRoom.images || []).length, \"/5 \\u1EA3nh\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Gi\\xE1 c\\u01A1 b\\u1EA3n (VND)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: selectedType ? Number(selectedType.basePrice || 0).toLocaleString('vi-VN') : '',\n                  placeholder: \"VD: 850000\",\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"S\\u1ED1 ph\\xF2ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Nh\\u1EADp s\\u1ED1 ph\\xF2ng\",\n                  className: newErrors.roomNumber ? 'au-error' : '',\n                  value: newRoom.roomNumber,\n                  onChange: e => {\n                    setNewRoom({\n                      ...newRoom,\n                      roomNumber: e.target.value\n                    });\n                    if (newErrors.roomNumber) setNewErrors({\n                      ...newErrors,\n                      roomNumber: undefined\n                    });\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this), newErrors.roomNumber ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-error\",\n                  children: newErrors.roomNumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 45\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Tr\\u1EA1ng th\\xE1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: `${newErrors.status ? 'au-error' : ''} ${statusColorClass(newRoom.status)}`,\n                  value: newRoom.status,\n                  onChange: e => {\n                    setNewRoom({\n                      ...newRoom,\n                      status: e.target.value\n                    });\n                    if (newErrors.status) setNewErrors({\n                      ...newErrors,\n                      status: undefined\n                    });\n                  },\n                  children: STATUS_UI.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: s,\n                    children: s\n                  }, s, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 43\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 21\n                }, this), newErrors.status ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-error\",\n                  children: newErrors.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 41\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rc-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Kh\\xE1ch s\\u1EA1n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: newErrors.hotelId ? 'au-error' : '',\n                  value: newRoom.hotelId || '',\n                  onChange: e => {\n                    const hid = e.target.value ? Number(e.target.value) : '';\n                    setNewRoom({\n                      ...newRoom,\n                      hotelId: hid,\n                      roomTypeId: ''\n                    });\n                    fetchTypes(hid || undefined);\n                    if (newErrors.hotelId) setNewErrors({\n                      ...newErrors,\n                      hotelId: undefined\n                    });\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"-- Ch\\u1ECDn kh\\xE1ch s\\u1EA1n --\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 23\n                  }, this), hotels.map(h => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: h.id,\n                    children: h.name\n                  }, h.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 40\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 21\n                }, this), newErrors.hotelId ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-error\",\n                  children: newErrors.hotelId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 42\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Lo\\u1EA1i ph\\xF2ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: newErrors.roomTypeId ? 'au-error' : '',\n                  value: newRoom.roomTypeId,\n                  onChange: e => {\n                    const val = e.target.value;\n                    setNewRoom({\n                      ...newRoom,\n                      roomTypeId: val ? Number(val) : ''\n                    });\n                    if (newErrors.roomTypeId) setNewErrors({\n                      ...newErrors,\n                      roomTypeId: undefined\n                    });\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"-- Ch\\u1ECDn lo\\u1EA1i ph\\xF2ng --\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 23\n                  }, this), types.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: t.id,\n                    children: t.name\n                  }, t.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 39\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 21\n                }, this), newErrors.roomTypeId ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-error\",\n                  children: newErrors.roomTypeId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 45\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"T\\u1EA7ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  placeholder: \"Nh\\u1EADp t\\u1EA7ng\",\n                  value: newRoom.floor,\n                  onChange: e => {\n                    setNewRoom({\n                      ...newRoom,\n                      floor: e.target.value\n                    });\n                    if (newErrors.floor) setNewErrors({\n                      ...newErrors,\n                      floor: undefined\n                    });\n                  },\n                  className: newErrors.floor ? 'au-error' : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 21\n                }, this), newErrors.floor ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rc-error\",\n                  children: newErrors.floor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 40\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"M\\xF4 t\\u1EA3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  rows: 3,\n                  placeholder: \"M\\xF4 t\\u1EA3 chi ti\\u1EBFt v\\u1EC1 ph\\xF2ng...\",\n                  value: newRoom.description,\n                  onChange: e => setNewRoom({\n                    ...newRoom,\n                    description: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"S\\u1ED1 ng\\u01B0\\u1EDDi l\\u1EDBn t\\u1ED1i \\u0111a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: selectedType ? selectedType.maxAdults : '',\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rc-field\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"S\\u1ED1 tr\\u1EBB em t\\u1ED1i \\u0111a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: selectedType ? selectedType.maxChildren : '',\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              display: 'flex',\n              gap: 8,\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              title: !isFormValid && !creating ? tooltipText : '',\n              style: {\n                display: 'inline-block'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ph-btn\",\n                onClick: handleCreate,\n                disabled: creating || !isFormValid,\n                type: \"button\",\n                children: creating ? 'Đang tạo...' : 'Thêm phòng'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ph-btn ph-btn--secondary\",\n              onClick: () => setIsCreateOpen(false),\n              type: \"button\",\n              children: \"H\\u1EE7y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 9\n    }, this), editAmenitiesForType && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-overlay\",\n      onMouseDown: e => {\n        if (e.target === e.currentTarget && !amenityWorking) setEditAmenitiesForType(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-modal\",\n        onMouseDown: e => e.stopPropagation(),\n        style: {\n          width: 520,\n          maxWidth: '96%',\n          maxHeight: '90vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0,\n            textAlign: 'center'\n          },\n          children: \"Ch\\u1EC9nh s\\u1EEDa ti\\u1EC7n nghi lo\\u1EA1i ph\\xF2ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 8\n          },\n          children: [amenityDraft.map(a => /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              padding: '4px 6px',\n              border: '1px solid #eee',\n              borderRadius: 6\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: !!a.included,\n              disabled: amenityWorking,\n              onChange: () => toggleAmenity(a.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                flex: 1\n              },\n              children: a.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 19\n            }, this)]\n          }, a.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 17\n          }, this)), !amenityDraft.length && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#666',\n              fontSize: 13\n            },\n            children: \"Kh\\xF4ng c\\xF3 ti\\u1EC7n nghi n\\xE0o.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            marginTop: 16,\n            justifyContent: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"ph-btn\",\n            disabled: amenityWorking,\n            onClick: saveAmenities,\n            children: amenityWorking ? 'Đang lưu...' : 'Lưu tiện nghi'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"ph-btn ph-btn--secondary\",\n            disabled: amenityWorking,\n            onClick: () => setEditAmenitiesForType(null),\n            children: \"\\u0110\\xF3ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminRooms, \"20A3Q7g2GVyx1xR5gw4k+7yoEpE=\");\n_c = AdminRooms;\nvar _c;\n$RefreshReg$(_c, \"AdminRooms\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","authHeaders","jsxDEV","_jsxDEV","STATUS_UI","statusDbToUi","s","v","String","toLowerCase","statusUiToDb","includes","AdminRooms","isModal","onClose","_s","q","setQ","typeId","setTypeId","hotelFilter","setHotelFilter","items","setItems","totalRoomCount","setTotalRoomCount","types","setTypes","hotels","setHotels","loading","setLoading","error","setError","isCreateOpen","setIsCreateOpen","creating","setCreating","newRoom","setNewRoom","images","price","roomNumber","status","roomTypeId","floor","description","newErrors","setNewErrors","roomImageInputRef","activeRoomForImage","setActiveRoomForImage","pendingRoomImages","setPendingRoomImages","allAmenities","setAllAmenities","editAmenitiesForType","setEditAmenitiesForType","amenityWorking","setAmenityWorking","amenityDraft","setAmenityDraft","fetchRooms","params","url","URL","window","location","origin","searchParams","set","undefined","delete","hotelId","res","fetch","toString","headers","ok","Error","j","json","list","Array","isArray","rooms","mapped","map","r","imgs","parsed","JSON","parse","statusVi","allRes","allJ","allList","length","e","message","fetchTypes","fetchHotels","load","arr","a","id","Id","name","AmenityName","Name","openAmenitiesEditor","room","find","detailed","amenitiesDetailed","mergedMap","Map","forEach","included","from","values","sort","b","localeCompare","toggleAmenity","prev","saveAmenities","payload","amenities","filter","amenityId","method","body","stringify","alert","debounceRef","current","clearTimeout","setTimeout","updateField","field","value","it","handleSave","imagesToPersist","file","preview","form","FormData","append","uploadRes","uj","upList","files","realPath","revokeObjectURL","cp","u","startsWith","onSelectRoomImage","_roomImageInputRef$cu","click","onRoomImageChosen","target","f","createObjectURL","roomId","slice","handleDelete","confirm","selectedType","Number","t","selectedHotel","hid","h","computedErrors","trim","isNaN","isFormValid","Object","keys","tooltipText","msgs","push","join","handleCreate","basePrice","msg","text","fileInputRef","onPickFiles","_fileInputRef$current","onFilesSelected","spaceLeft","Math","max","pick","err","removeImage","idx","_","i","statusColorClass","label","className","style","padding","children","position","top","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","href","textAlign","marginTop","onSubmit","preventDefault","gridTemplateColumns","display","alignItems","gap","placeholder","onChange","title","height","type","onClick","color","outline","toLocaleString","maxAdults","overflow","textOverflow","whiteSpace","marginLeft","fontSize","ref","accept","hidden","onMouseDown","currentTarget","stopPropagation","width","maxWidth","ev","multiple","disabled","val","rows","maxChildren","justifyContent","maxHeight","flexDirection","border","borderRadius","checked","flex","_c","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminRooms.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport './HomePage.css';\r\nimport { authHeaders } from './auth';\r\n\r\nconst STATUS_UI = ['Trống', 'Đang ở', 'Đang dọn dẹp', 'Đang bảo trì'];\r\nconst statusDbToUi = (s) => {\r\n  const v = String(s || '').toLowerCase();\r\n  if (v === 'available') return 'Trống';\r\n  if (v === 'occupied') return 'Đang ở';\r\n  if (v === 'cleaning') return 'Đang dọn dẹp';\r\n  if (v === 'maintenance') return 'Đang bảo trì';\r\n  return 'Trống';\r\n};\r\nconst statusUiToDb = (s) => {\r\n  const v = String(s || '').toLowerCase();\r\n  if (v.includes('trống')) return 'Available';\r\n  if (v.includes('đang ở')) return 'Occupied';\r\n  if (v.includes('dọn')) return 'Cleaning';\r\n  if (v.includes('bảo trì')) return 'Maintenance';\r\n  return 'Available';\r\n};\r\n\r\nexport default function AdminRooms({ isModal, onClose }) {\r\n  const [q, setQ] = useState('');\r\n  const [typeId, setTypeId] = useState('');\r\n  const [hotelFilter, setHotelFilter] = useState('');\r\n  const [items, setItems] = useState([]);\r\n  const [totalRoomCount, setTotalRoomCount] = useState(0); // tổng số phòng (không lọc)\r\n  const [types, setTypes] = useState([]);\r\n  const [hotels, setHotels] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n  const [creating, setCreating] = useState(false);\r\n  const [newRoom, setNewRoom] = useState({\r\n    images: [],\r\n    price: '',\r\n    roomNumber: '',\r\n    status: 'Trống',\r\n    roomTypeId: '',\r\n    floor: '',\r\n    description: ''\r\n  });\r\n  const [newErrors, setNewErrors] = useState({});\r\n  // For per-room image upload\r\n  const roomImageInputRef = useRef(null);\r\n  const [activeRoomForImage, setActiveRoomForImage] = useState(null);\r\n  // Ảnh tạm thời (chưa upload) mỗi phòng: { [roomId]: { file, preview } }\r\n  const [pendingRoomImages, setPendingRoomImages] = useState({});\r\n  // Amenities editing state\r\n  const [allAmenities, setAllAmenities] = useState([]); // full amenity catalog\r\n  const [editAmenitiesForType, setEditAmenitiesForType] = useState(null); // roomTypeId currently editing\r\n  const [amenityWorking, setAmenityWorking] = useState(false);\r\n  const [amenityDraft, setAmenityDraft] = useState([]); // [{id,name,included}]\r\n\r\n  const fetchRooms = async (params = {}) => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const url = new URL('/api/admin/rooms', window.location.origin);\r\n  if (q) url.searchParams.set('q', q);\r\n  if (typeId) url.searchParams.set('typeId', String(typeId));\r\n  if (hotelFilter) url.searchParams.set('hotelId', String(hotelFilter));\r\n      if (params.q !== undefined) { url.searchParams.set('q', params.q); }\r\n      if (params.typeId !== undefined) { if (params.typeId) url.searchParams.set('typeId', String(params.typeId)); else url.searchParams.delete('typeId'); }\r\n  if (params.hotelId !== undefined) { if (params.hotelId) url.searchParams.set('hotelId', String(params.hotelId)); else url.searchParams.delete('hotelId'); }\r\n  const res = await fetch(url.toString(), { headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Không tải được danh sách phòng');\r\n      const j = await res.json();\r\n      const list = Array.isArray(j.rooms) ? j.rooms : [];\r\n      const mapped = list.map(r => {\r\n        let imgs = r.images;\r\n        if (typeof imgs === 'string') {\r\n          try { const parsed = JSON.parse(imgs); if (Array.isArray(parsed)) imgs = parsed; } catch { /* ignore */ }\r\n        }\r\n        if (!Array.isArray(imgs)) imgs = [];\r\n        return { ...r, images: imgs, statusVi: statusDbToUi(r.status) };\r\n      });\r\n      setItems(mapped);\r\n      // Cập nhật tổng số phòng (không lọc: gọi một lần không tham số nếu có filter)\r\n      try {\r\n        if (q || typeId || hotelFilter) {\r\n          const allRes = await fetch(new URL('/api/admin/rooms', window.location.origin), { headers: { ...authHeaders() } });\r\n          if (allRes.ok) {\r\n            const allJ = await allRes.json();\r\n            const allList = Array.isArray(allJ.rooms) ? allJ.rooms : [];\r\n            setTotalRoomCount(allList.length);\r\n          }\r\n        } else {\r\n          setTotalRoomCount(mapped.length);\r\n        }\r\n      } catch {}\r\n    } catch (e) {\r\n      setError(e.message || 'Lỗi tải dữ liệu'); setItems([]);\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchTypes = async (hotelId) => {\r\n    try {\r\n      const url = new URL('/api/room-types', window.location.origin);\r\n      if (hotelId) url.searchParams.set('hotelId', String(hotelId));\r\n  const res = await fetch(url, { headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error();\r\n      const list = await res.json();\r\n      setTypes(Array.isArray(list) ? list : []);\r\n    } catch { setTypes([]); }\r\n  };\r\n  const fetchHotels = async () => {\r\n    try {\r\n  const res = await fetch('/api/hotels');\r\n      if (!res.ok) throw new Error();\r\n      const list = await res.json();\r\n      setHotels(Array.isArray(list) ? list : []);\r\n    } catch { setHotels([]); }\r\n  };\r\n\r\n  useEffect(() => { fetchHotels(); fetchTypes(); fetchRooms({ q: '' }); }, []);\r\n  // Load amenities catalog once\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      try {\r\n        const res = await fetch('/api/admin/amenities', { headers: { ...authHeaders() } });\r\n        if (!res.ok) throw new Error();\r\n        const j = await res.json();\r\n        const arr = Array.isArray(j.items) ? j.items : [];\r\n        // Map to {id,name}\r\n        setAllAmenities(arr.map(a => ({ id: a.Id, name: a.AmenityName || a.Name || '' })));\r\n      } catch { /* ignore */ }\r\n    };\r\n    load();\r\n  }, []);\r\n\r\n  const openAmenitiesEditor = (roomTypeId) => {\r\n    // find one room with that type to read its amenitiesDetailed if available\r\n    const room = items.find(r => r.roomTypeId === roomTypeId);\r\n    const detailed = room && Array.isArray(room.amenitiesDetailed) ? room.amenitiesDetailed : [];\r\n    // Merge with catalog for stable list\r\n    const mergedMap = new Map();\r\n    allAmenities.forEach(a => mergedMap.set(a.id, { id: a.id, name: a.name, included: false }));\r\n    detailed.forEach(a => mergedMap.set(a.id, { id: a.id, name: a.name, included: !!a.included }));\r\n    setAmenityDraft(Array.from(mergedMap.values()).sort((a,b)=> a.name.localeCompare(b.name)));\r\n    setEditAmenitiesForType(roomTypeId);\r\n  };\r\n\r\n  const toggleAmenity = (id) => {\r\n    setAmenityDraft(prev => prev.map(a => a.id === id ? { ...a, included: !a.included } : a));\r\n  };\r\n\r\n  const saveAmenities = async () => {\r\n    if (!editAmenitiesForType) return;\r\n    setAmenityWorking(true);\r\n    try {\r\n      const payload = { amenities: amenityDraft.filter(a => a.included).map(a => ({ amenityId: a.id, included: true })) };\r\n      const res = await fetch(`/api/admin/room-types/${editAmenitiesForType}/amenities`, { method: 'PUT', headers: { 'Content-Type': 'application/json', ...authHeaders() }, body: JSON.stringify(payload) });\r\n      if (!res.ok) throw new Error('Lưu tiện nghi thất bại');\r\n      // Refresh rooms list to reflect new summary\r\n      await fetchRooms({});\r\n      setEditAmenitiesForType(null);\r\n    } catch (e) { alert(e.message || 'Lỗi lưu tiện nghi'); }\r\n    finally { setAmenityWorking(false); }\r\n  };\r\n\r\n  // Live search debounce\r\n  const debounceRef = useRef(null);\r\n  useEffect(() => {\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(() => { fetchRooms({}); }, 250);\r\n    return () => { if (debounceRef.current) clearTimeout(debounceRef.current); };\r\n  }, [q, typeId, hotelFilter]);\r\n\r\n  const updateField = (id, field, value) => {\r\n    setItems(prev => prev.map(it => it.id === id ? { ...it, [field]: value } : it));\r\n  };\r\n\r\n  const handleSave = async (it) => {\r\n    try {\r\n      let imagesToPersist = it.images && it.images.length ? [...it.images] : [];\r\n      // Nếu có ảnh pending thì upload trước rồi thay preview\r\n      if (pendingRoomImages[it.id]) {\r\n        const { file, preview } = pendingRoomImages[it.id];\r\n        const form = new FormData();\r\n        form.append('files', file);\r\n        const uploadRes = await fetch('/api/admin/rooms/upload', { method: 'POST', body: form, headers: { ...authHeaders() } });\r\n        if (!uploadRes.ok) throw new Error('Tải ảnh thất bại');\r\n        const uj = await uploadRes.json();\r\n        const upList = Array.isArray(uj.files) ? uj.files : [];\r\n        if (!upList.length) throw new Error('Không nhận được ảnh');\r\n        const realPath = upList[0];\r\n        if (imagesToPersist.length) {\r\n          if (imagesToPersist[0] === preview) {\r\n            imagesToPersist[0] = realPath;\r\n          } else {\r\n            imagesToPersist = [realPath, ...imagesToPersist];\r\n          }\r\n        } else {\r\n          imagesToPersist = [realPath];\r\n        }\r\n        // cleanup preview object URL & state\r\n        URL.revokeObjectURL(preview);\r\n        setPendingRoomImages(prev => { const cp = { ...prev }; delete cp[it.id]; return cp; });\r\n      }\r\n      // Loại bỏ mọi blob preview còn sót\r\n      imagesToPersist = imagesToPersist.filter(u => typeof u === 'string' && !u.startsWith('blob:'));\r\n      const payload = { roomNumber: it.roomNumber, roomTypeId: it.roomTypeId, status: statusUiToDb(it.statusVi), images: imagesToPersist.length ? imagesToPersist : undefined };\r\n      const res = await fetch(`/api/admin/rooms/${it.id}`, { method: 'PUT', headers: { 'Content-Type': 'application/json', ...authHeaders() }, body: JSON.stringify(payload) });\r\n      if (!res.ok) throw new Error('Lưu thất bại');\r\n      await fetchRooms({});\r\n      alert('Đã lưu phòng');\r\n    } catch (e) { alert(e.message || 'Lỗi lưu'); }\r\n  };\r\n\r\n  const onSelectRoomImage = (room) => {\r\n    setActiveRoomForImage(room);\r\n    roomImageInputRef.current?.click();\r\n  };\r\n\r\n  const onRoomImageChosen = async (e) => {\r\n    const files = Array.from(e.target.files || []);\r\n    if (!files.length || !activeRoomForImage) return;\r\n    const f = files[0];\r\n    const preview = URL.createObjectURL(f);\r\n    const roomId = activeRoomForImage.id;\r\n    // Lưu ảnh tạm\r\n    setPendingRoomImages(prev => ({ ...prev, [roomId]: { file: f, preview } }));\r\n    // Hiển thị ngay preview ở vị trí ảnh đầu\r\n    setItems(prev => prev.map(it => it.id === roomId ? { ...it, images: it.images && it.images.length ? [preview, ...it.images.slice(1)] : [preview] } : it));\r\n    setActiveRoomForImage(null);\r\n    if (roomImageInputRef.current) roomImageInputRef.current.value = '';\r\n  };\r\n\r\n  const handleDelete = async (it) => {\r\n    if (!window.confirm('Xóa phòng này?')) return;\r\n    try {\r\n  const res = await fetch(`/api/admin/rooms/${it.id}`, { method: 'DELETE', headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Xóa thất bại');\r\n      await fetchRooms({});\r\n    } catch (e) { alert(e.message || 'Lỗi xóa'); }\r\n  };\r\n\r\n  const selectedType = useMemo(() => {\r\n    const id = Number(newRoom.roomTypeId || 0);\r\n    return types.find(t => Number(t.id) === id) || null;\r\n  }, [types, newRoom.roomTypeId]);\r\n  const selectedHotel = useMemo(() => {\r\n    const hid = Number(newRoom.hotelId || 0);\r\n    return hotels.find(h => Number(h.id) === hid) || null;\r\n  }, [hotels, newRoom.hotelId]);\r\n\r\n  const computedErrors = useMemo(() => {\r\n    const e = {};\r\n    if (!newRoom.roomNumber || !String(newRoom.roomNumber).trim()) e.roomNumber = 'Vui lòng nhập số phòng';\r\n  if (!newRoom.hotelId) e.hotelId = 'Vui lòng chọn khách sạn';\r\n  if (!newRoom.roomTypeId) e.roomTypeId = 'Vui lòng chọn loại phòng';\r\n    if (!newRoom.status) e.status = 'Vui lòng chọn trạng thái';\r\n    if (newRoom.floor !== '' && Number.isNaN(Number(newRoom.floor))) e.floor = 'Tầng không hợp lệ';\r\n    return e;\r\n  }, [newRoom]);\r\n  const isFormValid = useMemo(() => Object.keys(computedErrors).length === 0, [computedErrors]);\r\n  const tooltipText = useMemo(() => {\r\n    if (isFormValid || creating) return '';\r\n    const msgs = [];\r\n    if (computedErrors.roomNumber) msgs.push(computedErrors.roomNumber);\r\n    if (computedErrors.roomTypeId) msgs.push(computedErrors.roomTypeId);\r\n    if (computedErrors.status) msgs.push(computedErrors.status);\r\n    return msgs.join('; ');\r\n  }, [computedErrors, isFormValid, creating]);\r\n\r\n  const handleCreate = async () => {\r\n    setNewErrors(computedErrors);\r\n    if (!isFormValid) return;\r\n    setCreating(true);\r\n    try {\r\n      const payload = {\r\n        roomNumber: String(newRoom.roomNumber).trim(),\r\n        roomTypeId: Number(newRoom.roomTypeId),\r\n        status: statusUiToDb(newRoom.status),\r\n        hotelId: newRoom.hotelId ? Number(newRoom.hotelId) : undefined,\r\n        floor: newRoom.floor !== '' ? Number(newRoom.floor) : undefined,\r\n        price: selectedType ? Number(selectedType.basePrice || 0) : undefined,\r\n        description: newRoom.description || undefined,\r\n        images: newRoom.images && newRoom.images.length ? newRoom.images : undefined\r\n      };\r\n  const res = await fetch('/api/admin/rooms', { method: 'POST', headers: { 'Content-Type': 'application/json', ...authHeaders() }, body: JSON.stringify(payload) });\r\n      if (!res.ok) {\r\n        let msg = 'Tạo thất bại';\r\n        try { const j = await res.json(); if (j?.message) msg = j.message; } catch { const t = await res.text(); if (t) msg = t; }\r\n        throw new Error(msg);\r\n      }\r\n  setNewRoom({ images:[], price:'', roomNumber: '', status: 'Trống', hotelId:'', roomTypeId: '', floor:'', description:'' });\r\n  setNewErrors({});\r\n  // Reset filters and refresh list to default view\r\n  setQ('');\r\n  setTypeId('');\r\n  setHotelFilter('');\r\n  await fetchTypes();\r\n  await fetchRooms({ q: '', typeId: '', hotelId: '' });\r\n      setCreating(false);\r\n      alert('Tạo phòng thành công');\r\n      setIsCreateOpen(false);\r\n    } catch (e) { alert(e.message || 'Lỗi tạo'); setCreating(false); }\r\n  };\r\n\r\n  const fileInputRef = useRef(null);\r\n  const onPickFiles = () => fileInputRef.current?.click();\r\n  const onFilesSelected = async (e) => {\r\n    const files = Array.from(e.target.files || []);\r\n    if (!files.length) return;\r\n    const current = (newRoom.images || []).length;\r\n    const spaceLeft = Math.max(0, 5 - current);\r\n    if (spaceLeft <= 0) { alert('Bạn chỉ có thể chọn tối đa 5 ảnh.'); return; }\r\n    const pick = files.slice(0, spaceLeft);\r\n    const form = new FormData();\r\n    for (const f of pick) form.append('files', f);\r\n    try {\r\n  const res = await fetch('/api/admin/rooms/upload', { method: 'POST', body: form, headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Tải ảnh thất bại');\r\n      const j = await res.json();\r\n      const list = Array.isArray(j.files) ? j.files : [];\r\n      setNewRoom(r => ({ ...r, images: [...(r.images||[]), ...list] }));\r\n    } catch (err) { alert(err.message || 'Lỗi tải ảnh'); }\r\n  };\r\n\r\n  const removeImage = (idx) => {\r\n    setNewRoom(r => ({ ...r, images: (r.images||[]).filter((_, i) => i !== idx) }));\r\n  };\r\n\r\n  const statusColorClass = (label) => {\r\n    if (!label) return '';\r\n    if (label.includes('Trống')) return 'room-status-green';\r\n    if (label.includes('dọn')) return 'room-status-yellow';\r\n    if (label.includes('Đang ở') || label.includes('bảo trì')) return 'room-status-red';\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-rooms\" style={{ padding: isModal ? 0 : '80px 12px 20px' }}>\r\n      {!isModal && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <a href=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</a>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Quản lý phòng khách sạn</h2>\r\n        <form onSubmit={(e)=>e.preventDefault()} className=\"au-toolbar\" style={{ gridTemplateColumns: '1fr auto auto auto' }}>\r\n          <div className=\"au-group\">\r\n            <div style={{ display:'flex', alignItems:'center', gap:8 }}>\r\n              <input className=\"au-input\" placeholder=\"Tìm kiếm phòng...\" value={q} onChange={e=>setQ(e.target.value)} />\r\n              {totalRoomCount ? (\r\n                <div className=\"room-count-badge\" title=\"Tổng số phòng hiện có trong hệ thống\">\r\n                  Tổng: {totalRoomCount}\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n          <select className=\"ph-btn ph-btn--secondary\" value={hotelFilter} onChange={e=>{ const hid = e.target.value; setHotelFilter(hid); fetchTypes(hid || undefined); }} style={{ height: 36 }}>\r\n            <option value=\"\">Tất cả khách sạn</option>\r\n            {hotels.map(h => <option key={h.id} value={h.id}>{h.name}</option>)}\r\n          </select>\r\n          <select className=\"ph-btn ph-btn--secondary\" value={typeId} onChange={e=>setTypeId(e.target.value)} style={{ height: 36 }}>\r\n            <option value=\"\">Tất cả loại phòng</option>\r\n            {types.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n          </select>\r\n          <button className=\"ph-btn au-add-btn\" type=\"button\" onClick={()=>{ setIsCreateOpen(true); setNewErrors({}); }}>+ Thêm phòng</button>\r\n        </form>\r\n        {loading ? <div style={{ color:'#666' }}>Đang tải...</div> : error ? <div style={{ color:'#b42318' }}>{error}</div> : (\r\n          <div>\r\n            <div className=\"ph-tr ph-head\" style={{ gridTemplateColumns: '100px 120px 1.1fr 1fr 1fr 1.4fr 1fr 1.2fr' }}>\r\n              <div className=\"ph-td\">Ảnh</div>\r\n              <div className=\"ph-td\">Số phòng</div>\r\n              <div className=\"ph-td\">Loại</div>\r\n              <div className=\"ph-td\">Giá (VNĐ/đêm)</div>\r\n              <div className=\"ph-td\">Sức chứa</div>\r\n              <div className=\"ph-td\">Tiện nghi</div>\r\n              <div className=\"ph-td\">Trạng thái</div>\r\n              <div className=\"ph-td\">Hành động</div>\r\n            </div>\r\n            {items.length === 0 ? (\r\n              <div className=\"ph-td\" style={{ padding: 12, color: '#666' }}>Không có phòng nào.</div>\r\n            ) : items.map(it => (\r\n              <div key={it.id} className=\"ph-tr\" style={{ gridTemplateColumns: '100px 120px 1.1fr 1fr 1fr 1.4fr 1fr 1.2fr' }}>\r\n                <div className=\"ph-td\">\r\n                  <div onClick={()=>onSelectRoomImage(it)} className=\"admin-room-thumb\" title=\"Bấm để thêm/đổi ảnh\">\r\n                    {Array.isArray(it.images) && it.images.length ? (\r\n                      <img src={it.images[0]} alt=\"thumb\" style={pendingRoomImages[it.id] ? { outline: '2px dashed #ff9800' } : undefined} />\r\n                    ) : <span>No image</span>}\r\n                  </div>\r\n                </div>\r\n                <div className=\"ph-td\"><input value={it.roomNumber || ''} onChange={e=>updateField(it.id, 'roomNumber', e.target.value)} /></div>\r\n                <div className=\"ph-td\">\r\n                  <select value={it.roomTypeId || ''} onChange={e=>updateField(it.id, 'roomTypeId', Number(e.target.value))}>\r\n                    <option value=\"\">—</option>\r\n                    {types.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n                  </select>\r\n                </div>\r\n                <div className=\"ph-td\">{Number(it.basePrice || 0).toLocaleString('vi-VN')}</div>\r\n                <div className=\"ph-td\">{(Number(it.maxAdults||0))} khách</div>\r\n                <div className=\"ph-td\" title={it.amenities || ''} style={{ overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\r\n                  {it.amenities || '—'}\r\n                  <button type=\"button\" className=\"ph-btn ph-btn--secondary\" style={{ marginLeft: 6, padding: '2px 6px', fontSize: 12 }} onClick={()=>openAmenitiesEditor(it.roomTypeId)} title=\"Chỉnh sửa tiện nghi của loại phòng\">\r\n                    Sửa\r\n                  </button>\r\n                </div>\r\n                <div className=\"ph-td\">\r\n                  <select value={it.statusVi} onChange={e=>updateField(it.id, 'statusVi', e.target.value)} className={statusColorClass(it.statusVi)}>\r\n                    {STATUS_UI.map(s => <option key={s} value={s}>{s}</option>)}\r\n                  </select>\r\n                </div>\r\n                <div className=\"ph-td\">\r\n                  <button className=\"ph-btn\" type=\"button\" onClick={()=>handleSave(it)}>Sửa</button>\r\n                  <button className=\"ph-btn ph-btn--secondary\" type=\"button\" onClick={()=>handleDelete(it)}>Xóa</button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n        {/* Hidden input for per-room image selection */}\r\n        <input ref={roomImageInputRef} type=\"file\" accept=\"image/*\" hidden onChange={onRoomImageChosen} />\r\n      </div>\r\n\r\n      {isCreateOpen && (\r\n        <div className=\"profile-overlay\" onMouseDown={(e)=>{ if (e.target===e.currentTarget) setIsCreateOpen(false); }}>\r\n          <div className=\"profile-modal\" onMouseDown={(e)=>e.stopPropagation()} style={{ width: 980, maxWidth:'98%' }}>\r\n            <div className=\"ph-table\" style={{ padding: 16 }}>\r\n              <h3 style={{ marginTop:0, textAlign:'center' }}>Thêm Phòng Mới</h3>\r\n              <div className=\"room-create-grid\">\r\n                <div className=\"rc-left\">\r\n                  <label>Hình ảnh phòng</label>\r\n                  <div className=\"rc-uploader\" onClick={onPickFiles}>\r\n                    {(newRoom.images||[]).length ? (\r\n                      <div className=\"rc-thumbs\">\r\n                        {newRoom.images.map((url, idx) => (\r\n                          <div key={idx} className=\"rc-thumb\">\r\n                            <img src={url} alt=\"\" />\r\n                            <button type=\"button\" className=\"rc-thumb-del\" onClick={(ev)=>{ev.stopPropagation(); removeImage(idx);}}>×</button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    ) : <div className=\"rc-empty\">Bấm để chọn ảnh</div>}\r\n                    <input ref={fileInputRef} onChange={onFilesSelected} type=\"file\" accept=\"image/*\" multiple hidden />\r\n                  </div>\r\n                  <div className=\"rc-hint\">{(newRoom.images||[]).length}/5 ảnh</div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Giá cơ bản (VND)</label>\r\n                    <input value={selectedType ? Number(selectedType.basePrice||0).toLocaleString('vi-VN') : ''} placeholder=\"VD: 850000\" disabled />\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Số phòng</label>\r\n                    <input placeholder=\"Nhập số phòng\" className={newErrors.roomNumber ? 'au-error' : ''} value={newRoom.roomNumber} onChange={e=>{ setNewRoom({...newRoom, roomNumber:e.target.value}); if (newErrors.roomNumber) setNewErrors({...newErrors, roomNumber: undefined}); }} />\r\n                    {newErrors.roomNumber ? <div className=\"rc-error\">{newErrors.roomNumber}</div> : null}\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Trạng thái</label>\r\n                    <select className={`${newErrors.status ? 'au-error' : ''} ${statusColorClass(newRoom.status)}`} value={newRoom.status} onChange={e=>{ setNewRoom({...newRoom, status:e.target.value}); if (newErrors.status) setNewErrors({...newErrors, status: undefined}); }}>\r\n                      {STATUS_UI.map(s => <option key={s} value={s}>{s}</option>)}\r\n                    </select>\r\n                    {newErrors.status ? <div className=\"rc-error\">{newErrors.status}</div> : null}\r\n                  </div>\r\n                </div>\r\n                <div className=\"rc-right\">\r\n                  <div className=\"rc-field\">\r\n                    <label>Khách sạn</label>\r\n                    <select className={newErrors.hotelId ? 'au-error' : ''} value={newRoom.hotelId || ''} onChange={e=>{\r\n                      const hid = e.target.value ? Number(e.target.value) : '';\r\n                      setNewRoom({ ...newRoom, hotelId: hid, roomTypeId: '' });\r\n                      fetchTypes(hid || undefined);\r\n                      if (newErrors.hotelId) setNewErrors({ ...newErrors, hotelId: undefined });\r\n                    }}>\r\n                      <option value=\"\">-- Chọn khách sạn --</option>\r\n                      {hotels.map(h => <option key={h.id} value={h.id}>{h.name}</option>)}\r\n                    </select>\r\n                    {newErrors.hotelId ? <div className=\"rc-error\">{newErrors.hotelId}</div> : null}\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Loại phòng</label>\r\n                    <select className={newErrors.roomTypeId ? 'au-error' : ''} value={newRoom.roomTypeId} onChange={e=>{ const val = e.target.value; setNewRoom({...newRoom, roomTypeId: val ? Number(val) : ''}); if (newErrors.roomTypeId) setNewErrors({...newErrors, roomTypeId: undefined}); }}>\r\n                      <option value=\"\">-- Chọn loại phòng --</option>\r\n                      {types.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n                    </select>\r\n                    {newErrors.roomTypeId ? <div className=\"rc-error\">{newErrors.roomTypeId}</div> : null}\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Tầng</label>\r\n                    <input placeholder=\"Nhập tầng\" value={newRoom.floor} onChange={e=>{ setNewRoom({...newRoom, floor: e.target.value}); if (newErrors.floor) setNewErrors({...newErrors, floor: undefined}); }} className={newErrors.floor ? 'au-error' : ''} />\r\n                    {newErrors.floor ? <div className=\"rc-error\">{newErrors.floor}</div> : null}\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Mô tả</label>\r\n                    <textarea rows={3} placeholder=\"Mô tả chi tiết về phòng...\" value={newRoom.description} onChange={e=>setNewRoom({...newRoom, description:e.target.value})} />\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Số người lớn tối đa</label>\r\n                    <input value={selectedType ? selectedType.maxAdults : ''} disabled />\r\n                  </div>\r\n                  <div className=\"rc-field\">\r\n                    <label>Số trẻ em tối đa</label>\r\n                    <input value={selectedType ? selectedType.maxChildren : ''} disabled />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div style={{ marginTop:12, display:'flex', gap:8, justifyContent:'center' }}>\r\n                <span title={(!isFormValid && !creating) ? tooltipText : ''} style={{ display:'inline-block' }}>\r\n                  <button className=\"ph-btn\" onClick={handleCreate} disabled={creating || !isFormValid} type=\"button\">{creating ? 'Đang tạo...' : 'Thêm phòng'}</button>\r\n                </span>\r\n                <button className=\"ph-btn ph-btn--secondary\" onClick={()=>setIsCreateOpen(false)} type=\"button\">Hủy</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {editAmenitiesForType && (\r\n        <div className=\"profile-overlay\" onMouseDown={(e)=>{ if (e.target===e.currentTarget && !amenityWorking) setEditAmenitiesForType(null); }}>\r\n          <div className=\"profile-modal\" onMouseDown={(e)=>e.stopPropagation()} style={{ width: 520, maxWidth:'96%', maxHeight:'90vh', overflow:'auto' }}>\r\n            <h3 style={{ marginTop:0, textAlign:'center' }}>Chỉnh sửa tiện nghi loại phòng</h3>\r\n            <div style={{ display:'flex', flexDirection:'column', gap:8 }}>\r\n              {amenityDraft.map(a => (\r\n                <label key={a.id} style={{ display:'flex', alignItems:'center', gap:8, padding:'4px 6px', border:'1px solid #eee', borderRadius:6 }}>\r\n                  <input type=\"checkbox\" checked={!!a.included} disabled={amenityWorking} onChange={()=>toggleAmenity(a.id)} />\r\n                  <span style={{ flex:1 }}>{a.name}</span>\r\n                </label>\r\n              ))}\r\n              {!amenityDraft.length && <div style={{ color:'#666', fontSize:13 }}>Không có tiện nghi nào.</div>}\r\n            </div>\r\n            <div style={{ display:'flex', gap:8, marginTop:16, justifyContent:'center' }}>\r\n              <button type=\"button\" className=\"ph-btn\" disabled={amenityWorking} onClick={saveAmenities}>{amenityWorking ? 'Đang lưu...' : 'Lưu tiện nghi'}</button>\r\n              <button type=\"button\" className=\"ph-btn ph-btn--secondary\" disabled={amenityWorking} onClick={()=>setEditAmenitiesForType(null)}>Đóng</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}