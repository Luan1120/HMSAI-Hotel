{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import'./Auth.css';import MeteorBg from'./MeteorBg';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){const navigate=useNavigate();const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);const[message,setMessage]=useState('');const[error,setError]=useState('');const[googleLoading,setGoogleLoading]=useState(false);const[googleReady,setGoogleReady]=useState(false);const googleBtnRef=useRef(null);// hidden button container\nconst clickProxyRef=useRef(null);// custom styled button\n// Initialize Google Identity (hidden official button, custom proxy)\nuseEffect(()=>{const clientId=process.env.REACT_APP_GOOGLE_CLIENT_ID||window.GOOGLE_CLIENT_ID;if(!clientId)return;// not configured\nconst init=()=>{if(!window.google||!window.google.accounts||!googleBtnRef.current)return;try{window.google.accounts.id.initialize({client_id:clientId,callback:async response=>{if(!response||!response.credential)return;setError('');setGoogleLoading(true);setMessage('Đang xử lý Google...');try{const r=await fetch('/api/auth/google',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({credential:response.credential})});const data=await r.json();if(!r.ok)throw new Error(data.message||'Đăng ký Google thất bại');// Tuỳ chỉnh thông báo cho trang Đăng ký: nếu đã tồn tại hiển thị rõ ràng\nif(data.created){setMessage(data.message||'Tạo tài khoản thành công');// Chỉ tự đăng nhập và chuyển trang nếu vừa tạo mới\nif(data.user){try{localStorage.setItem('hmsUser',JSON.stringify(data.user));window.dispatchEvent(new Event('hms-auth-change'));}catch(_unused){}}navigate('/');}else{// Không tự đăng nhập nếu tài khoản đã tồn tại (trên trang Đăng ký)\nsetMessage('Tài khoản đã tồn tại. Vui lòng chuyển sang trang Đăng nhập.');}}catch(e){setError(e.message);setMessage('');}finally{setGoogleLoading(false);}},auto_select:false,cancel_on_tap_outside:true});window.google.accounts.id.renderButton(googleBtnRef.current,{theme:'outline',size:'large',width:240});// Ẩn button thật\ngoogleBtnRef.current.style.position='absolute';googleBtnRef.current.style.opacity=0;googleBtnRef.current.style.pointerEvents='none';googleBtnRef.current.style.width='0px';googleBtnRef.current.style.height='0px';setGoogleReady(true);}catch(_unused2){/* ignore */}};if(window.google)init();else{const t=setTimeout(init,500);return()=>clearTimeout(t);}},[navigate]);const handleGoogleCustomClick=()=>{const clientId=process.env.REACT_APP_GOOGLE_CLIENT_ID||window.GOOGLE_CLIENT_ID;if(!clientId){setError('Chưa cấu hình Google Client ID');return;}setError('');setMessage('Đang mở Google...');setGoogleLoading(true);try{if(window.google&&window.google.accounts&&window.google.accounts.id){window.google.accounts.id.prompt(notification=>{// notification.isNotDisplayed() -> reasons (browser blocking, third-party cookies, etc.)\ntry{if(notification&&notification.isNotDisplayed&&notification.isNotDisplayed()){const reason=notification.getNotDisplayedReason&&notification.getNotDisplayedReason();// Fallback: click hidden button\nconst btn=googleBtnRef.current&&googleBtnRef.current.querySelector('div[role=button]');if(btn)btn.click();setMessage('');setError('Không hiển thị được popup Google (reason: '+reason+'). Thử lại hoặc bật cookie bên thứ ba.');setGoogleLoading(false);}else if(notification&&notification.isSkipped&&notification.isSkipped()){setMessage('');setError('Bạn đã bỏ qua đăng nhập Google.');setGoogleLoading(false);}else if(notification&&notification.isDismissedMoment&&notification.isDismissedMoment()){setMessage('');setError('Đã đóng hộp thoại Google.');setGoogleLoading(false);}}catch(_unused3){/* ignore */}});}else if(googleBtnRef.current){const btn=googleBtnRef.current.querySelector('div[role=button]');if(btn)btn.click();}}catch(_unused4){/* ignore */}finally{// Không dừng loading ở đây vì callback thực thi sẽ dừng. Nếu prompt không hiển thị sẽ bị xử lý trong notification.\nsetTimeout(()=>{if(googleLoading){// timeout safety\nsetGoogleLoading(false);}},8000);}};const handleSubmit=async e=>{e.preventDefault();setError('');setMessage('');if(password!==confirmPassword){setError('Mật khẩu xác nhận không khớp!');return;}try{const res=await fetch('http://localhost:5000/api/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password})});const data=await res.json();if(!res.ok)throw new Error(data.message||'Đăng ký thất bại');setMessage(data.message);// Xóa dữ liệu trong các ô input sau khi đăng ký thành công\nsetName('');setEmail('');setPassword('');setConfirmPassword('');}catch(err){setError(err.message);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MeteorBg,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"snake-border-top\"}),/*#__PURE__*/_jsx(\"div\",{className:\"snake-border-bottom\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0110\\u0102NG K\\xDD\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"H\\u1ECD t\\xEAn\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"H\\u1ECD t\\xEAn\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',placeholder:\"M\\u1EADt kh\\u1EA9u\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-password\",onClick:()=>setShowPassword(!showPassword),children:showPassword?'Ẩn':'Hiện'})]}),/*#__PURE__*/_jsx(\"label\",{children:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-field\",children:[/*#__PURE__*/_jsx(\"input\",{type:showConfirmPassword?'text':'password',placeholder:\"X\\xE1c nh\\u1EADn m\\u1EADt kh\\u1EA9u\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-password\",onClick:()=>setShowConfirmPassword(!showConfirmPassword),children:showConfirmPassword?'Ẩn':'Hiện'})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",type:\"submit\",children:\"Ti\\u1EBFp t\\u1EE5c\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-msg\",children:error}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"success-msg\",children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"or\",children:\"ho\\u1EB7c ti\\u1EBFp t\\u1EE5c v\\u1EDBi\"}),googleLoading&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#eef8ff',padding:'8px',fontSize:'13px',textAlign:'center',marginBottom:'8px'},children:\"\\u0110ang ch\\u1EDD Google...\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",ref:clickProxyRef,onClick:handleGoogleCustomClick,className:\"btn-google\",style:{display:'flex',alignItems:'center',gap:'6px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/google_login.png\",alt:\"Google\"}),\" Google\"]}),/*#__PURE__*/_jsx(\"div\",{ref:googleBtnRef,\"aria-hidden\":\"true\"}),!googleReady&&(process.env.REACT_APP_GOOGLE_CLIENT_ID||window.GOOGLE_CLIENT_ID)&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#777',textAlign:'center',marginTop:'4px'},children:\"\\u0110ang t\\u1EA3i Google...\"}),!process.env.REACT_APP_GOOGLE_CLIENT_ID&&!window.GOOGLE_CLIENT_ID&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#888',textAlign:'center',marginBottom:'8px'},children:\"(Ch\\u01B0a c\\u1EA5u h\\xECnh Google Client ID - th\\xEAm REACT_APP_GOOGLE_CLIENT_ID v\\xE0o .env)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-links\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"B\\u1EA1n \\u0111\\xE3 c\\xF3 t\\xE0i kho\\u1EA3n?\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"\\u0110\\u0103ng nh\\u1EADp\"})]})]})]});}export default Register;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","MeteorBg","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","navigate","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","message","setMessage","error","setError","googleLoading","setGoogleLoading","googleReady","setGoogleReady","googleBtnRef","clickProxyRef","clientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","window","GOOGLE_CLIENT_ID","init","google","accounts","current","id","initialize","client_id","callback","response","credential","r","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","created","user","localStorage","setItem","dispatchEvent","Event","_unused","e","auto_select","cancel_on_tap_outside","renderButton","theme","size","width","style","position","opacity","pointerEvents","height","_unused2","t","setTimeout","clearTimeout","handleGoogleCustomClick","prompt","notification","isNotDisplayed","reason","getNotDisplayedReason","btn","querySelector","click","isSkipped","isDismissedMoment","_unused3","_unused4","handleSubmit","preventDefault","res","err","children","className","onSubmit","type","placeholder","value","onChange","target","required","onClick","background","padding","fontSize","textAlign","marginBottom","ref","display","alignItems","gap","cursor","src","alt","color","marginTop","to"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/Register.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport './Auth.css';\r\nimport MeteorBg from './MeteorBg';\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [googleLoading, setGoogleLoading] = useState(false);\r\n  const [googleReady, setGoogleReady] = useState(false);\r\n  const googleBtnRef = useRef(null); // hidden button container\r\n  const clickProxyRef = useRef(null); // custom styled button\r\n  // Initialize Google Identity (hidden official button, custom proxy)\r\n  useEffect(() => {\r\n    const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || window.GOOGLE_CLIENT_ID;\r\n    if (!clientId) return; // not configured\r\n    const init = () => {\r\n      if (!window.google || !window.google.accounts || !googleBtnRef.current) return;\r\n      try {\r\n        window.google.accounts.id.initialize({\r\n          client_id: clientId,\r\n          callback: async (response) => {\r\n            if (!response || !response.credential) return;\r\n            setError('');\r\n            setGoogleLoading(true);\r\n            setMessage('Đang xử lý Google...');\r\n            try {\r\n              const r = await fetch('/api/auth/google', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ credential: response.credential })\r\n              });\r\n              const data = await r.json();\r\n              if (!r.ok) throw new Error(data.message || 'Đăng ký Google thất bại');\r\n              // Tuỳ chỉnh thông báo cho trang Đăng ký: nếu đã tồn tại hiển thị rõ ràng\r\n              if (data.created) {\r\n                setMessage(data.message || 'Tạo tài khoản thành công');\r\n                // Chỉ tự đăng nhập và chuyển trang nếu vừa tạo mới\r\n                if (data.user) {\r\n                  try {\r\n                    localStorage.setItem('hmsUser', JSON.stringify(data.user));\r\n                    window.dispatchEvent(new Event('hms-auth-change'));\r\n                  } catch {}\r\n                }\r\n                navigate('/');\r\n              } else {\r\n                // Không tự đăng nhập nếu tài khoản đã tồn tại (trên trang Đăng ký)\r\n                setMessage('Tài khoản đã tồn tại. Vui lòng chuyển sang trang Đăng nhập.');\r\n              }\r\n            } catch (e) {\r\n              setError(e.message);\r\n              setMessage('');\r\n            } finally {\r\n              setGoogleLoading(false);\r\n            }\r\n          },\r\n          auto_select: false,\r\n          cancel_on_tap_outside: true\r\n        });\r\n        window.google.accounts.id.renderButton(googleBtnRef.current, { theme: 'outline', size: 'large', width: 240 });\r\n        // Ẩn button thật\r\n        googleBtnRef.current.style.position = 'absolute';\r\n        googleBtnRef.current.style.opacity = 0;\r\n        googleBtnRef.current.style.pointerEvents = 'none';\r\n        googleBtnRef.current.style.width = '0px';\r\n        googleBtnRef.current.style.height = '0px';\r\n        setGoogleReady(true);\r\n      } catch {/* ignore */}\r\n    };\r\n    if (window.google) init(); else {\r\n      const t = setTimeout(init, 500); return () => clearTimeout(t);\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleGoogleCustomClick = () => {\r\n    const clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || window.GOOGLE_CLIENT_ID;\r\n    if (!clientId) { setError('Chưa cấu hình Google Client ID'); return; }\r\n    setError('');\r\n    setMessage('Đang mở Google...');\r\n    setGoogleLoading(true);\r\n    try {\r\n      if (window.google && window.google.accounts && window.google.accounts.id) {\r\n        window.google.accounts.id.prompt((notification) => {\r\n          // notification.isNotDisplayed() -> reasons (browser blocking, third-party cookies, etc.)\r\n          try {\r\n            if (notification && notification.isNotDisplayed && notification.isNotDisplayed()) {\r\n              const reason = notification.getNotDisplayedReason && notification.getNotDisplayedReason();\r\n              // Fallback: click hidden button\r\n              const btn = googleBtnRef.current && googleBtnRef.current.querySelector('div[role=button]');\r\n              if (btn) btn.click();\r\n              setMessage('');\r\n              setError('Không hiển thị được popup Google (reason: ' + reason + '). Thử lại hoặc bật cookie bên thứ ba.');\r\n              setGoogleLoading(false);\r\n            } else if (notification && notification.isSkipped && notification.isSkipped()) {\r\n              setMessage('');\r\n              setError('Bạn đã bỏ qua đăng nhập Google.');\r\n              setGoogleLoading(false);\r\n            } else if (notification && notification.isDismissedMoment && notification.isDismissedMoment()) {\r\n              setMessage('');\r\n              setError('Đã đóng hộp thoại Google.');\r\n              setGoogleLoading(false);\r\n            }\r\n          } catch {/* ignore */}\r\n        });\r\n      } else if (googleBtnRef.current) {\r\n        const btn = googleBtnRef.current.querySelector('div[role=button]');\r\n        if (btn) btn.click();\r\n      }\r\n    } catch {/* ignore */} finally {\r\n      // Không dừng loading ở đây vì callback thực thi sẽ dừng. Nếu prompt không hiển thị sẽ bị xử lý trong notification.\r\n      setTimeout(() => {\r\n        if (googleLoading) {\r\n          // timeout safety\r\n          setGoogleLoading(false);\r\n        }\r\n      }, 8000);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setMessage('');\r\n    if (password !== confirmPassword) {\r\n      setError('Mật khẩu xác nhận không khớp!');\r\n      return;\r\n    }\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/register', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name, email, password })\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.message || 'Đăng ký thất bại');\r\n      setMessage(data.message);\r\n      // Xóa dữ liệu trong các ô input sau khi đăng ký thành công\r\n      setName('');\r\n      setEmail('');\r\n      setPassword('');\r\n      setConfirmPassword('');\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MeteorBg />\r\n      <div className=\"auth-container\">\r\n        <div className=\"snake-border-top\"></div>\r\n        <div className=\"snake-border-bottom\"></div>\r\n        <h2>ĐĂNG KÝ</h2>\r\n        <form onSubmit={handleSubmit}>\r\n        <label>Họ tên</label>\r\n        <input type=\"text\" placeholder=\"Họ tên\" value={name} onChange={e => setName(e.target.value)} required />\r\n        <label>Email</label>\r\n        <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required />\r\n        <label>Mật khẩu</label>\r\n        <div className=\"password-field\">\r\n          <input type={showPassword ? 'text' : 'password'} placeholder=\"Mật khẩu\" value={password} onChange={e => setPassword(e.target.value)} required />\r\n          <span className=\"toggle-password\" onClick={() => setShowPassword(!showPassword)}>{showPassword ? 'Ẩn' : 'Hiện'}</span>\r\n        </div>\r\n        <label>Xác nhận mật khẩu</label>\r\n        <div className=\"password-field\">\r\n          <input type={showConfirmPassword ? 'text' : 'password'} placeholder=\"Xác nhận mật khẩu\" value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} required />\r\n          <span className=\"toggle-password\" onClick={() => setShowConfirmPassword(!showConfirmPassword)}>{showConfirmPassword ? 'Ẩn' : 'Hiện'}</span>\r\n        </div>\r\n        <button className=\"btn-primary\" type=\"submit\">Tiếp tục</button>\r\n      </form>\r\n      {error && <div className=\"error-msg\">{error}</div>}\r\n      {message && <div className=\"success-msg\">{message}</div>}\r\n      <div className=\"or\">hoặc tiếp tục với</div>\r\n      {googleLoading && (\r\n        <div style={{background:'#eef8ff',padding:'8px',fontSize:'13px',textAlign:'center',marginBottom:'8px'}}>\r\n          Đang chờ Google...\r\n        </div>\r\n      )}\r\n      <button\r\n        type=\"button\"\r\n        ref={clickProxyRef}\r\n        onClick={handleGoogleCustomClick}\r\n        className=\"btn-google\"\r\n        style={{ display: 'flex', alignItems: 'center', gap: '6px', cursor: 'pointer' }}\r\n      >\r\n        <img src=\"/google_login.png\" alt=\"Google\" /> Google\r\n      </button>\r\n      <div ref={googleBtnRef} aria-hidden=\"true\" />\r\n      {!googleReady && (process.env.REACT_APP_GOOGLE_CLIENT_ID || window.GOOGLE_CLIENT_ID) && (\r\n        <div style={{fontSize:'12px',color:'#777',textAlign:'center',marginTop:'4px'}}>Đang tải Google...</div>\r\n      )}\r\n      {!process.env.REACT_APP_GOOGLE_CLIENT_ID && !window.GOOGLE_CLIENT_ID && (\r\n        <div style={{fontSize:'12px',color:'#888',textAlign:'center',marginBottom:'8px'}}>\r\n          (Chưa cấu hình Google Client ID - thêm REACT_APP_GOOGLE_CLIENT_ID vào .env)\r\n        </div>\r\n      )}\r\n      <div className=\"auth-links\">\r\n        <span>Bạn đã có tài khoản?</span>\r\n        <Link to=\"/login\">Đăng nhập</Link>\r\n      </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}