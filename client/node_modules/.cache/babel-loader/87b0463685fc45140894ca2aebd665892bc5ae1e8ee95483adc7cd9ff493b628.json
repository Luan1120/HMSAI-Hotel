{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\RoomsBrowse.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport './RoomsBrowse.css';\n\n/* Public rooms browsing page\r\n   Features:\r\n   - Filters: keyword (room number / type), hotel, room type\r\n   - Uses /api/admin/rooms for richer data if user is Admin/Staff (auth header) else falls back to room types + derived rooms not available => we attempt public-like fetch.\r\n   NOTE: Currently there is no public rooms endpoint returning individual rooms; we will call /api/admin/rooms without auth -> backend will 401.\r\n   Fallback strategy: fetch room types (/api/room-types) + display them as pseudo-room rows with aggregate info.\r\n*/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoomsBrowse({\n  inline = false,\n  onClose\n}) {\n  _s();\n  var _detailFull$price, _detailFull$images, _reviewsData$reviews, _reviewsData$reviews2;\n  // Helper to normalize image paths returned from API (may be stored without leading slash or uploads prefix)\n  const normalizeImage = p => {\n    if (!p) return null;\n    try {\n      // Already absolute (http/https/data) or starts with /uploads or /static\n      if (/^https?:\\/\\//i.test(p) || /^data:/i.test(p)) return p;\n      if (p.startsWith('/')) return p; // assume valid root-relative\n      // If filename only, prepend uploads path\n      return '/uploads/' + p.replace(/^\\/+/, '');\n    } catch {\n      return p;\n    }\n  };\n  const [q, setQ] = useState('');\n  const [hotelId, setHotelId] = useState('');\n  const [typeId, setTypeId] = useState('');\n  const [hotels, setHotels] = useState([]);\n  const [types, setTypes] = useState([]);\n  const [rooms, setRooms] = useState([]); // unified view\n  const [detail, setDetail] = useState(null); // basic selected row (list data)\n  const [detailFull, setDetailFull] = useState(null); // full fetched room detail\n  const [detailLoading, setDetailLoading] = useState(false);\n  const [reviewsModal, setReviewsModal] = useState(null); // { roomId, loading, data }\n  const [reviewsLoading, setReviewsLoading] = useState(false);\n  const [reviewsData, setReviewsData] = useState(null); // { reviews, avgRating }\n  const [reviewsError, setReviewsError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [bookingOpen, setBookingOpen] = useState(false);\n  const [bookingRoom, setBookingRoom] = useState(null);\n  const [bkCheckIn, setBkCheckIn] = useState('');\n  const [bkCheckOut, setBkCheckOut] = useState('');\n  const [bkAdults, setBkAdults] = useState(1);\n  const [bkChildren, setBkChildren] = useState(0);\n  const [bkPayMethod, setBkPayMethod] = useState('MOMO');\n  const [bkAgree, setBkAgree] = useState(false);\n  const [bkLoading, setBkLoading] = useState(false);\n  const [bkMsg, setBkMsg] = useState('');\n  // Prevent duplicate rapid submissions / re-init after success redirect\n  const [bkSubmitted, setBkSubmitted] = useState(false);\n  // Promotions removed\n  const bkFirstFieldRef = useRef(null);\n  const authEmail = (() => {\n    try {\n      const u = JSON.parse(localStorage.getItem('hmsUser') || 'null');\n      return (u === null || u === void 0 ? void 0 : u.email) || '';\n    } catch {\n      return '';\n    }\n  })();\n  const nights = useMemo(() => {\n    if (!bkCheckIn || !bkCheckOut) return 0;\n    const inD = new Date(bkCheckIn);\n    const outD = new Date(bkCheckOut);\n    const ms = outD - inD;\n    return ms > 0 ? Math.round(ms / 86400000) : 0;\n  }, [bkCheckIn, bkCheckOut]);\n  const totalPrice = useMemo(() => nights * Number((bookingRoom === null || bookingRoom === void 0 ? void 0 : bookingRoom.price) || 0), [nights, bookingRoom]);\n  const finalPrice = totalPrice; // no promotions\n  const dateError = useMemo(() => {\n    if (!bkCheckIn || !bkCheckOut) return '';\n    const inD = new Date(bkCheckIn);\n    const outD = new Date(bkCheckOut);\n    if (!(outD > inD)) return 'Ngày trả phải sau ngày nhận';\n    return '';\n  }, [bkCheckIn, bkCheckOut]);\n  const submitEnabled = !!authEmail && !bkLoading && !bkSubmitted && bookingRoom && bkCheckIn && bkCheckOut && !dateError && bkAdults >= 1 && nights > 0 && bkAgree;\n  const isPrivileged = useMemo(() => {\n    try {\n      const u = JSON.parse(localStorage.getItem('hmsUser') || 'null');\n      return ['admin', 'staff'].includes(String((u === null || u === void 0 ? void 0 : u.role) || '').toLowerCase());\n    } catch {\n      return false;\n    }\n  }, []);\n  const loadHotels = async () => {\n    try {\n      const res = await fetch('/api/hotels');\n      if (!res.ok) throw new Error();\n      const list = await res.json();\n      setHotels(Array.isArray(list) ? list : []);\n    } catch {\n      setHotels([]);\n    }\n  };\n  const loadTypes = async hid => {\n    try {\n      const url = new URL('/api/room-types', window.location.origin);\n      if (hid) url.searchParams.set('hotelId', hid);\n      const res = await fetch(url);\n      if (!res.ok) throw new Error();\n      const list = await res.json();\n      setTypes(Array.isArray(list) ? list : []);\n    } catch {\n      setTypes([]);\n    }\n  };\n  const loadRooms = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const origin = window.location.origin;\n      const url = new URL('/api/rooms', origin);\n      if (q) url.searchParams.set('q', q);\n      if (hotelId) url.searchParams.set('hotelId', hotelId);\n      if (typeId) url.searchParams.set('typeId', typeId);\n      console.log('[RoomsBrowse] Fetch rooms:', url.toString());\n      const res = await fetch(url, {\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!res.ok) {\n        const text = await res.text().catch(() => '');\n        throw new Error('Không tải được phòng' + (text ? ' - ' + text.substring(0, 120) : ''));\n      }\n      const j = await res.json();\n      if (!j || typeof j !== 'object') throw new Error('Phản hồi không hợp lệ');\n      const list = Array.isArray(j.items) ? j.items : Array.isArray(j.rooms) ? j.rooms : [];\n      console.log('[RoomsBrowse] Received rooms count:', list.length);\n      setRooms(list.map(r => {\n        const imgsRaw = Array.isArray(r.images) ? r.images : [];\n        const imgs = imgsRaw.map(im => normalizeImage(im)).filter(Boolean);\n        const first = imgs.length ? imgs[0] : null;\n        return {\n          id: r.id,\n          roomNumber: r.roomNumber || '-',\n          floor: r.floor || null,\n          hotelName: r.hotelName,\n          roomType: r.roomType,\n          price: r.price,\n          status: r.status || 'Available',\n          description: r.description || '',\n          image: first,\n          images: imgs\n        };\n      }));\n    } catch (e) {\n      console.error('[RoomsBrowse] loadRooms error', e);\n      setError(e.message || 'Lỗi tải dữ liệu');\n      setRooms([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadHotels();\n    loadTypes();\n  }, []);\n  useEffect(() => {\n    loadTypes(hotelId);\n  }, [hotelId]);\n  useEffect(() => {\n    loadRooms();\n  }, [q, hotelId, typeId]);\n  const statusLabel = s => {\n    const v = String(s || '').toLowerCase();\n    if (v === 'available') return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"rb-badge available\",\n      children: \"Tr\\u1ED1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 32\n    }, this);\n    if (v === 'occupied') return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"rb-badge booked\",\n      children: \"\\u0110ang \\u1EDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 31\n    }, this);\n    if (v === 'cleaning') return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"rb-badge maintenance\",\n      children: \"D\\u1ECDn d\\u1EB9p\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 31\n    }, this);\n    if (v === 'maintenance') return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"rb-badge maintenance\",\n      children: \"B\\u1EA3o tr\\xEC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 34\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"rb-badge available\",\n      children: \"Tr\\u1ED1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 12\n    }, this);\n  };\n  const openDetail = async r => {\n    setDetail(r);\n    setDetailFull(null);\n    if (!(r !== null && r !== void 0 && r.id)) return;\n    setDetailLoading(true);\n    try {\n      const res = await fetch(`/api/rooms/${r.id}`);\n      if (!res.ok) throw new Error('Không tải được chi tiết');\n      const j = await res.json();\n      setDetailFull(j.room || null);\n    } catch (e) {\n      console.error('detail fetch error', e);\n    } finally {\n      setDetailLoading(false);\n    }\n  };\n  const closeDetail = () => {\n    setDetail(null);\n    setDetailFull(null);\n  };\n  const openReviews = async r => {\n    if (!(r !== null && r !== void 0 && r.id)) return;\n    setReviewsModal(r);\n    setReviewsLoading(true);\n    setReviewsError('');\n    setReviewsData(null);\n    try {\n      const res = await fetch(`/api/rooms/${r.id}/reviews`);\n      if (!res.ok) throw new Error('Không tải được đánh giá');\n      const j = await res.json();\n      setReviewsData({\n        reviews: j.reviews || [],\n        avgRating: j.avgRating || 0\n      });\n    } catch (e) {\n      setReviewsError(e.message || 'Lỗi tải đánh giá');\n    } finally {\n      setReviewsLoading(false);\n    }\n  };\n  const closeReviews = () => {\n    setReviewsModal(null);\n    setReviewsData(null);\n  };\n\n  // ESC key to close detail modal\n  useEffect(() => {\n    const handler = e => {\n      if (e.key === 'Escape') {\n        if (bookingOpen) {\n          setBookingOpen(false);\n          setBookingRoom(null);\n        } else if (detail) closeDetail();else if (onClose && inline) onClose();\n      }\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n  }, [detail, inline, onClose, bookingOpen]);\n  useEffect(() => {\n    if (bookingOpen && bkFirstFieldRef.current) {\n      try {\n        bkFirstFieldRef.current.focus();\n      } catch {}\n    }\n  }, [bookingOpen]);\n\n  // Single horizontal scrollbar (top) refs\n  const topScrollRef = useRef(null);\n  const bodyScrollRef = useRef(null);\n  const syncScrolling = (source, target) => {\n    if (!source || !target) return;\n    if (target.scrollLeft !== source.scrollLeft) target.scrollLeft = source.scrollLeft;\n  };\n  useEffect(() => {\n    const topEl = topScrollRef.current;\n    const botEl = bodyScrollRef.current;\n    if (!topEl || !botEl) return;\n    const onTop = () => syncScrolling(topEl, botEl);\n    const onBot = () => syncScrolling(botEl, topEl);\n    topEl.addEventListener('scroll', onTop);\n    botEl.addEventListener('scroll', onBot);\n    const resizeHandler = () => {\n      // keep width track by forcing reflow\n      if (topEl && botEl) {\n        // match scrollLeft after resize\n        syncScrolling(botEl, topEl);\n      }\n    };\n    window.addEventListener('resize', resizeHandler);\n    return () => {\n      topEl.removeEventListener('scroll', onTop);\n      botEl.removeEventListener('scroll', onBot);\n      window.removeEventListener('resize', resizeHandler);\n    };\n  }, [rooms.length]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: inline ? '' : 'home-root',\n    style: {\n      paddingTop: inline ? 0 : 80\n    },\n    children: [!inline && /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"home-header\",\n      style: {\n        position: 'sticky',\n        top: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"logo\",\n          className: \"home-header-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"home-header-title home-header-home-btn\",\n          children: \"TRANG CH\\u1EE6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home-header-icons\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          className: \"home-header-icon\",\n          title: \"\\u0110\\u0103ng nh\\u1EADp\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/icon-user.png\",\n            alt: \"user\",\n            className: \"home-header-icon-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: inline ? '8px 14px 24px' : '24px 24px 40px'\n      },\n      children: [inline && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"rb-btn gradient\",\n        style: {\n          marginBottom: 14,\n          borderRadius: 28\n        },\n        onClick: () => onClose && onClose(),\n        children: \"\\u2190 Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rb-overlay-animate rb-panel\",\n        onMouseDown: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rb-heading-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"rb-heading\",\n            children: \"Danh s\\xE1ch ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-total-count\",\n            \"aria-live\": \"polite\",\n            children: [\"T\\u1ED5ng: \", rooms.length, \" \", loading && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rb-muted\",\n              style: {\n                fontWeight: 400\n              },\n              children: \"(\\u0110ang t\\u1EA3i...)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 97\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rb-filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"T\\u1EEB kh\\xF3a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"rb-input\",\n              value: q,\n              onChange: e => setQ(e.target.value),\n              placeholder: \"S\\u1ED1 ph\\xF2ng / lo\\u1EA1i / kh\\xE1ch s\\u1EA1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Kh\\xE1ch s\\u1EA1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-select-wrap\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"rb-select\",\n                value: hotelId,\n                onChange: e => setHotelId(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"T\\u1EA5t c\\u1EA3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this), hotels.map(h => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: h.id,\n                  children: h.name\n                }, h.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 35\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"H\\u1EA1ng ph\\xF2ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-select-wrap\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"rb-select\",\n                value: typeId,\n                onChange: e => setTypeId(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"T\\u1EA5t c\\u1EA3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 19\n                }, this), types.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: t.id,\n                  children: t.name\n                }, t.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 34\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rb-table-shell\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-table-head\",\n            style: {\n              gridTemplateColumns: '150px 130px 1.1fr 1.1fr 120px 120px 2fr 200px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"\\u1EA2nh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"Ph\\xF2ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"Kh\\xE1ch s\\u1EA1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"Lo\\u1EA1i ph\\xF2ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"Gi\\xE1/\\u0111\\xEAm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"Tr\\u1EA1ng th\\xE1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"M\\xF4 t\\u1EA3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-cell\",\n              children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: bodyScrollRef,\n            className: \"rb-table-body\",\n            children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-cell\",\n                children: \"\\u0110ang t\\u1EA3i...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 50\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 26\n            }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-cell\",\n                style: {\n                  color: '#b42318'\n                },\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 133\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 109\n            }, this) : rooms.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-cell\",\n                children: \"Kh\\xF4ng c\\xF3 ph\\xF2ng ph\\xF9 h\\u1EE3p.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 251\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 227\n            }, this) : rooms.map((r, idx) => {\n              const roomLabel = r.roomNumber === '-' ? '-' : `${r.roomNumber}${r.floor ? ' - T' + r.floor : ''}`;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-row\",\n                style: {\n                  gridTemplateColumns: '150px 130px 1.1fr 1.1fr 120px 120px 2fr 200px',\n                  animationDelay: `${Math.min(idx, 12) * 30}ms`\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell image-cell\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rb-img-wrap\",\n                    children: r.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: r.image,\n                      alt: \"img\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 36\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        width: '100%',\n                        height: '100%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: 10,\n                        color: '#777'\n                      },\n                      children: \"No image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 70\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell\",\n                  title: roomLabel,\n                  children: roomLabel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell\",\n                  children: r.hotelName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell\",\n                  children: r.roomType\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell\",\n                  style: {\n                    fontSize: 13\n                  },\n                  children: [Number(r.price || 0).toLocaleString('vi-VN'), \" VND\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell\",\n                  children: statusLabel(r.status)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell rb-desc\",\n                  title: r.description,\n                  children: r.description || '—'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-cell rb-actions\",\n                  style: {\n                    gap: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"rb-btn primary\",\n                    type: \"button\",\n                    disabled: ['Booked', 'Maintenance', 'Unavailable', 'Occupied'].includes((r.status || '').toString()),\n                    onClick: () => {\n                      if (['Booked', 'Maintenance', 'Unavailable', 'Occupied'].includes((r.status || '').toString())) return;\n                      setBookingRoom(r);\n                      setBookingOpen(true);\n                      setBkCheckIn('');\n                      setBkCheckOut('');\n                      setBkAdults(1);\n                      setBkChildren(0);\n                      setBkMsg('');\n                      setBkSubmitted(false);\n                    },\n                    children: ['Booked', 'Maintenance', 'Unavailable', 'Occupied'].includes((r.status || '').toString()) ? 'ĐÃ ĐƯỢC ĐẶT' : 'Đặt phòng'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"rb-btn outline\",\n                    type: \"button\",\n                    onClick: () => openReviews(r),\n                    children: \"\\u0110\\xE1nh gi\\xE1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"rb-btn outline\",\n                    type: \"button\",\n                    onClick: () => openDetail(r),\n                    children: \"Chi ti\\u1EBFt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)]\n              }, r.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 3\n      }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rb-modal-backdrop\",\n        onMouseDown: e => {\n          if (e.target === e.currentTarget) closeDetail();\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rb-modal\",\n          onMouseDown: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"rb-modal-close\",\n            onClick: closeDetail,\n            \"aria-label\": \"\\u0110\\xF3ng\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginTop: 0,\n              marginBottom: 14,\n              fontSize: '1.15rem'\n            },\n            children: detailFull !== null && detailFull !== void 0 && detailFull.roomNumber ? `${detailFull.roomNumber}${detailFull.floor ? ' - T' + detailFull.floor : ''}` : detail.roomType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), detailLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-muted\",\n            style: {\n              fontSize: '.75rem'\n            },\n            children: \"\\u0110ang t\\u1EA3i chi ti\\u1EBFt...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 24,\n              flexWrap: 'wrap',\n              opacity: detailLoading ? .6 : 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: '0 0 260px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-img-wrap\",\n                style: {\n                  width: '100%',\n                  height: 180\n                },\n                children: detailFull !== null && detailFull !== void 0 && detailFull.images && detailFull.images[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: normalizeImage(detailFull.images[0]),\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 70\n                }, this) : detail.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: detail.image,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 146\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '100%',\n                    height: '100%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: 12,\n                    color: '#666'\n                  },\n                  children: \"No image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 182\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 10,\n                  fontSize: '.75rem',\n                  lineHeight: 1.3\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Lo\\u1EA1i:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 26\n                  }, this), \" \", (detailFull === null || detailFull === void 0 ? void 0 : detailFull.roomType) || detail.roomType]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Gi\\xE1:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 26\n                  }, this), \" \", Number(((_detailFull$price = detailFull === null || detailFull === void 0 ? void 0 : detailFull.price) !== null && _detailFull$price !== void 0 ? _detailFull$price : detail.price) || 0).toLocaleString('vi-VN'), \" VND/\\u0111\\xEAm\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 21\n                }, this), (detailFull === null || detailFull === void 0 ? void 0 : detailFull.maxAdults) != null && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Ng\\u01B0\\u1EDDi l\\u1EDBn t\\u1ED1i \\u0111a:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 60\n                  }, this), \" \", detailFull.maxAdults]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 55\n                }, this), (detailFull === null || detailFull === void 0 ? void 0 : detailFull.maxChildren) != null && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Tr\\u1EBB em t\\u1ED1i \\u0111a:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 62\n                  }, this), \" \", detailFull.maxChildren]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 57\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Tr\\u1EA1ng th\\xE1i:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 26\n                  }, this), \" \", statusLabel((detailFull === null || detailFull === void 0 ? void 0 : detailFull.status) || detail.status)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this), (detailFull === null || detailFull === void 0 ? void 0 : (_detailFull$images = detailFull.images) === null || _detailFull$images === void 0 ? void 0 : _detailFull$images.length) > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: 6,\n                  flexWrap: 'wrap',\n                  marginTop: 10\n                },\n                children: detailFull.images.slice(1, 6).map((im, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-img-wrap\",\n                  style: {\n                    width: 54,\n                    height: 40\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: normalizeImage(im),\n                    alt: \"thumb\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 27\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: '1 1 300px',\n                minWidth: 240\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  whiteSpace: 'pre-wrap',\n                  lineHeight: 1.45,\n                  fontSize: '.78rem'\n                },\n                children: (detailFull === null || detailFull === void 0 ? void 0 : detailFull.description) || detail.description || 'Không có mô tả.'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 22,\n              display: 'flex',\n              gap: 10,\n              justifyContent: 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"rb-btn primary\",\n              disabled: ['Booked', 'Maintenance', 'Unavailable', 'Occupied'].includes(((detailFull === null || detailFull === void 0 ? void 0 : detailFull.status) || detail.status || '').toString()),\n              onClick: () => {\n                if (['Booked', 'Maintenance', 'Unavailable', 'Occupied'].includes(((detailFull === null || detailFull === void 0 ? void 0 : detailFull.status) || detail.status || '').toString())) return;\n                // Prefer enriched detailFull (has full images array) if available\n                if (detailFull) {\n                  const imgs = Array.isArray(detailFull.images) ? detailFull.images.map(im => normalizeImage(im)).filter(Boolean) : [];\n                  setBookingRoom({\n                    ...detail,\n                    ...detailFull,\n                    images: imgs,\n                    image: imgs[0] || detail.image\n                  });\n                } else {\n                  setBookingRoom(detail);\n                }\n                setBookingOpen(true);\n                setBkCheckIn('');\n                setBkCheckOut('');\n                setBkAdults(1);\n                setBkChildren(0);\n                setBkMsg('');\n                setBkSubmitted(false);\n              },\n              children: ['Booked', 'Maintenance', 'Unavailable', 'Occupied'].includes(((detailFull === null || detailFull === void 0 ? void 0 : detailFull.status) || detail.status || '').toString()) ? 'ĐÃ ĐƯỢC ĐẶT' : 'Đặt phòng'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"rb-btn outline\",\n              onClick: closeDetail,\n              children: \"\\u0110\\xF3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this), bookingOpen && bookingRoom && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rb-modal-backdrop\",\n        onMouseDown: e => {\n          if (e.target === e.currentTarget) {\n            setBookingOpen(false);\n            setBookingRoom(null);\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rb-modal rb-booking-fast-animate\",\n          role: \"dialog\",\n          \"aria-modal\": \"true\",\n          \"aria-label\": \"\\u0110\\u1EB7t ph\\xF2ng nhanh\",\n          onMouseDown: e => e.stopPropagation(),\n          style: {\n            maxWidth: 600\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"rb-modal-close\",\n            onClick: () => {\n              setBookingOpen(false);\n              setBookingRoom(null);\n            },\n            \"aria-label\": \"\\u0110\\xF3ng\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-booking-fast\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u0110\\u1EB7t ph\\xF2ng nhanh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-booking-room-image\",\n              style: {\n                marginBottom: 14\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-img-wrap\",\n                style: {\n                  width: '100%',\n                  height: 160,\n                  borderRadius: 14,\n                  overflow: 'hidden',\n                  boxShadow: '0 2px 6px rgba(0,0,0,0.15)'\n                },\n                children: bookingRoom.images && bookingRoom.images[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: bookingRoom.images[0],\n                  alt: \"Ph\\xF2ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 71\n                }, this) : bookingRoom.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: bookingRoom.image,\n                  alt: \"Ph\\xF2ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 142\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '100%',\n                    height: '100%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: 12,\n                    color: '#666'\n                  },\n                  children: \"Kh\\xF4ng c\\xF3 \\u1EA3nh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 188\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 19\n              }, this), bookingRoom.images && bookingRoom.images.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: 6,\n                  marginTop: 8,\n                  flexWrap: 'wrap'\n                },\n                children: bookingRoom.images.slice(1, 6).map((im, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    const copy = [...bookingRoom.images];\n                    const main = copy[0];\n                    copy[0] = copy[i + 1];\n                    copy[i + 1] = main;\n                    setBookingRoom({\n                      ...bookingRoom,\n                      images: copy,\n                      image: copy[0]\n                    });\n                  },\n                  className: \"rb-img-wrap\",\n                  style: {\n                    width: 54,\n                    height: 40,\n                    cursor: 'pointer',\n                    opacity: .9\n                  },\n                  title: \"Xem \\u1EA3nh\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: im,\n                    alt: \"thumb\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 27\n                  }, this)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-booking-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Ph\\xF2ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 19\n              }, this), \" \", bookingRoom.roomNumber === '-' ? bookingRoom.roomType : bookingRoom.roomNumber, bookingRoom.floor ? ` • Tầng ${bookingRoom.floor}` : '', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 177\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Lo\\u1EA1i:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 19\n              }, this), \" \", bookingRoom.roomType, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 64\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Gi\\xE1:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this), \" \", Number(bookingRoom.price || 0).toLocaleString('vi-VN'), \" VND/\\u0111\\xEAm\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: async e => {\n                e.preventDefault();\n                setBkMsg('');\n                if (!authEmail) {\n                  setBkMsg('Vui lòng đăng nhập để đặt phòng.');\n                  return;\n                }\n                if (!submitEnabled) {\n                  return;\n                }\n                try {\n                  setBkLoading(true);\n                  setBkSubmitted(true);\n                  // Tạo token và summary tương tự RoomTypeInline flow để chuyển sang trang thanh toán\n                  const token = Math.random().toString(36).slice(2) + Date.now().toString(36);\n                  const pad2 = n => String(n).padStart(2, '0');\n                  const nowD = new Date();\n                  const bookingCode = `HMS${nowD.getFullYear()}${pad2(nowD.getMonth() + 1)}${pad2(nowD.getDate())}`;\n                  const roomNames = `Phòng ${bookingRoom.roomNumber}${bookingRoom.floor ? ` • Tầng ${bookingRoom.floor}` : ''}`;\n                  const summary = {\n                    token,\n                    code: bookingCode,\n                    hotelId: bookingRoom.hotelId || null,\n                    hotel: bookingRoom.hotelName || '',\n                    roomType: bookingRoom.roomType || '',\n                    roomNames,\n                    checkIn: bkCheckIn,\n                    checkOut: bkCheckOut,\n                    checkInTime: '14:00',\n                    checkOutTime: '12:00',\n                    payMethod: bkPayMethod || 'MOMO',\n                    userEmail: authEmail,\n                    adults: bkAdults,\n                    children: bkChildren,\n                    rooms: [{\n                      id: bookingRoom.id,\n                      number: bookingRoom.roomNumber,\n                      floor: bookingRoom.floor,\n                      price: bookingRoom.price,\n                      name: bookingRoom.roomNumber,\n                      adults: bkAdults,\n                      children: bkChildren\n                    }],\n                    amount: Number(bookingRoom.price || 0) * nights || 0\n                  };\n                  // promotions removed\n                  try {\n                    localStorage.setItem('hmsBooking:' + token, JSON.stringify(summary));\n                  } catch {}\n                  const q = [`token=${encodeURIComponent(token)}`, `code=${encodeURIComponent(summary.code)}`,\n                  // pass gross amount; discount is read from summary on PaymentConfirm\n                  `amount=${encodeURIComponent(summary.amount)}`, `hid=${encodeURIComponent(summary.hotelId || '')}`, `rn=${encodeURIComponent(roomNames)}`, `rt=${encodeURIComponent(summary.roomType || '')}`, `ci=${encodeURIComponent(summary.checkIn || '')}`, `co=${encodeURIComponent(summary.checkOut || '')}`, `ad=${encodeURIComponent(summary.adults)}`, `ch=${encodeURIComponent(summary.children)}`].join('&');\n                  window.location.href = '/payment/confirm?' + q;\n                } catch (err) {\n                  setBkMsg(err.message || 'Lỗi khởi tạo thanh toán');\n                  setBkSubmitted(false);\n                } finally {\n                  setBkLoading(false);\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-booking-grid\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-booking-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rb-booking-field\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Ng\\xE0y nh\\u1EADn\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 419,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      ref: bkFirstFieldRef,\n                      type: \"date\",\n                      min: new Date().toISOString().slice(0, 10),\n                      value: bkCheckIn,\n                      onChange: e => {\n                        const v = e.target.value;\n                        setBkCheckIn(v);\n                        // If check-out is before/equals new check-in, reset check-out\n                        if (bkCheckOut && bkCheckOut <= v) {\n                          setBkCheckOut('');\n                        }\n                      },\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 420,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rb-booking-field\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Ng\\xE0y tr\\u1EA3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 437,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"date\",\n                      min: bkCheckIn ? (() => {\n                        const d = new Date(bkCheckIn);\n                        d.setDate(d.getDate() + 1);\n                        return d.toISOString().slice(0, 10);\n                      })() : new Date().toISOString().slice(0, 10),\n                      value: bkCheckOut,\n                      onChange: e => setBkCheckOut(e.target.value),\n                      disabled: !bkCheckIn,\n                      required: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 438,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-booking-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rb-booking-field\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Ng\\u01B0\\u1EDDi l\\u1EDBn\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 450,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bkAdults,\n                      onChange: e => setBkAdults(Number(e.target.value)),\n                      children: Array.from({\n                        length: bookingRoom.maxAdults || 2\n                      }, (_, i) => i + 1).map(v => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: v,\n                        children: v\n                      }, v, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 456,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rb-booking-field\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Tr\\u1EBB em\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 461,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bkChildren,\n                      onChange: e => setBkChildren(Number(e.target.value)),\n                      children: Array.from({\n                        length: (bookingRoom.maxChildren || 0) + 1\n                      }, (_, i) => i).map(v => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: v,\n                        children: v\n                      }, v, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 467,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 21\n                }, this), dateError && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-msg error\",\n                  role: \"alert\",\n                  children: dateError\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 35\n                }, this), nights > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-booking-summary\",\n                  \"aria-live\": \"polite\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: nights\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 475,\n                      columnNumber: 31\n                    }, this), \" \\u0111\\xEAm x \", Number(bookingRoom.price || 0).toLocaleString('vi-VN'), \" VND\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontWeight: 800\n                    },\n                    children: [Number(totalPrice).toLocaleString('vi-VN'), \" VND\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 23\n                }, this), !authEmail && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-msg error\",\n                  children: \"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 \\u0111\\u1EB7t ph\\xF2ng.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 38\n                }, this), bkMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `rb-msg ${bkMsg.includes('thành công') ? 'success' : 'error'}`,\n                  children: bkMsg\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-booking-row\",\n                  style: {\n                    marginTop: 4\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rb-booking-field\",\n                    style: {\n                      flex: '1 1 100%'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 484,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: bkPayMethod,\n                      onChange: e => setBkPayMethod(e.target.value),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"MOMO\",\n                        children: \"V\\xED \\u0111i\\u1EC7n t\\u1EED MOMO\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 486,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"ZALOPAY\",\n                        children: \"ZaloPay\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 487,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"VNPAY\",\n                        children: \"VNPay\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 488,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"CARD\",\n                        children: \"Th\\u1EBB t\\xEDn d\\u1EE5ng/ghi n\\u1EE3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 489,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 485,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 483,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"rb-terms\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    style: {\n                      marginTop: 2\n                    },\n                    checked: bkAgree,\n                    onChange: e => setBkAgree(e.target.checked)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Vui l\\xF2ng \\u0111\\u1ECDc k\\u0129 v\\xE0 \\u0111\\u1ED3ng \\xFD v\\u1EDBi \\u0111i\\u1EC1u kho\\u1EA3n b\\u1EB1ng c\\xE1ch \\u0111\\xE1nh d\\u1EA5u v\\xE0o \\xF4 b\\xEAn c\\u1EA1nh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 495,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rb-booking-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"rb-btn outline\",\n                    onClick: () => {\n                      setBookingOpen(false);\n                      setBookingRoom(null);\n                    },\n                    children: \"H\\u1EE7y\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"rb-btn primary\",\n                    disabled: !submitEnabled,\n                    children: bkLoading ? 'Đang xử lý...' : 'Thanh toán'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rb-booking-note\",\n              children: \"C\\u1EA7n nhi\\u1EC1u ph\\xF2ng ho\\u1EB7c t\\xF9y ch\\u1ECDn n\\xE2ng cao? V\\xE0o giao di\\u1EC7n h\\u1EA1ng ph\\xF2ng \\u0111\\u1EC3 ch\\u1ECDn nhi\\u1EC1u ph\\xF2ng v\\xE0 ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this), reviewsModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rb-modal-backdrop\",\n        onMouseDown: e => {\n          if (e.target === e.currentTarget) closeReviews();\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rb-modal\",\n          onMouseDown: e => e.stopPropagation(),\n          style: {\n            maxWidth: 860\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"rb-modal-close\",\n            onClick: closeReviews,\n            \"aria-label\": \"\\u0110\\xF3ng\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginTop: 0,\n              marginBottom: 10,\n              fontSize: '1.05rem'\n            },\n            children: [\"\\u0110\\xE1nh gi\\xE1 ph\\xF2ng \", reviewsModal.roomNumber || reviewsModal.roomType]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this), reviewsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rb-muted\",\n            style: {\n              fontSize: '.75rem'\n            },\n            children: \"\\u0110ang t\\u1EA3i \\u0111\\xE1nh gi\\xE1...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 34\n          }, this), reviewsError && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#b42318',\n              fontSize: '.75rem'\n            },\n            children: reviewsError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 32\n          }, this), !reviewsLoading && !reviewsError && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 6\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '.8rem',\n                marginBottom: 10\n              },\n              children: [\"Trung b\\xECnh: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: ((reviewsData === null || reviewsData === void 0 ? void 0 : reviewsData.avgRating) || 0).toFixed(1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 33\n              }, this), \"/5 \\u2B50\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: 380,\n                overflow: 'auto',\n                paddingRight: 4,\n                border: '1px solid #e5e7eb',\n                borderRadius: 8\n              },\n              children: [(!reviewsData || !((_reviewsData$reviews = reviewsData.reviews) !== null && _reviewsData$reviews !== void 0 && _reviewsData$reviews.length)) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rb-muted\",\n                style: {\n                  padding: 12,\n                  fontSize: '.75rem'\n                },\n                children: \"Ch\\u01B0a c\\xF3 \\u0111\\xE1nh gi\\xE1.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 72\n              }, this), reviewsData === null || reviewsData === void 0 ? void 0 : (_reviewsData$reviews2 = reviewsData.reviews) === null || _reviewsData$reviews2 === void 0 ? void 0 : _reviewsData$reviews2.map(rv => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: '10px 12px',\n                  borderBottom: '1px solid #eef2f6',\n                  fontSize: '.75rem',\n                  lineHeight: 1.35\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    gap: 12\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: rv.customer\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: '#f59e0b',\n                      fontWeight: 600\n                    },\n                    children: [rv.rating.toFixed(1), \"\\u2B50\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 4\n                  },\n                  children: rv.comment || /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rb-muted\",\n                    children: \"(Kh\\xF4ng c\\xF3 n\\u1ED9i dung)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 529,\n                    columnNumber: 69\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 4,\n                    fontSize: '.65rem',\n                    color: '#64748b'\n                  },\n                  children: new Date(rv.createdAt).toLocaleString('vi-VN')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 25\n                }, this)]\n              }, rv.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 18,\n              textAlign: 'right'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"rb-btn outline\",\n              onClick: closeReviews,\n              children: \"\\u0110\\xF3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n_s(RoomsBrowse, \"WbqB1cPphpBxRs5zrkwGpBakIXI=\");\n_c = RoomsBrowse;\nvar _c;\n$RefreshReg$(_c, \"RoomsBrowse\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Link","jsxDEV","_jsxDEV","RoomsBrowse","inline","onClose","_s","_detailFull$price","_detailFull$images","_reviewsData$reviews","_reviewsData$reviews2","normalizeImage","p","test","startsWith","replace","q","setQ","hotelId","setHotelId","typeId","setTypeId","hotels","setHotels","types","setTypes","rooms","setRooms","detail","setDetail","detailFull","setDetailFull","detailLoading","setDetailLoading","reviewsModal","setReviewsModal","reviewsLoading","setReviewsLoading","reviewsData","setReviewsData","reviewsError","setReviewsError","loading","setLoading","error","setError","bookingOpen","setBookingOpen","bookingRoom","setBookingRoom","bkCheckIn","setBkCheckIn","bkCheckOut","setBkCheckOut","bkAdults","setBkAdults","bkChildren","setBkChildren","bkPayMethod","setBkPayMethod","bkAgree","setBkAgree","bkLoading","setBkLoading","bkMsg","setBkMsg","bkSubmitted","setBkSubmitted","bkFirstFieldRef","authEmail","u","JSON","parse","localStorage","getItem","email","nights","inD","Date","outD","ms","Math","round","totalPrice","Number","price","finalPrice","dateError","submitEnabled","isPrivileged","includes","String","role","toLowerCase","loadHotels","res","fetch","ok","Error","list","json","Array","isArray","loadTypes","hid","url","URL","window","location","origin","searchParams","set","loadRooms","console","log","toString","headers","text","catch","substring","j","items","length","map","r","imgsRaw","images","imgs","im","filter","Boolean","first","id","roomNumber","floor","hotelName","roomType","status","description","image","e","message","statusLabel","s","v","className","children","fileName","_jsxFileName","lineNumber","columnNumber","openDetail","room","closeDetail","openReviews","reviews","avgRating","closeReviews","handler","key","addEventListener","removeEventListener","current","focus","topScrollRef","bodyScrollRef","syncScrolling","source","target","scrollLeft","topEl","botEl","onTop","onBot","resizeHandler","style","paddingTop","position","top","src","alt","to","title","padding","marginBottom","borderRadius","onClick","onMouseDown","stopPropagation","fontWeight","value","onChange","placeholder","h","name","t","gridTemplateColumns","ref","color","idx","roomLabel","animationDelay","min","width","height","display","alignItems","justifyContent","fontSize","toLocaleString","gap","type","disabled","currentTarget","marginTop","flexWrap","opacity","flex","lineHeight","maxAdults","maxChildren","slice","i","minWidth","whiteSpace","maxWidth","overflow","boxShadow","copy","main","cursor","onSubmit","preventDefault","token","random","now","pad2","n","padStart","nowD","bookingCode","getFullYear","getMonth","getDate","roomNames","summary","code","hotel","checkIn","checkOut","checkInTime","checkOutTime","payMethod","userEmail","adults","number","amount","setItem","stringify","encodeURIComponent","join","href","err","toISOString","required","d","setDate","from","_","checked","toFixed","maxHeight","paddingRight","border","rv","borderBottom","customer","rating","comment","createdAt","textAlign","_c","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/RoomsBrowse.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './RoomsBrowse.css';\r\n\r\n/* Public rooms browsing page\r\n   Features:\r\n   - Filters: keyword (room number / type), hotel, room type\r\n   - Uses /api/admin/rooms for richer data if user is Admin/Staff (auth header) else falls back to room types + derived rooms not available => we attempt public-like fetch.\r\n   NOTE: Currently there is no public rooms endpoint returning individual rooms; we will call /api/admin/rooms without auth -> backend will 401.\r\n   Fallback strategy: fetch room types (/api/room-types) + display them as pseudo-room rows with aggregate info.\r\n*/\r\nexport default function RoomsBrowse({ inline=false, onClose }){\r\n  // Helper to normalize image paths returned from API (may be stored without leading slash or uploads prefix)\r\n  const normalizeImage = (p) => {\r\n    if(!p) return null;\r\n    try {\r\n      // Already absolute (http/https/data) or starts with /uploads or /static\r\n      if(/^https?:\\/\\//i.test(p) || /^data:/i.test(p)) return p;\r\n      if(p.startsWith('/')) return p; // assume valid root-relative\r\n      // If filename only, prepend uploads path\r\n      return '/uploads/' + p.replace(/^\\/+/, '');\r\n    } catch { return p; }\r\n  };\r\n  const [q, setQ] = useState('');\r\n  const [hotelId, setHotelId] = useState('');\r\n  const [typeId, setTypeId] = useState('');\r\n  const [hotels, setHotels] = useState([]);\r\n  const [types, setTypes] = useState([]);\r\n  const [rooms, setRooms] = useState([]); // unified view\r\n  const [detail, setDetail] = useState(null); // basic selected row (list data)\r\n  const [detailFull, setDetailFull] = useState(null); // full fetched room detail\r\n  const [detailLoading, setDetailLoading] = useState(false);\r\n  const [reviewsModal, setReviewsModal] = useState(null); // { roomId, loading, data }\r\n  const [reviewsLoading, setReviewsLoading] = useState(false);\r\n  const [reviewsData, setReviewsData] = useState(null); // { reviews, avgRating }\r\n  const [reviewsError, setReviewsError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [bookingOpen, setBookingOpen] = useState(false);\r\n  const [bookingRoom, setBookingRoom] = useState(null);\r\n  const [bkCheckIn, setBkCheckIn] = useState('');\r\n  const [bkCheckOut, setBkCheckOut] = useState('');\r\n  const [bkAdults, setBkAdults] = useState(1);\r\n  const [bkChildren, setBkChildren] = useState(0);\r\n  const [bkPayMethod, setBkPayMethod] = useState('MOMO');\r\n  const [bkAgree, setBkAgree] = useState(false);\r\n  const [bkLoading, setBkLoading] = useState(false);\r\n  const [bkMsg, setBkMsg] = useState('');\r\n  // Prevent duplicate rapid submissions / re-init after success redirect\r\n  const [bkSubmitted, setBkSubmitted] = useState(false);\r\n  // Promotions removed\r\n  const bkFirstFieldRef = useRef(null);\r\n  const authEmail = (()=>{ try { const u = JSON.parse(localStorage.getItem('hmsUser')||'null'); return u?.email || ''; } catch { return ''; } })();\r\n  const nights = useMemo(()=>{ if(!bkCheckIn || !bkCheckOut) return 0; const inD=new Date(bkCheckIn); const outD=new Date(bkCheckOut); const ms= outD - inD; return ms>0? Math.round(ms/86400000):0; }, [bkCheckIn, bkCheckOut]);\r\n  const totalPrice = useMemo(()=> nights * Number(bookingRoom?.price||0), [nights, bookingRoom]);\r\n  const finalPrice = totalPrice; // no promotions\r\n  const dateError = useMemo(()=>{ if(!bkCheckIn || !bkCheckOut) return ''; const inD=new Date(bkCheckIn); const outD=new Date(bkCheckOut); if(!(outD>inD)) return 'Ngày trả phải sau ngày nhận'; return ''; }, [bkCheckIn, bkCheckOut]);\r\n  const submitEnabled = !!authEmail && !bkLoading && !bkSubmitted && bookingRoom && bkCheckIn && bkCheckOut && !dateError && bkAdults>=1 && nights>0 && bkAgree;\r\n\r\n  const isPrivileged = useMemo(()=>{ try { const u = JSON.parse(localStorage.getItem('hmsUser')||'null'); return ['admin','staff'].includes(String(u?.role||'').toLowerCase()); } catch { return false; } }, []);\r\n\r\n  const loadHotels = async () => {\r\n    try {\r\n      const res = await fetch('/api/hotels');\r\n      if(!res.ok) throw new Error();\r\n      const list = await res.json();\r\n      setHotels(Array.isArray(list)? list: []);\r\n    } catch { setHotels([]); }\r\n  };\r\n  const loadTypes = async (hid) => {\r\n    try {\r\n      const url = new URL('/api/room-types', window.location.origin);\r\n      if(hid) url.searchParams.set('hotelId', hid);\r\n      const res = await fetch(url);\r\n      if(!res.ok) throw new Error();\r\n      const list = await res.json();\r\n      setTypes(Array.isArray(list)? list: []);\r\n    } catch { setTypes([]); }\r\n  };\r\n\r\n  const loadRooms = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const origin = window.location.origin;\r\n      const url = new URL('/api/rooms', origin);\r\n      if(q) url.searchParams.set('q', q);\r\n      if(hotelId) url.searchParams.set('hotelId', hotelId);\r\n      if(typeId) url.searchParams.set('typeId', typeId);\r\n      console.log('[RoomsBrowse] Fetch rooms:', url.toString());\r\n      const res = await fetch(url, { headers:{ 'Accept':'application/json' } });\r\n      if(!res.ok){\r\n        const text = await res.text().catch(()=> '');\r\n        throw new Error('Không tải được phòng' + (text? ' - ' + text.substring(0,120): '')); }\r\n      const j = await res.json();\r\n      if(!j || typeof j !== 'object') throw new Error('Phản hồi không hợp lệ');\r\n      const list = Array.isArray(j.items)? j.items: (Array.isArray(j.rooms)? j.rooms: []);\r\n      console.log('[RoomsBrowse] Received rooms count:', list.length);\r\n      setRooms(list.map(r => {\r\n        const imgsRaw = Array.isArray(r.images)? r.images : [];\r\n        const imgs = imgsRaw.map(im=> normalizeImage(im)).filter(Boolean);\r\n        const first = imgs.length? imgs[0] : null;\r\n        return {\r\n          id: r.id,\r\n          roomNumber: r.roomNumber || '-',\r\n            floor: r.floor || null,\r\n            hotelName: r.hotelName,\r\n            roomType: r.roomType,\r\n            price: r.price,\r\n            status: r.status || 'Available',\r\n            description: r.description || '',\r\n            image: first,\r\n            images: imgs\r\n        };\r\n      }));\r\n    } catch(e){ console.error('[RoomsBrowse] loadRooms error', e); setError(e.message||'Lỗi tải dữ liệu'); setRooms([]);} finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(()=>{ loadHotels(); loadTypes(); }, []);\r\n  useEffect(()=>{ loadTypes(hotelId); }, [hotelId]);\r\n  useEffect(()=>{ loadRooms(); }, [q, hotelId, typeId]);\r\n\r\n  const statusLabel = (s) => {\r\n    const v = String(s||'').toLowerCase();\r\n    if(v==='available') return <span className=\"rb-badge available\">Trống</span>;\r\n    if(v==='occupied') return <span className=\"rb-badge booked\">Đang ở</span>;\r\n    if(v==='cleaning') return <span className=\"rb-badge maintenance\">Dọn dẹp</span>;\r\n    if(v==='maintenance') return <span className=\"rb-badge maintenance\">Bảo trì</span>;\r\n    return <span className=\"rb-badge available\">Trống</span>;\r\n  };\r\n\r\n  const openDetail = async (r) => {\r\n    setDetail(r);\r\n    setDetailFull(null);\r\n    if(!r?.id) return;\r\n    setDetailLoading(true);\r\n    try {\r\n      const res = await fetch(`/api/rooms/${r.id}`);\r\n      if(!res.ok) throw new Error('Không tải được chi tiết');\r\n      const j = await res.json();\r\n      setDetailFull(j.room || null);\r\n    } catch(e){ console.error('detail fetch error', e); } finally { setDetailLoading(false); }\r\n  };\r\n  const closeDetail = () => { setDetail(null); setDetailFull(null); };\r\n\r\n  const openReviews = async (r) => {\r\n    if(!r?.id) return;\r\n    setReviewsModal(r);\r\n    setReviewsLoading(true); setReviewsError(''); setReviewsData(null);\r\n    try {\r\n      const res = await fetch(`/api/rooms/${r.id}/reviews`);\r\n      if(!res.ok) throw new Error('Không tải được đánh giá');\r\n      const j = await res.json();\r\n      setReviewsData({ reviews: j.reviews||[], avgRating: j.avgRating||0 });\r\n    } catch(e){ setReviewsError(e.message||'Lỗi tải đánh giá'); } finally { setReviewsLoading(false); }\r\n  };\r\n  const closeReviews = () => { setReviewsModal(null); setReviewsData(null); };\r\n\r\n  // ESC key to close detail modal\r\n  useEffect(()=>{\r\n    const handler = (e) => {\r\n      if(e.key === 'Escape') {\r\n        if(bookingOpen){ setBookingOpen(false); setBookingRoom(null); }\r\n        else if(detail) closeDetail();\r\n        else if(onClose && inline) onClose();\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handler);\r\n    return ()=> window.removeEventListener('keydown', handler);\r\n  }, [detail, inline, onClose, bookingOpen]);\r\n\r\n  useEffect(()=>{ if(bookingOpen && bkFirstFieldRef.current){ try { bkFirstFieldRef.current.focus(); } catch {} } }, [bookingOpen]);\r\n\r\n  // Single horizontal scrollbar (top) refs\r\n  const topScrollRef = useRef(null);\r\n  const bodyScrollRef = useRef(null);\r\n  const syncScrolling = (source, target) => {\r\n    if(!source || !target) return;\r\n    if(target.scrollLeft !== source.scrollLeft) target.scrollLeft = source.scrollLeft;\r\n  };\r\n  useEffect(()=>{\r\n  const topEl = topScrollRef.current;\r\n  const botEl = bodyScrollRef.current;\r\n  if(!topEl || !botEl) return;\r\n  const onTop = () => syncScrolling(topEl, botEl);\r\n  const onBot = () => syncScrolling(botEl, topEl);\r\n  topEl.addEventListener('scroll', onTop);\r\n  botEl.addEventListener('scroll', onBot);\r\n    const resizeHandler = () => { // keep width track by forcing reflow\r\n      if(topEl && botEl) {\r\n        // match scrollLeft after resize\r\n        syncScrolling(botEl, topEl);\r\n      }\r\n    };\r\n    window.addEventListener('resize', resizeHandler);\r\n    return ()=>{ topEl.removeEventListener('scroll', onTop); botEl.removeEventListener('scroll', onBot); window.removeEventListener('resize', resizeHandler); };\r\n  }, [rooms.length]);\r\n\r\n  return (\r\n    <div className={inline? '' : 'home-root'} style={{ paddingTop: inline? 0 : 80 }}>\r\n      {!inline && (\r\n        <header className=\"home-header\" style={{ position:'sticky', top:0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <Link to=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</Link>\r\n          </div>\r\n          <div className=\"home-header-icons\">\r\n            <Link to=\"/login\" className=\"home-header-icon\" title=\"Đăng nhập\">\r\n              <img src=\"/icon-user.png\" alt=\"user\" className=\"home-header-icon-img\" />\r\n            </Link>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div style={{ padding: inline? '8px 14px 24px' : '24px 24px 40px' }}>\r\n        {inline && (\r\n          <button className=\"rb-btn gradient\" style={{ marginBottom:14, borderRadius:28 }} onClick={()=>onClose && onClose()}>&larr; Quay lại</button>\r\n        )}\r\n  <div className=\"rb-overlay-animate rb-panel\" onMouseDown={e=>e.stopPropagation()}>\r\n          <div className=\"rb-heading-wrap\">\r\n            <h2 className=\"rb-heading\">Danh sách phòng</h2>\r\n            <div className=\"rb-total-count\" aria-live=\"polite\">Tổng: {rooms.length} {loading && <span className=\"rb-muted\" style={{ fontWeight:400 }}>(Đang tải...)</span>}</div>\r\n          </div>\r\n          <div className=\"rb-filters\">\r\n            <div className=\"rb-field\">\r\n              <label>Từ khóa</label>\r\n              <input className=\"rb-input\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Số phòng / loại / khách sạn\" />\r\n            </div>\r\n            <div className=\"rb-field\">\r\n              <label>Khách sạn</label>\r\n              <div className=\"rb-select-wrap\">\r\n                <select className=\"rb-select\" value={hotelId} onChange={e=>setHotelId(e.target.value)}>\r\n                  <option value=\"\">Tất cả</option>\r\n                  {hotels.map(h=> <option key={h.id} value={h.id}>{h.name}</option>)}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"rb-field\">\r\n              <label>Hạng phòng</label>\r\n              <div className=\"rb-select-wrap\">\r\n                <select className=\"rb-select\" value={typeId} onChange={e=>setTypeId(e.target.value)}>\r\n                  <option value=\"\">Tất cả</option>\r\n                  {types.map(t=> <option key={t.id} value={t.id}>{t.name}</option>)}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"rb-table-shell\">\r\n            <div className=\"rb-table-head\" style={{ gridTemplateColumns:'150px 130px 1.1fr 1.1fr 120px 120px 2fr 200px' }}>\r\n              <div className=\"rb-cell\">Ảnh</div>\r\n              <div className=\"rb-cell\">Phòng</div>\r\n              <div className=\"rb-cell\">Khách sạn</div>\r\n              <div className=\"rb-cell\">Loại phòng</div>\r\n              <div className=\"rb-cell\">Giá/đêm</div>\r\n              <div className=\"rb-cell\">Trạng thái</div>\r\n              <div className=\"rb-cell\">Mô tả</div>\r\n              <div className=\"rb-cell\">Hành động</div>\r\n            </div>\r\n            <div ref={bodyScrollRef} className=\"rb-table-body\">\r\n              {loading ? <div className=\"rb-row\"><div className=\"rb-cell\">Đang tải...</div></div> : error ? <div className=\"rb-row\"><div className=\"rb-cell\" style={{ color:'#b42318' }}>{error}</div></div> : rooms.length===0 ? <div className=\"rb-row\"><div className=\"rb-cell\">Không có phòng phù hợp.</div></div> : rooms.map((r, idx) => {\r\n                const roomLabel = r.roomNumber === '-' ? '-' : `${r.roomNumber}${r.floor ? ' - T' + r.floor : ''}`;\r\n                return (\r\n                  <div key={r.id} className=\"rb-row\" style={{ gridTemplateColumns:'150px 130px 1.1fr 1.1fr 120px 120px 2fr 200px', animationDelay: `${Math.min(idx, 12)*30}ms` }}>\r\n                    <div className=\"rb-cell image-cell\">\r\n                      <div className=\"rb-img-wrap\">\r\n                        {r.image ? <img src={r.image} alt=\"img\" /> : <div style={{ width:'100%', height:'100%', display:'flex', alignItems:'center', justifyContent:'center', fontSize:10, color:'#777' }}>No image</div>}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"rb-cell\" title={roomLabel}>{roomLabel}</div>\r\n                    <div className=\"rb-cell\">{r.hotelName}</div>\r\n                    <div className=\"rb-cell\">{r.roomType}</div>\r\n                    <div className=\"rb-cell\" style={{ fontSize:13 }}>{Number(r.price||0).toLocaleString('vi-VN')} VND</div>\r\n                    <div className=\"rb-cell\">{statusLabel(r.status)}</div>\r\n                    <div className=\"rb-cell rb-desc\" title={r.description}>{r.description || '—'}</div>\r\n                    <div className=\"rb-cell rb-actions\" style={{ gap:8 }}>\r\n                      <button className=\"rb-btn primary\" type=\"button\" disabled={['Booked','Maintenance','Unavailable','Occupied'].includes((r.status||'').toString())} onClick={()=>{ if(['Booked','Maintenance','Unavailable','Occupied'].includes((r.status||'').toString())) return; setBookingRoom(r); setBookingOpen(true); setBkCheckIn(''); setBkCheckOut(''); setBkAdults(1); setBkChildren(0); setBkMsg(''); setBkSubmitted(false); }}>\r\n                        {['Booked','Maintenance','Unavailable','Occupied'].includes((r.status||'').toString()) ? 'ĐÃ ĐƯỢC ĐẶT' : 'Đặt phòng'}\r\n                      </button>\r\n                      <button className=\"rb-btn outline\" type=\"button\" onClick={()=>openReviews(r)}>Đánh giá</button>\r\n                      <button className=\"rb-btn outline\" type=\"button\" onClick={()=>openDetail(r)}>Chi tiết</button>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {detail && (\r\n          <div className=\"rb-modal-backdrop\" onMouseDown={(e)=>{ if(e.target===e.currentTarget) closeDetail(); }}>\r\n            <div className=\"rb-modal\" onMouseDown={e=>e.stopPropagation()}>\r\n              <button className=\"rb-modal-close\" onClick={closeDetail} aria-label=\"Đóng\">×</button>\r\n              <h3 style={{ marginTop:0, marginBottom:14, fontSize:'1.15rem' }}>\r\n                {detailFull?.roomNumber ? `${detailFull.roomNumber}${detailFull.floor? ' - T'+detailFull.floor:''}` : (detail.roomType)}\r\n              </h3>\r\n              {detailLoading && <div className=\"rb-muted\" style={{ fontSize:'.75rem' }}>Đang tải chi tiết...</div>}\r\n              <div style={{ display:'flex', gap:24, flexWrap:'wrap', opacity: detailLoading? .6: 1 }}>\r\n                <div style={{ flex:'0 0 260px' }}>\r\n                  <div className=\"rb-img-wrap\" style={{ width:'100%', height:180 }}>\r\n                    { (detailFull?.images && detailFull.images[0]) ? <img src={normalizeImage(detailFull.images[0])} alt=\"\" /> : (detail.image ? <img src={detail.image} alt=\"\" /> : <div style={{ width:'100%', height:'100%', display:'flex', alignItems:'center', justifyContent:'center', fontSize:12, color:'#666' }}>No image</div>) }\r\n                  </div>\r\n                  <div style={{ marginTop:10, fontSize:'.75rem', lineHeight:1.3 }}>\r\n                    <div><strong>Loại:</strong> {detailFull?.roomType || detail.roomType}</div>\r\n                    <div><strong>Giá:</strong> {Number((detailFull?.price ?? detail.price)||0).toLocaleString('vi-VN')} VND/đêm</div>\r\n                    {detailFull?.maxAdults != null && <div><strong>Người lớn tối đa:</strong> {detailFull.maxAdults}</div>}\r\n                    {detailFull?.maxChildren != null && <div><strong>Trẻ em tối đa:</strong> {detailFull.maxChildren}</div>}\r\n                    <div><strong>Trạng thái:</strong> {statusLabel(detailFull?.status || detail.status)}</div>\r\n                  </div>\r\n                  {detailFull?.images?.length > 1 && (\r\n                    <div style={{ display:'flex', gap:6, flexWrap:'wrap', marginTop:10 }}>\r\n                      {detailFull.images.slice(1,6).map((im,i)=>(\r\n                        <div key={i} className=\"rb-img-wrap\" style={{ width:54, height:40 }}>\r\n                          <img src={normalizeImage(im)} alt=\"thumb\" />\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div style={{ flex:'1 1 300px', minWidth:240 }}>\r\n                  <p style={{ whiteSpace:'pre-wrap', lineHeight:1.45, fontSize:'.78rem' }}>{detailFull?.description || detail.description || 'Không có mô tả.'}</p>\r\n                </div>\r\n              </div>\r\n              <div style={{ marginTop:22, display:'flex', gap:10, justifyContent:'flex-end' }}>\r\n                <button className=\"rb-btn primary\" disabled={['Booked','Maintenance','Unavailable','Occupied'].includes(((detailFull?.status)||(detail.status)||'').toString())} onClick={()=>{ if(['Booked','Maintenance','Unavailable','Occupied'].includes(((detailFull?.status)||(detail.status)||'').toString())) return; \r\n                  // Prefer enriched detailFull (has full images array) if available\r\n                  if(detailFull){\r\n                    const imgs = Array.isArray(detailFull.images)? detailFull.images.map(im=> normalizeImage(im)).filter(Boolean): [];\r\n                    setBookingRoom({ ...detail, ...detailFull, images: imgs, image: imgs[0]||detail.image });\r\n                  } else {\r\n                    setBookingRoom(detail);\r\n                  }\r\n                  setBookingOpen(true); setBkCheckIn(''); setBkCheckOut(''); setBkAdults(1); setBkChildren(0); setBkMsg(''); setBkSubmitted(false); }}>\r\n                  {['Booked','Maintenance','Unavailable','Occupied'].includes(((detailFull?.status)||(detail.status)||'').toString()) ? 'ĐÃ ĐƯỢC ĐẶT' : 'Đặt phòng'}\r\n                </button>\r\n                <button className=\"rb-btn outline\" onClick={closeDetail}>Đóng</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {bookingOpen && bookingRoom && (\r\n          <div className=\"rb-modal-backdrop\" onMouseDown={(e)=>{ if(e.target===e.currentTarget) { setBookingOpen(false); setBookingRoom(null); } }}>\r\n            <div className=\"rb-modal rb-booking-fast-animate\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Đặt phòng nhanh\" onMouseDown={e=>e.stopPropagation()} style={{ maxWidth:600 }}>\r\n              <button className=\"rb-modal-close\" onClick={()=>{ setBookingOpen(false); setBookingRoom(null); }} aria-label=\"Đóng\">×</button>\r\n              <div className=\"rb-booking-fast\">\r\n                <h3>Đặt phòng nhanh</h3>\r\n                <div className=\"rb-booking-room-image\" style={{ marginBottom:14 }}>\r\n                  <div className=\"rb-img-wrap\" style={{ width:'100%', height:160, borderRadius:14, overflow:'hidden', boxShadow:'0 2px 6px rgba(0,0,0,0.15)' }}>\r\n                    { (bookingRoom.images && bookingRoom.images[0]) ? <img src={bookingRoom.images[0]} alt=\"Phòng\" /> : (bookingRoom.image ? <img src={bookingRoom.image} alt=\"Phòng\" /> : <div style={{ width:'100%', height:'100%', display:'flex', alignItems:'center', justifyContent:'center', fontSize:12, color:'#666' }}>Không có ảnh</div>) }\r\n                  </div>\r\n                  {bookingRoom.images && bookingRoom.images.length > 1 && (\r\n                    <div style={{ display:'flex', gap:6, marginTop:8, flexWrap:'wrap' }}>\r\n                      {bookingRoom.images.slice(1,6).map((im,i)=>(\r\n                        <button key={i} type=\"button\" onClick={()=>{ const copy=[...bookingRoom.images]; const main=copy[0]; copy[0]=copy[i+1]; copy[i+1]=main; setBookingRoom({ ...bookingRoom, images: copy, image: copy[0] }); }} className=\"rb-img-wrap\" style={{ width:54, height:40, cursor:'pointer', opacity:.9 }} title=\"Xem ảnh\">\r\n                          <img src={im} alt=\"thumb\" />\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div className=\"rb-booking-meta\">\r\n                  <strong>Phòng:</strong> {bookingRoom.roomNumber === '-' ? bookingRoom.roomType : bookingRoom.roomNumber}{bookingRoom.floor? ` • Tầng ${bookingRoom.floor}`:''}<br />\r\n                  <strong>Loại:</strong> {bookingRoom.roomType}<br />\r\n                  <strong>Giá:</strong> {Number(bookingRoom.price||0).toLocaleString('vi-VN')} VND/đêm\r\n                </div>\r\n                <form onSubmit={async (e)=>{ \r\n                  e.preventDefault(); \r\n                  setBkMsg(''); \r\n                  if(!authEmail){ setBkMsg('Vui lòng đăng nhập để đặt phòng.'); return; }\r\n                  if(!submitEnabled){ return; }\r\n                  try { \r\n                    setBkLoading(true);\r\n                    setBkSubmitted(true);\r\n                    // Tạo token và summary tương tự RoomTypeInline flow để chuyển sang trang thanh toán\r\n                    const token = Math.random().toString(36).slice(2) + Date.now().toString(36);\r\n                    const pad2 = (n)=> String(n).padStart(2,'0');\r\n                    const nowD = new Date();\r\n                    const bookingCode = `HMS${nowD.getFullYear()}${pad2(nowD.getMonth()+1)}${pad2(nowD.getDate())}`;\r\n                    const roomNames = `Phòng ${bookingRoom.roomNumber}${bookingRoom.floor?` • Tầng ${bookingRoom.floor}`:''}`;\r\n                    const summary = {\r\n                      token,\r\n                      code: bookingCode,\r\n                      hotelId: bookingRoom.hotelId || null,\r\n                      hotel: bookingRoom.hotelName || '',\r\n                      roomType: bookingRoom.roomType || '',\r\n                      roomNames,\r\n                      checkIn: bkCheckIn,\r\n                      checkOut: bkCheckOut,\r\n                      checkInTime: '14:00',\r\n                      checkOutTime: '12:00',\r\n                      payMethod: bkPayMethod || 'MOMO',\r\n                      userEmail: authEmail,\r\n                      adults: bkAdults,\r\n                      children: bkChildren,\r\n                      rooms: [{ id: bookingRoom.id, number: bookingRoom.roomNumber, floor: bookingRoom.floor, price: bookingRoom.price, name: bookingRoom.roomNumber, adults: bkAdults, children: bkChildren }],\r\n                      amount: (Number(bookingRoom.price||0) * nights) || 0,\r\n                    };\r\n                    // promotions removed\r\n                    try { localStorage.setItem('hmsBooking:'+token, JSON.stringify(summary)); } catch {}\r\n                    const q = [\r\n                      `token=${encodeURIComponent(token)}`,\r\n                      `code=${encodeURIComponent(summary.code)}`,\r\n                      // pass gross amount; discount is read from summary on PaymentConfirm\r\n                      `amount=${encodeURIComponent(summary.amount)}`,\r\n                      `hid=${encodeURIComponent(summary.hotelId||'')}`,\r\n                      `rn=${encodeURIComponent(roomNames)}`,\r\n                      `rt=${encodeURIComponent(summary.roomType||'')}`,\r\n                      `ci=${encodeURIComponent(summary.checkIn||'')}`,\r\n                      `co=${encodeURIComponent(summary.checkOut||'')}`,\r\n                      `ad=${encodeURIComponent(summary.adults)}`,\r\n                      `ch=${encodeURIComponent(summary.children)}`\r\n                    ].join('&');\r\n                    window.location.href = '/payment/confirm?'+q;\r\n                  } catch(err){\r\n                    setBkMsg(err.message||'Lỗi khởi tạo thanh toán');\r\n                    setBkSubmitted(false);\r\n                  } finally { setBkLoading(false); }\r\n                }}>\r\n                  <div className=\"rb-booking-grid\">\r\n                    <div className=\"rb-booking-row\">\r\n                      <div className=\"rb-booking-field\">\r\n                        <label>Ngày nhận</label>\r\n                        <input\r\n                          ref={bkFirstFieldRef}\r\n                          type=\"date\"\r\n                          min={new Date().toISOString().slice(0,10)}\r\n                          value={bkCheckIn}\r\n                          onChange={e=>{\r\n                            const v = e.target.value;\r\n                            setBkCheckIn(v);\r\n                            // If check-out is before/equals new check-in, reset check-out\r\n                            if(bkCheckOut && bkCheckOut <= v){\r\n                              setBkCheckOut('');\r\n                            }\r\n                          }}\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div className=\"rb-booking-field\">\r\n                        <label>Ngày trả</label>\r\n                        <input\r\n                          type=\"date\"\r\n                          min={bkCheckIn ? (()=>{ const d=new Date(bkCheckIn); d.setDate(d.getDate()+1); return d.toISOString().slice(0,10); })() : new Date().toISOString().slice(0,10)}\r\n                          value={bkCheckOut}\r\n                          onChange={e=>setBkCheckOut(e.target.value)}\r\n                          disabled={!bkCheckIn}\r\n                          required\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"rb-booking-row\">\r\n                      <div className=\"rb-booking-field\">\r\n                        <label>Người lớn</label>\r\n                        <select\r\n                          value={bkAdults}\r\n                          onChange={e=>setBkAdults(Number(e.target.value))}\r\n                        >\r\n                          {Array.from({ length: (bookingRoom.maxAdults || 2) }, (_,i)=> i+1).map(v=> (\r\n                            <option key={v} value={v}>{v}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"rb-booking-field\">\r\n                        <label>Trẻ em</label>\r\n                        <select\r\n                          value={bkChildren}\r\n                          onChange={e=>setBkChildren(Number(e.target.value))}\r\n                        >\r\n                          {Array.from({ length: (bookingRoom.maxChildren || 0) + 1 }, (_,i)=> i).map(v=> (\r\n                            <option key={v} value={v}>{v}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    {dateError && <div className=\"rb-msg error\" role=\"alert\">{dateError}</div>}\r\n                    {nights > 0 && (\r\n                      <div className=\"rb-booking-summary\" aria-live=\"polite\">\r\n                        <span><strong>{nights}</strong> đêm x {Number(bookingRoom.price||0).toLocaleString('vi-VN')} VND</span>\r\n                        <span style={{ fontWeight:800 }}>{Number(totalPrice).toLocaleString('vi-VN')} VND</span>\r\n                      </div>\r\n                    )}\r\n                    {/* Promotion UI removed */}\r\n                    {(!authEmail) && <div className=\"rb-msg error\">Vui lòng đăng nhập để đặt phòng.</div>}\r\n                    {bkMsg && <div className={`rb-msg ${bkMsg.includes('thành công')? 'success':'error'}`}>{bkMsg}</div>}\r\n                    <div className=\"rb-booking-row\" style={{ marginTop:4 }}>\r\n                      <div className=\"rb-booking-field\" style={{ flex: '1 1 100%' }}>\r\n                        <label>Phương thức thanh toán</label>\r\n                        <select value={bkPayMethod} onChange={e=>setBkPayMethod(e.target.value)}>\r\n                          <option value=\"MOMO\">Ví điện tử MOMO</option>\r\n                          <option value=\"ZALOPAY\">ZaloPay</option>\r\n                          <option value=\"VNPAY\">VNPay</option>\r\n                          <option value=\"CARD\">Thẻ tín dụng/ghi nợ</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <label className=\"rb-terms\">\r\n                      <input type=\"checkbox\" style={{ marginTop:2 }} checked={bkAgree} onChange={e=>setBkAgree(e.target.checked)} />\r\n                      <span>Vui lòng đọc kĩ và đồng ý với điều khoản bằng cách đánh dấu vào ô bên cạnh</span>\r\n                    </label>\r\n                    <div className=\"rb-booking-actions\">\r\n                      <button type=\"button\" className=\"rb-btn outline\" onClick={()=>{ setBookingOpen(false); setBookingRoom(null); }}>Hủy</button>\r\n                      <button type=\"submit\" className=\"rb-btn primary\" disabled={!submitEnabled}>{bkLoading? 'Đang xử lý...' : 'Thanh toán'}</button>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n                <div className=\"rb-booking-note\">Cần nhiều phòng hoặc tùy chọn nâng cao? Vào giao diện hạng phòng để chọn nhiều phòng và phương thức thanh toán.</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {reviewsModal && (\r\n          <div className=\"rb-modal-backdrop\" onMouseDown={(e)=>{ if(e.target===e.currentTarget) closeReviews(); }}>\r\n            <div className=\"rb-modal\" onMouseDown={e=>e.stopPropagation()} style={{ maxWidth:860 }}>\r\n              <button className=\"rb-modal-close\" onClick={closeReviews} aria-label=\"Đóng\">×</button>\r\n              <h3 style={{ marginTop:0, marginBottom:10, fontSize:'1.05rem' }}>Đánh giá phòng {reviewsModal.roomNumber || reviewsModal.roomType}</h3>\r\n              {reviewsLoading && <div className=\"rb-muted\" style={{ fontSize:'.75rem' }}>Đang tải đánh giá...</div>}\r\n              {reviewsError && <div style={{ color:'#b42318', fontSize:'.75rem' }}>{reviewsError}</div>}\r\n              {(!reviewsLoading && !reviewsError) && (\r\n                <div style={{ marginTop:6 }}>\r\n                  <div style={{ fontSize:'.8rem', marginBottom:10 }}>\r\n                    Trung bình: <strong>{(reviewsData?.avgRating||0).toFixed(1)}</strong>/5 ⭐\r\n                  </div>\r\n                  <div style={{ maxHeight:380, overflow:'auto', paddingRight:4, border:'1px solid #e5e7eb', borderRadius:8 }}>\r\n                    {(!reviewsData || !reviewsData.reviews?.length) && <div className=\"rb-muted\" style={{ padding:12, fontSize:'.75rem' }}>Chưa có đánh giá.</div>}\r\n                    {reviewsData?.reviews?.map(rv => (\r\n                      <div key={rv.id} style={{ padding:'10px 12px', borderBottom:'1px solid #eef2f6', fontSize:'.75rem', lineHeight:1.35 }}>\r\n                        <div style={{ display:'flex', justifyContent:'space-between', gap:12 }}>\r\n                          <strong>{rv.customer}</strong>\r\n                          <span style={{ color:'#f59e0b', fontWeight:600 }}>{rv.rating.toFixed(1)}⭐</span>\r\n                        </div>\r\n                        <div style={{ marginTop:4 }}>{rv.comment || <span className=\"rb-muted\">(Không có nội dung)</span>}</div>\r\n                        <div style={{ marginTop:4, fontSize:'.65rem', color:'#64748b' }}>{new Date(rv.createdAt).toLocaleString('vi-VN')}</div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <div style={{ marginTop:18, textAlign:'right' }}>\r\n                <button className=\"rb-btn outline\" onClick={closeReviews}>Đóng</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}