{"ast":null,"code":"import _objectSpread from\"D:/DA_TichHop/HMS_AI Hotel/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from'react';import'./HomePage.css';import{authHeaders,getUserRole}from'./auth';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const STATUS_FILTERS=[{key:'',label:'Tất cả trạng thái'},{key:'success',label:'Thành công'},{key:'confirmed',label:'Đã xác nhận'},{key:'pending',label:'Chờ xác nhận'},{key:'canceled',label:'Đã hủy'}];// Color helper & badge renderer\nfunction bookingStatusClass(key){const v=String(key||'').toLowerCase();if(v==='success')return'status-badge status-green';if(v==='canceled')return'status-badge status-red';if(v==='pending'||v==='confirmed')return'status-badge status-yellow';return'status-badge';}function renderStatusBadge(k){const v=String(k||'').toLowerCase();let label='—';if(v==='success')label='Thành công';else if(v==='confirmed')label='Đã xác nhận';else if(v==='pending')label='Chờ xác nhận';else if(v==='canceled')label='Đã hủy';return/*#__PURE__*/_jsx(\"span\",{className:bookingStatusClass(v),children:label});}export default function AdminBookings(_ref){let{isModal,onClose,highlightBookingId}=_ref;const[q,setQ]=useState('');const[status,setStatus]=useState('');const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[detail,setDetail]=useState(null);// Update booking status helper (optimistic)\nconst updateStatus=async(booking,nextStatusKey)=>{const id=booking.bookingId;const prev=booking.statusKey;// optimistic\nsetItems(list=>list.map(b=>b.bookingId===id?_objectSpread(_objectSpread({},b),{},{statusKey:nextStatusKey}):b));try{const res=await fetch(\"/api/admin/bookings/\".concat(id,\"/status\"),{method:'PUT',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({status:nextStatusKey})});if(!res.ok)throw new Error('Cập nhật trạng thái thất bại');}catch(e){// revert\nsetItems(list=>list.map(b=>b.bookingId===id?_objectSpread(_objectSpread({},b),{},{statusKey:prev}):b));alert(e.message||'Lỗi cập nhật');}};const fetchList=async()=>{setLoading(true);setError('');try{const url=new URL('/api/admin/bookings',window.location.origin);if(q)url.searchParams.set('q',q);if(status)url.searchParams.set('status',status);const res=await fetch(url,{headers:_objectSpread({},authHeaders())});if(!res.ok)throw new Error('Không tải được danh sách đặt phòng');const j=await res.json();setItems(Array.isArray(j.items)?j.items:[]);}catch(e){setError(e.message||'Lỗi tải dữ liệu');setItems([]);}finally{setLoading(false);}};useEffect(()=>{fetchList();},[]);// When highlightBookingId is provided, wait for items to load then scroll to and highlight it\nuseEffect(()=>{if(!highlightBookingId||items.length===0)return;// find the DOM row by data-booking-id\nsetTimeout(()=>{try{const el=document.querySelector(\"[data-booking-id=\\\"\".concat(highlightBookingId,\"\\\"]\"));if(el&&el.scrollIntoView){el.scrollIntoView({behavior:'smooth',block:'center'});el.classList.add('highlight-booking');setTimeout(()=>{try{el.classList.remove('highlight-booking');}catch(_unused){}},5000);}}catch(e){}},300);},[highlightBookingId,items]);const debounceRef=useRef(null);useEffect(()=>{if(debounceRef.current)clearTimeout(debounceRef.current);debounceRef.current=setTimeout(fetchList,250);return()=>{if(debounceRef.current)clearTimeout(debounceRef.current);};},[q,status]);return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-rooms\",style:{padding:isModal?0:'80px 12px 20px'},children:[!isModal&&/*#__PURE__*/_jsx(\"header\",{className:\"home-header\",style:{position:'sticky',top:0},children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-header-left\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"logo\",className:\"home-header-logo\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"home-header-title home-header-home-btn\",children:\"TRANG CH\\u1EE6\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-table\",style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"home-rooms-title\",style:{textAlign:'left',marginTop:0},children:\"Qu\\u1EA3n l\\xFD \\u0111\\u1EB7t ph\\xF2ng\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>e.preventDefault(),className:\"au-toolbar\",style:{gridTemplateColumns:'1fr auto auto'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"au-group\",children:/*#__PURE__*/_jsx(\"input\",{className:\"au-input\",placeholder:\"T\\xECm ki\\u1EBFm kh\\xE1ch h\\xE0ng...\",value:q,onChange:e=>setQ(e.target.value)})}),/*#__PURE__*/_jsx(\"select\",{className:\"ph-btn ph-btn--secondary\",value:status,onChange:e=>setStatus(e.target.value),style:{height:36},children:STATUS_FILTERS.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.key,children:s.label},s.key))}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn au-add-btn\",type:\"button\",onClick:()=>alert('Chức năng thêm đặt phòng sẽ sớm có!'),children:\"+ Th\\xEAm \\u0111\\u1EB7t ph\\xF2ng\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"\\u0110ang t\\u1EA3i...\"}):error?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318'},children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ph-tr ph-head\",style:{gridTemplateColumns:'130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"M\\xE3 \\u0111\\u01A1n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Kh\\xE1ch h\\xE0ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"S\\u0110T\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"S\\u1ED1 ph\\xF2ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Lo\\u1EA1i ph\\xF2ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Ng\\xE0y nh\\u1EADn\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Ng\\xE0y tr\\u1EA3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"})]}),items.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",style:{padding:12,color:'#666'},children:\"Kh\\xF4ng c\\xF3 \\u0111\\u1EB7t ph\\xF2ng n\\xE0o.\"}):items.map(it=>/*#__PURE__*/_jsxs(\"div\",{\"data-booking-id\":it.bookingId,className:\"ph-tr\",style:{gridTemplateColumns:'130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.code}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.customerName||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.customerPhone||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.roomName||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.roomType||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:fmtDate(it.checkIn)}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:fmtDate(it.checkOut)}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:renderStatusBadge(it.statusKey)}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",style:{display:'flex',gap:6,whiteSpace:'nowrap'},children:(()=>{const st=String(it.statusKey||'').toLowerCase();const isPending=st==='pending';const disabled=!isPending;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn booking-action-btn \".concat(isPending?'booking-action--active':'booking-action--disabled'),type:\"button\",disabled:disabled,onClick:async()=>{if(!isPending)return;try{const r=await fetch(\"/api/payments/\".concat(it.bookingId,\"/confirm\"),{method:'PUT',headers:_objectSpread(_objectSpread({},authHeaders()),{},{'Content-Type':'application/json'})});if(!r.ok){const t=await r.text();throw new Error(t);}setItems(list=>list.map(b=>b.bookingId===it.bookingId?_objectSpread(_objectSpread({},b),{},{statusKey:'success'}):b));}catch(e){alert(e.message||'Lỗi xác nhận');}},title:isPending?'Xác nhận thanh toán':'Đã xử lý',children:\"X\\xE1c nh\\u1EADn\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn booking-action-btn \".concat(isPending?'booking-action--active':'booking-action--disabled'),type:\"button\",disabled:disabled,onClick:async()=>{if(!isPending)return;if(!window.confirm('Hủy đơn đặt phòng này?'))return;try{const r=await fetch(\"/api/payments/\".concat(it.bookingId,\"/admin-cancel\"),{method:'PUT',headers:_objectSpread(_objectSpread({},authHeaders()),{},{'Content-Type':'application/json'})});if(!r.ok){const t=await r.text();throw new Error(t);}setItems(list=>list.map(b=>b.bookingId===it.bookingId?_objectSpread(_objectSpread({},b),{},{statusKey:'canceled'}):b));}catch(e){alert(e.message||'Lỗi hủy');}},title:isPending?'Hủy đơn & hoàn 100%':'Đã xử lý',children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",type:\"button\",onClick:()=>setDetail(it),children:\"Chi ti\\u1EBFt\"})]});})()})]},it.bookingId))]})]}),detail&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-overlay\",onMouseDown:e=>{if(e.target===e.currentTarget)setDetail(null);},children:/*#__PURE__*/_jsx(\"div\",{className:\"profile-modal\",onMouseDown:e=>e.stopPropagation(),style:{width:720,maxWidth:'98%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"ph-table\",style:{padding:16},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:\"Chi ti\\u1EBFt \\u0111\\u1EB7t ph\\xF2ng\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,display:'grid',gridTemplateColumns:'1fr 1fr',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"M\\xE3 \\u0111\\u01A1n:\"}),\" \",detail.code]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Tr\\u1EA1ng th\\xE1i:\"}),\" \",renderStatus(detail.statusKey)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Kh\\xE1ch h\\xE0ng:\"}),\" \",detail.customerName||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"S\\u0110T:\"}),\" \",detail.customerPhone||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Email:\"}),\" \",detail.customerEmail||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Kh\\xE1ch s\\u1EA1n:\"}),\" \",detail.hotelName||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ph\\xF2ng:\"}),\" \",detail.roomName||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Lo\\u1EA1i ph\\xF2ng:\"}),\" \",detail.roomType||'—']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ng\\xE0y nh\\u1EADn:\"}),\" \",fmtDate(detail.checkIn)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Ng\\xE0y tr\\u1EA3:\"}),\" \",fmtDate(detail.checkOut)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"S\\u1ED1 \\u0111\\xEAm:\"}),\" \",detail.nights]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Kh\\xE1ch:\"}),\" \",detail.guests]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"T\\u1ED5ng ti\\u1EC1n:\"}),\" \",Number(detail.total||0).toLocaleString('vi-VN'),\" VN\\u0110\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Thanh to\\xE1n:\"}),\" \",detail.method||'—']})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12,textAlign:'right'},children:/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn\",onClick:()=>setDetail(null),children:\"\\u0110\\xF3ng\"})})]})})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\\n        .status-red { background:#ffe8e6; color:#b42318; border-color:#f5b5ae; }\\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\\n        .booking-action-btn { min-width:82px; font-weight:700; letter-spacing:.3px; position:relative; overflow:hidden; }\\n        .booking-action--active {\\n          background:linear-gradient(135deg,#ffcc33,#ffe27a 55%,#fff3c1);\\n          color:#222;\\n          border:1px solid #f6c23e;\\n          box-shadow:0 2px 4px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.4) inset;\\n          transition: background .25s ease, box-shadow .25s ease, transform .15s ease;\\n        }\\n        .booking-action--active:hover { background:linear-gradient(135deg,#ffbd00,#ffd659 55%,#ffeaa4); box-shadow:0 4px 10px rgba(0,0,0,.18); }\\n        .booking-action--active:active { transform:translateY(1px); }\\n        .booking-action--active:focus-visible { outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 3px rgba(255,193,7,.55); }\\n        .booking-action--disabled {\\n          background:#d9d9d9;\\n          color:#555;\\n          cursor:not-allowed;\\n          border:1px solid #d0d0d0;\\n          box-shadow:0 1px 2px rgba(0,0,0,.06) inset, 0 0 0 1px #ececec;\\n          text-shadow:0 1px 0 rgba(255,255,255,.55);\\n        }\\n        .booking-action--disabled:hover { background:#d9d9d9; }\\n        .booking-action--disabled:focus-visible { outline:none; }\\n        .highlight-booking { box-shadow: 0 0 0 3px rgba(10,103,193,0.18); background: rgba(10,103,193,0.04); transition: background .4s ease; }\\n      \"})]});}function renderStatus(k){const v=String(k||'').toLowerCase();if(v==='success')return'Thành công';if(v==='confirmed')return'Đã xác nhận';if(v==='pending')return'Chờ xác nhận';if(v==='canceled')return'Đã hủy';return'—';}function fmtDate(d){if(!d)return'—';const dt=new Date(d);const dd=String(dt.getDate()).padStart(2,'0');const mm=String(dt.getMonth()+1).padStart(2,'0');const yy=dt.getFullYear();return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yy);}","map":{"version":3,"names":["React","useEffect","useRef","useState","authHeaders","getUserRole","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","STATUS_FILTERS","key","label","bookingStatusClass","v","String","toLowerCase","renderStatusBadge","k","className","children","AdminBookings","_ref","isModal","onClose","highlightBookingId","q","setQ","status","setStatus","items","setItems","loading","setLoading","error","setError","detail","setDetail","updateStatus","booking","nextStatusKey","id","bookingId","prev","statusKey","list","map","b","_objectSpread","res","fetch","concat","method","headers","body","JSON","stringify","ok","Error","e","alert","message","fetchList","url","URL","window","location","origin","searchParams","set","j","json","Array","isArray","length","setTimeout","el","document","querySelector","scrollIntoView","behavior","block","classList","add","remove","_unused","debounceRef","current","clearTimeout","style","padding","position","top","src","alt","href","textAlign","marginTop","onSubmit","preventDefault","gridTemplateColumns","placeholder","value","onChange","target","height","s","type","onClick","color","it","code","customerName","customerPhone","roomName","roomType","fmtDate","checkIn","checkOut","display","gap","whiteSpace","st","isPending","disabled","r","t","text","title","confirm","onMouseDown","currentTarget","stopPropagation","width","maxWidth","margin","renderStatus","customerEmail","hotelName","nights","guests","Number","total","toLocaleString","d","dt","Date","dd","getDate","padStart","mm","getMonth","yy","getFullYear"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminBookings.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport './HomePage.css';\r\nimport { authHeaders, getUserRole } from './auth';\r\n\r\nconst STATUS_FILTERS = [\r\n  { key: '', label: 'Tất cả trạng thái' },\r\n  { key: 'success', label: 'Thành công' },\r\n  { key: 'confirmed', label: 'Đã xác nhận' },\r\n  { key: 'pending', label: 'Chờ xác nhận' },\r\n  { key: 'canceled', label: 'Đã hủy' },\r\n];\r\n\r\n// Color helper & badge renderer\r\nfunction bookingStatusClass(key){\r\n  const v = String(key||'').toLowerCase();\r\n  if(v==='success') return 'status-badge status-green';\r\n  if(v==='canceled') return 'status-badge status-red';\r\n  if(v==='pending' || v==='confirmed') return 'status-badge status-yellow';\r\n  return 'status-badge';\r\n}\r\nfunction renderStatusBadge(k){\r\n  const v = String(k||'').toLowerCase();\r\n  let label = '—';\r\n  if (v === 'success') label = 'Thành công';\r\n  else if (v === 'confirmed') label = 'Đã xác nhận';\r\n  else if (v === 'pending') label = 'Chờ xác nhận';\r\n  else if (v === 'canceled') label = 'Đã hủy';\r\n  return <span className={bookingStatusClass(v)}>{label}</span>;\r\n}\r\n\r\nexport default function AdminBookings({ isModal, onClose, highlightBookingId }) {\r\n  const [q, setQ] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [detail, setDetail] = useState(null);\r\n\r\n  // Update booking status helper (optimistic)\r\n  const updateStatus = async (booking, nextStatusKey) => {\r\n    const id = booking.bookingId;\r\n    const prev = booking.statusKey;\r\n    // optimistic\r\n    setItems(list => list.map(b => b.bookingId===id ? { ...b, statusKey: nextStatusKey } : b));\r\n    try {\r\n      const res = await fetch(`/api/admin/bookings/${id}/status`, {\r\n        method:'PUT',\r\n        headers:{ 'Content-Type':'application/json', ...authHeaders() },\r\n        body: JSON.stringify({ status: nextStatusKey })\r\n      });\r\n      if(!res.ok) throw new Error('Cập nhật trạng thái thất bại');\r\n    } catch(e){\r\n      // revert\r\n      setItems(list => list.map(b => b.bookingId===id ? { ...b, statusKey: prev } : b));\r\n      alert(e.message || 'Lỗi cập nhật');\r\n    }\r\n  };\r\n\r\n  const fetchList = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const url = new URL('/api/admin/bookings', window.location.origin);\r\n      if (q) url.searchParams.set('q', q);\r\n      if (status) url.searchParams.set('status', status);\r\n  const res = await fetch(url, { headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Không tải được danh sách đặt phòng');\r\n      const j = await res.json();\r\n      setItems(Array.isArray(j.items) ? j.items : []);\r\n    } catch (e) { setError(e.message || 'Lỗi tải dữ liệu'); setItems([]); }\r\n    finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => { fetchList(); }, []);\r\n  // When highlightBookingId is provided, wait for items to load then scroll to and highlight it\r\n  useEffect(() => {\r\n    if (!highlightBookingId || items.length === 0) return;\r\n    // find the DOM row by data-booking-id\r\n    setTimeout(() => {\r\n      try {\r\n        const el = document.querySelector(`[data-booking-id=\\\"${highlightBookingId}\\\"]`);\r\n        if (el && el.scrollIntoView) {\r\n          el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n          el.classList.add('highlight-booking');\r\n          setTimeout(() => { try { el.classList.remove('highlight-booking'); } catch {} }, 5000);\r\n        }\r\n      } catch (e) {}\r\n    }, 300);\r\n  }, [highlightBookingId, items]);\r\n  const debounceRef = useRef(null);\r\n  useEffect(() => {\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(fetchList, 250);\r\n    return () => { if (debounceRef.current) clearTimeout(debounceRef.current); };\r\n  }, [q, status]);\r\n\r\n  return (\r\n    <div className=\"admin-rooms\" style={{ padding: isModal ? 0 : '80px 12px 20px' }}>\r\n      {!isModal && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <a href=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</a>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Quản lý đặt phòng</h2>\r\n        <form onSubmit={(e)=>e.preventDefault()} className=\"au-toolbar\" style={{ gridTemplateColumns: '1fr auto auto' }}>\r\n          <div className=\"au-group\">\r\n            <input className=\"au-input\" placeholder=\"Tìm kiếm khách hàng...\" value={q} onChange={e=>setQ(e.target.value)} />\r\n          </div>\r\n          <select className=\"ph-btn ph-btn--secondary\" value={status} onChange={e=>setStatus(e.target.value)} style={{ height: 36 }}>\r\n            {STATUS_FILTERS.map(s => <option key={s.key} value={s.key}>{s.label}</option>)}\r\n          </select>\r\n          <button className=\"ph-btn au-add-btn\" type=\"button\" onClick={()=>alert('Chức năng thêm đặt phòng sẽ sớm có!')}>+ Thêm đặt phòng</button>\r\n        </form>\r\n\r\n        {loading ? <div style={{ color:'#666' }}>Đang tải...</div> : error ? <div style={{ color:'#b42318' }}>{error}</div> : (\r\n          <div>\r\n            <div className=\"ph-tr ph-head\" style={{ gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr' }}>\r\n              <div className=\"ph-td\">Mã đơn</div>\r\n              <div className=\"ph-td\">Khách hàng</div>\r\n              <div className=\"ph-td\">SĐT</div>\r\n              <div className=\"ph-td\">Số phòng</div>\r\n              <div className=\"ph-td\">Loại phòng</div>\r\n              <div className=\"ph-td\">Ngày nhận</div>\r\n              <div className=\"ph-td\">Ngày trả</div>\r\n              <div className=\"ph-td\">Trạng thái</div>\r\n              <div className=\"ph-td\">Hành động</div>\r\n            </div>\r\n            {items.length === 0 ? (\r\n              <div className=\"ph-td\" style={{ padding: 12, color: '#666' }}>Không có đặt phòng nào.</div>\r\n            ) : items.map(it => (\r\n              <div key={it.bookingId} data-booking-id={it.bookingId} className=\"ph-tr\" style={{ gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr' }}>\r\n                <div className=\"ph-td\">{it.code}</div>\r\n                <div className=\"ph-td\">{it.customerName || '—'}</div>\r\n                <div className=\"ph-td\">{it.customerPhone || '—'}</div>\r\n                <div className=\"ph-td\">{it.roomName || '—'}</div>\r\n                <div className=\"ph-td\">{it.roomType || '—'}</div>\r\n                <div className=\"ph-td\">{fmtDate(it.checkIn)}</div>\r\n                <div className=\"ph-td\">{fmtDate(it.checkOut)}</div>\r\n                <div className=\"ph-td\">{renderStatusBadge(it.statusKey)}</div>\r\n                <div className=\"ph-td\" style={{ display:'flex', gap:6, whiteSpace:'nowrap' }}>\r\n                  {(() => {\r\n                    const st = String(it.statusKey||'').toLowerCase();\r\n                    const isPending = st === 'pending';\r\n                    const disabled = !isPending;\r\n                    return (\r\n                      <>\r\n                        <button\r\n                          className={`ph-btn booking-action-btn ${isPending? 'booking-action--active':'booking-action--disabled'}`}\r\n                          type=\"button\"\r\n                          disabled={disabled}\r\n                          onClick={async()=>{\r\n                            if(!isPending) return;\r\n                            try {\r\n                              const r = await fetch(`/api/payments/${it.bookingId}/confirm`, { method:'PUT', headers:{ ...authHeaders(), 'Content-Type':'application/json' } });\r\n                              if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                              setItems(list => list.map(b => b.bookingId===it.bookingId ? { ...b, statusKey:'success' } : b));\r\n                            } catch(e){ alert(e.message||'Lỗi xác nhận'); }\r\n                          }}\r\n                          title={isPending? 'Xác nhận thanh toán' : 'Đã xử lý'}\r\n                        >Xác nhận</button>\r\n                        <button\r\n                          className={`ph-btn booking-action-btn ${isPending? 'booking-action--active':'booking-action--disabled'}`}\r\n                          type=\"button\"\r\n                          disabled={disabled}\r\n                          onClick={async()=>{\r\n                            if(!isPending) return;\r\n                            if(!window.confirm('Hủy đơn đặt phòng này?')) return;\r\n                            try {\r\n                              const r = await fetch(`/api/payments/${it.bookingId}/admin-cancel`, { method:'PUT', headers:{ ...authHeaders(), 'Content-Type':'application/json' } });\r\n                              if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                              setItems(list => list.map(b => b.bookingId===it.bookingId ? { ...b, statusKey:'canceled' } : b));\r\n                            } catch(e){ alert(e.message||'Lỗi hủy'); }\r\n                          }}\r\n                          title={isPending? 'Hủy đơn & hoàn 100%' : 'Đã xử lý'}\r\n                        >Hủy</button>\r\n                        <button className=\"ph-btn ph-btn--secondary\" type=\"button\" onClick={()=>setDetail(it)}>Chi tiết</button>\r\n                      </>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {detail && (\r\n        <div className=\"profile-overlay\" onMouseDown={(e)=>{ if (e.target===e.currentTarget) setDetail(null); }}>\r\n          <div className=\"profile-modal\" onMouseDown={(e)=>e.stopPropagation()} style={{ width: 720, maxWidth:'98%' }}>\r\n            <div className=\"ph-table\" style={{ padding: 16 }}>\r\n              <h3 style={{ margin: 0 }}>Chi tiết đặt phòng</h3>\r\n              <div style={{ marginTop: 10, display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 8 }}>\r\n                <div><b>Mã đơn:</b> {detail.code}</div>\r\n                <div><b>Trạng thái:</b> {renderStatus(detail.statusKey)}</div>\r\n                <div><b>Khách hàng:</b> {detail.customerName || '—'}</div>\r\n                <div><b>SĐT:</b> {detail.customerPhone || '—'}</div>\r\n                <div><b>Email:</b> {detail.customerEmail || '—'}</div>\r\n                <div><b>Khách sạn:</b> {detail.hotelName || '—'}</div>\r\n                <div><b>Phòng:</b> {detail.roomName || '—'}</div>\r\n                <div><b>Loại phòng:</b> {detail.roomType || '—'}</div>\r\n                <div><b>Ngày nhận:</b> {fmtDate(detail.checkIn)}</div>\r\n                <div><b>Ngày trả:</b> {fmtDate(detail.checkOut)}</div>\r\n                <div><b>Số đêm:</b> {detail.nights}</div>\r\n                <div><b>Khách:</b> {detail.guests}</div>\r\n                <div><b>Tổng tiền:</b> {Number(detail.total || 0).toLocaleString('vi-VN')} VNĐ</div>\r\n                <div><b>Thanh toán:</b> {detail.method || '—'}</div>\r\n              </div>\r\n              <div style={{ marginTop: 12, textAlign: 'right' }}>\r\n                <button className=\"ph-btn\" onClick={()=>setDetail(null)}>Đóng</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <style>{`\r\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\r\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\r\n        .status-red { background:#ffe8e6; color:#b42318; border-color:#f5b5ae; }\r\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\r\n        .booking-action-btn { min-width:82px; font-weight:700; letter-spacing:.3px; position:relative; overflow:hidden; }\r\n        .booking-action--active {\r\n          background:linear-gradient(135deg,#ffcc33,#ffe27a 55%,#fff3c1);\r\n          color:#222;\r\n          border:1px solid #f6c23e;\r\n          box-shadow:0 2px 4px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.4) inset;\r\n          transition: background .25s ease, box-shadow .25s ease, transform .15s ease;\r\n        }\r\n        .booking-action--active:hover { background:linear-gradient(135deg,#ffbd00,#ffd659 55%,#ffeaa4); box-shadow:0 4px 10px rgba(0,0,0,.18); }\r\n        .booking-action--active:active { transform:translateY(1px); }\r\n        .booking-action--active:focus-visible { outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 3px rgba(255,193,7,.55); }\r\n        .booking-action--disabled {\r\n          background:#d9d9d9;\r\n          color:#555;\r\n          cursor:not-allowed;\r\n          border:1px solid #d0d0d0;\r\n          box-shadow:0 1px 2px rgba(0,0,0,.06) inset, 0 0 0 1px #ececec;\r\n          text-shadow:0 1px 0 rgba(255,255,255,.55);\r\n        }\r\n        .booking-action--disabled:hover { background:#d9d9d9; }\r\n        .booking-action--disabled:focus-visible { outline:none; }\r\n        .highlight-booking { box-shadow: 0 0 0 3px rgba(10,103,193,0.18); background: rgba(10,103,193,0.04); transition: background .4s ease; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction renderStatus(k) {\r\n  const v = String(k||'').toLowerCase();\r\n  if (v === 'success') return 'Thành công';\r\n  if (v === 'confirmed') return 'Đã xác nhận';\r\n  if (v === 'pending') return 'Chờ xác nhận';\r\n  if (v === 'canceled') return 'Đã hủy';\r\n  return '—';\r\n}\r\n\r\nfunction fmtDate(d){ if(!d) return '—'; const dt=new Date(d); const dd=String(dt.getDate()).padStart(2,'0'); const mm=String(dt.getMonth()+1).padStart(2,'0'); const yy=dt.getFullYear(); return `${dd}/${mm}/${yy}`; }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}