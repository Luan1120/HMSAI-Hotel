{"ast":null,"code":"import React,{useEffect,useState,useCallback,useRef}from'react';import'./RoomsBrowse.css';// reuse rb-* styles\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ServicesBrowse(_ref){let{inline=false,onClose}=_ref;const[q,setQ]=useState('');const[hotelId,setHotelId]=useState('');const[status,setStatus]=useState('');const[hotels,setHotels]=useState([]);const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[detail,setDetail]=useState(null);const[detailOpen,setDetailOpen]=useState(false);const[orderService,setOrderService]=useState(null);const[orderQty,setOrderQty]=useState(1);const[orderNote,setOrderNote]=useState('');const[orderLoading,setOrderLoading]=useState(false);const[orderMsg,setOrderMsg]=useState('');const userEmail=(()=>{try{const u=JSON.parse(localStorage.getItem('hmsUser')||'null');return(u===null||u===void 0?void 0:u.email)||'';}catch(_unused){return'';}})();const qtyRef=useRef(null);const loadHotels=useCallback(async()=>{try{const r=await fetch('/api/hotels');if(!r.ok)throw new Error();const list=await r.json();if(Array.isArray(list))setHotels(list);}catch(_unused2){setHotels([]);}},[]);const loadServices=useCallback(async()=>{setLoading(true);setError('');try{const url=new URL('/api/services',window.location.origin);if(q)url.searchParams.set('q',q);if(hotelId)url.searchParams.set('hotelId',hotelId);const r=await fetch(url.toString());if(!r.ok)throw new Error('Không tải được dịch vụ');const j=await r.json();const list=Array.isArray(j.items)?j.items:[];const filtered=status?list.filter(s=>(s.status||'').toLowerCase()===status.toLowerCase()):list;setItems(filtered);}catch(e){setError(e.message||'Lỗi tải dữ liệu');setItems([]);}finally{setLoading(false);}},[q,hotelId,status]);useEffect(()=>{loadHotels();},[loadHotels]);useEffect(()=>{loadServices();},[loadServices]);const openDetail=svc=>{setDetail(svc);setDetailOpen(true);};const closeDetail=()=>{setDetailOpen(false);setDetail(null);};useEffect(()=>{const esc=e=>{if(e.key==='Escape'){if(orderService){setOrderService(null);}else if(detailOpen)closeDetail();else if(onClose&&inline)onClose();}};window.addEventListener('keydown',esc);return()=>window.removeEventListener('keydown',esc);},[detailOpen,inline,onClose,orderService]);useEffect(()=>{if(orderService&&qtyRef.current){try{qtyRef.current.focus();}catch(_unused3){}}},[orderService]);const statusBadge=s=>{const v=String(s||'').toLowerCase();if(v==='active')return/*#__PURE__*/_jsx(\"span\",{className:\"rb-badge available\",children:\"Ho\\u1EA1t \\u0111\\u1ED9ng\"});if(v==='inactive')return/*#__PURE__*/_jsx(\"span\",{className:\"rb-badge maintenance\",children:\"T\\u1EA1m d\\u1EEBng\"});return/*#__PURE__*/_jsx(\"span\",{className:\"rb-badge available\",children:\"Ho\\u1EA1t \\u0111\\u1ED9ng\"});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:inline?'8px 14px 24px':'24px 24px 40px'},children:[inline&&/*#__PURE__*/_jsx(\"button\",{className:\"rb-btn gradient\",style:{marginBottom:14,borderRadius:28},onClick:()=>onClose&&onClose(),children:\"\\u2190 Quay l\\u1EA1i\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-overlay-animate rb-panel\",onMouseDown:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rb-heading-wrap\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"rb-heading\",children:\"Danh s\\xE1ch d\\u1ECBch v\\u1EE5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-total-count\",children:[\"T\\u1ED5ng: \",items.length,\" \",loading&&/*#__PURE__*/_jsx(\"span\",{className:\"rb-muted\",style:{fontWeight:400},children:\"(\\u0110ang t\\u1EA3i...)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-filters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rb-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\u1EEB kh\\xF3a\"}),/*#__PURE__*/_jsx(\"input\",{className:\"rb-input\",value:q,onChange:e=>setQ(e.target.value),placeholder:\"T\\xEAn / m\\xF4 t\\u1EA3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Kh\\xE1ch s\\u1EA1n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-select-wrap\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"rb-select\",value:hotelId,onChange:e=>setHotelId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3\"}),hotels.map(h=>/*#__PURE__*/_jsx(\"option\",{value:h.id,children:h.name},h.id))]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-select-wrap\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"rb-select\",value:status,onChange:e=>setStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\u1EA5t c\\u1EA3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Active\",children:\"Ho\\u1EA1t \\u0111\\u1ED9ng\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Inactive\",children:\"T\\u1EA1m d\\u1EEBng\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-table-shell\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rb-table-head\",style:{gridTemplateColumns:'90px 1fr 1.5fr 120px 140px 120px 120px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"Icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"Gi\\xE1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"Kh\\xE1ch s\\u1EA1n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"\\u0110\\u1EB7t\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-table-body\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"rb-row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"\\u0110ang t\\u1EA3i...\"})}):error?/*#__PURE__*/_jsx(\"div\",{className:\"rb-row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",style:{color:'#b42318'},children:error})}):items.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"rb-row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:\"Kh\\xF4ng c\\xF3 d\\u1ECBch v\\u1EE5.\"})}):items.map((s,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"rb-row\",style:{gridTemplateColumns:'90px 1fr 1.5fr 120px 140px 120px 120px',animationDelay:\"\".concat(Math.min(idx,12)*30,\"ms\")},children:[/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:s.icon?/*#__PURE__*/_jsx(\"img\",{src:s.icon,alt:\"icon\",style:{width:54,height:54,objectFit:'cover',borderRadius:10}}):/*#__PURE__*/_jsx(\"div\",{className:\"rb-img-wrap\",style:{width:54,height:54,display:'flex',alignItems:'center',justifyContent:'center',fontSize:11},children:\"No icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",style:{fontWeight:600},children:/*#__PURE__*/_jsx(\"button\",{className:\"rb-btn outline\",style:{padding:'4px 6px',minHeight:32,fontSize:'.65rem'},onClick:()=>openDetail(s),children:s.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell rb-desc\",title:s.description,children:s.description||'—'}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-cell\",style:{fontSize:13},children:[Number(s.price||0).toLocaleString('vi-VN'),\" VND\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:s.hotelName||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:statusBadge(s.status)}),/*#__PURE__*/_jsx(\"div\",{className:\"rb-cell\",children:/*#__PURE__*/_jsx(\"button\",{className:\"rb-btn primary\",disabled:String(s.status||'').toLowerCase()==='inactive',onClick:()=>{setOrderService(s);setOrderQty(1);setOrderNote('');setOrderMsg('');},style:{width:'100%'},children:\"\\u0110\\u1EB7t\"})})]},s.id))})]})]}),detailOpen&&detail&&/*#__PURE__*/_jsx(\"div\",{className:\"rb-modal-backdrop\",onMouseDown:e=>{if(e.target===e.currentTarget)closeDetail();},children:/*#__PURE__*/_jsxs(\"div\",{className:\"rb-modal\",onMouseDown:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"rb-modal-close\",onClick:closeDetail,\"aria-label\":\"\\u0110\\xF3ng\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,marginBottom:14},children:detail.name}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:22,flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'0 0 200px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"rb-img-wrap\",style:{width:160,height:160,borderRadius:12,marginBottom:10},children:detail.icon?/*#__PURE__*/_jsx(\"img\",{src:detail.icon,alt:\"icon\"}):/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:13},children:\"No icon\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'.75rem',lineHeight:1.4},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gi\\xE1:\"}),\" \",Number(detail.price||0).toLocaleString('vi-VN'),\" VND\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tr\\u1EA1ng th\\xE1i:\"}),\" \",statusBadge(detail.status)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Kh\\xE1ch s\\u1EA1n:\"}),\" \",detail.hotelName||'—']})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:'1 1 300px',minWidth:250},children:/*#__PURE__*/_jsx(\"p\",{style:{whiteSpace:'pre-wrap',lineHeight:1.5,fontSize:'.8rem'},children:detail.description||'Không có mô tả.'})})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:20,textAlign:'right'},children:/*#__PURE__*/_jsx(\"button\",{className:\"rb-btn outline\",onClick:closeDetail,children:\"\\u0110\\xF3ng\"})})]})}),orderService&&/*#__PURE__*/_jsx(\"div\",{className:\"rb-modal-backdrop\",onMouseDown:e=>{if(e.target===e.currentTarget)setOrderService(null);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"rb-modal\",onMouseDown:e=>e.stopPropagation(),style:{maxWidth:520},children:[/*#__PURE__*/_jsx(\"button\",{className:\"rb-modal-close\",onClick:()=>setOrderService(null),\"aria-label\":\"\\u0110\\xF3ng\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,marginBottom:14,fontSize:'1.05rem'},children:\"\\u0110\\u1EB7t d\\u1ECBch v\\u1EE5\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'.75rem',marginBottom:12},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"D\\u1ECBch v\\u1EE5:\"}),\" \",orderService.name]}),!userEmail&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#fef3c7',border:'1px solid #fcd34d',padding:8,borderRadius:6,fontSize:'.7rem',marginBottom:12},children:\"B\\u1EA1n c\\u1EA7n \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 \\u0111\\u1EB7t d\\u1ECBch v\\u1EE5.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:async e=>{e.preventDefault();if(!userEmail)return;setOrderLoading(true);setOrderMsg('');try{const res=await fetch(\"/api/services/\".concat(orderService.id,\"/order\"),{method:'POST',headers:{'Content-Type':'application/json','x-user-email':userEmail},body:JSON.stringify({quantity:orderQty,note:orderNote})});if(!res.ok){const t=await res.json().catch(()=>({}));throw new Error(t.message||'Đặt thất bại');}setOrderMsg('Đặt thành công!');setTimeout(()=>{setOrderService(null);},900);}catch(err){setOrderMsg(err.message||'Lỗi đặt');}finally{setOrderLoading(false);}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rb-field\",style:{marginBottom:10},children:[/*#__PURE__*/_jsx(\"label\",{children:\"S\\u1ED1 l\\u01B0\\u1EE3ng\"}),/*#__PURE__*/_jsx(\"input\",{ref:qtyRef,type:\"number\",min:1,className:\"rb-input\",value:orderQty,onChange:e=>setOrderQty(Number(e.target.value)||1),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rb-field\",style:{marginBottom:14},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Ghi ch\\xFA\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"rb-input\",style:{minHeight:80,resize:'vertical'},value:orderNote,onChange:e=>setOrderNote(e.target.value),placeholder:\"Y\\xEAu c\\u1EA7u th\\xEAm (kh\\xF4ng b\\u1EAFt bu\\u1ED9c)\"})]}),orderMsg&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:10,fontSize:'.7rem',color:orderMsg.includes('thành công')?'#059669':'#b42318'},children:orderMsg}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'flex-end',gap:10},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"rb-btn outline\",onClick:()=>setOrderService(null),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"rb-btn primary\",disabled:orderLoading||!userEmail,children:orderLoading?'Đang gửi...':'Xác nhận'})]})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useCallback","useRef","jsx","_jsx","jsxs","_jsxs","ServicesBrowse","_ref","inline","onClose","q","setQ","hotelId","setHotelId","status","setStatus","hotels","setHotels","items","setItems","loading","setLoading","error","setError","detail","setDetail","detailOpen","setDetailOpen","orderService","setOrderService","orderQty","setOrderQty","orderNote","setOrderNote","orderLoading","setOrderLoading","orderMsg","setOrderMsg","userEmail","u","JSON","parse","localStorage","getItem","email","_unused","qtyRef","loadHotels","r","fetch","ok","Error","list","json","Array","isArray","_unused2","loadServices","url","URL","window","location","origin","searchParams","set","toString","j","filtered","filter","s","toLowerCase","e","message","openDetail","svc","closeDetail","esc","key","addEventListener","removeEventListener","current","focus","_unused3","statusBadge","v","String","className","children","style","padding","marginBottom","borderRadius","onClick","onMouseDown","stopPropagation","length","fontWeight","value","onChange","target","placeholder","map","h","id","name","gridTemplateColumns","color","idx","animationDelay","concat","Math","min","icon","src","alt","width","height","objectFit","display","alignItems","justifyContent","fontSize","minHeight","title","description","Number","price","toLocaleString","hotelName","disabled","currentTarget","marginTop","gap","flexWrap","flex","lineHeight","minWidth","whiteSpace","textAlign","maxWidth","background","border","onSubmit","preventDefault","res","method","headers","body","stringify","quantity","note","t","catch","setTimeout","err","ref","type","required","resize","includes"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/ServicesBrowse.js"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef } from 'react';\r\nimport './RoomsBrowse.css'; // reuse rb-* styles\r\n\r\nexport default function ServicesBrowse({ inline=false, onClose }) {\r\n  const [q, setQ] = useState('');\r\n  const [hotelId, setHotelId] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [hotels, setHotels] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [detail, setDetail] = useState(null);\r\n  const [detailOpen, setDetailOpen] = useState(false);\r\n  const [orderService, setOrderService] = useState(null);\r\n  const [orderQty, setOrderQty] = useState(1);\r\n  const [orderNote, setOrderNote] = useState('');\r\n  const [orderLoading, setOrderLoading] = useState(false);\r\n  const [orderMsg, setOrderMsg] = useState('');\r\n  const userEmail = (()=>{ try { const u = JSON.parse(localStorage.getItem('hmsUser')||'null'); return u?.email || ''; } catch { return ''; } })();\r\n  const qtyRef = useRef(null);\r\n\r\n  const loadHotels = useCallback(async ()=>{\r\n    try {\r\n      const r = await fetch('/api/hotels');\r\n      if(!r.ok) throw new Error();\r\n      const list = await r.json();\r\n      if(Array.isArray(list)) setHotels(list);\r\n    } catch { setHotels([]); }\r\n  }, []);\r\n\r\n  const loadServices = useCallback(async ()=>{\r\n    setLoading(true); setError('');\r\n    try {\r\n      const url = new URL('/api/services', window.location.origin);\r\n      if(q) url.searchParams.set('q', q);\r\n      if(hotelId) url.searchParams.set('hotelId', hotelId);\r\n      const r = await fetch(url.toString());\r\n      if(!r.ok) throw new Error('Không tải được dịch vụ');\r\n      const j = await r.json();\r\n      const list = Array.isArray(j.items)? j.items: [];\r\n      const filtered = status ? list.filter(s => (s.status||'').toLowerCase() === status.toLowerCase()) : list;\r\n      setItems(filtered);\r\n    } catch(e){ setError(e.message||'Lỗi tải dữ liệu'); setItems([]);} finally { setLoading(false); }\r\n  }, [q, hotelId, status]);\r\n\r\n  useEffect(()=>{ loadHotels(); }, [loadHotels]);\r\n  useEffect(()=>{ loadServices(); }, [loadServices]);\r\n\r\n  const openDetail = (svc) => { setDetail(svc); setDetailOpen(true); };\r\n  const closeDetail = () => { setDetailOpen(false); setDetail(null); };\r\n\r\n  useEffect(()=>{\r\n    const esc = e => { if(e.key==='Escape'){ if(orderService) { setOrderService(null); } else if(detailOpen) closeDetail(); else if(onClose && inline) onClose(); } };\r\n    window.addEventListener('keydown', esc); return ()=> window.removeEventListener('keydown', esc);\r\n  }, [detailOpen, inline, onClose, orderService]);\r\n\r\n  useEffect(()=>{ if(orderService && qtyRef.current){ try { qtyRef.current.focus(); } catch {} } }, [orderService]);\r\n\r\n  const statusBadge = (s) => {\r\n    const v = String(s||'').toLowerCase();\r\n    if(v==='active') return <span className=\"rb-badge available\">Hoạt động</span>;\r\n    if(v==='inactive') return <span className=\"rb-badge maintenance\">Tạm dừng</span>;\r\n    return <span className=\"rb-badge available\">Hoạt động</span>;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: inline? '8px 14px 24px' : '24px 24px 40px' }}>\r\n      {inline && <button className=\"rb-btn gradient\" style={{ marginBottom:14, borderRadius:28 }} onClick={()=>onClose&&onClose()}>&larr; Quay lại</button>}\r\n\r\n  <div className=\"rb-overlay-animate rb-panel\" onMouseDown={e=>e.stopPropagation()}>\r\n        <div className=\"rb-heading-wrap\">\r\n          <h2 className=\"rb-heading\">Danh sách dịch vụ</h2>\r\n          <div className=\"rb-total-count\">Tổng: {items.length} {loading && <span className=\"rb-muted\" style={{ fontWeight:400 }}>(Đang tải...)</span>}</div>\r\n        </div>\r\n        <div className=\"rb-filters\">\r\n          <div className=\"rb-field\">\r\n            <label>Từ khóa</label>\r\n            <input className=\"rb-input\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Tên / mô tả\" />\r\n          </div>\r\n          <div className=\"rb-field\">\r\n            <label>Khách sạn</label>\r\n            <div className=\"rb-select-wrap\">\r\n              <select className=\"rb-select\" value={hotelId} onChange={e=>setHotelId(e.target.value)}>\r\n                <option value=\"\">Tất cả</option>\r\n                {hotels.map(h => <option key={h.id} value={h.id}>{h.name}</option>)}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"rb-field\">\r\n            <label>Trạng thái</label>\r\n            <div className=\"rb-select-wrap\">\r\n              <select className=\"rb-select\" value={status} onChange={e=>setStatus(e.target.value)}>\r\n                <option value=\"\">Tất cả</option>\r\n                <option value=\"Active\">Hoạt động</option>\r\n                <option value=\"Inactive\">Tạm dừng</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"rb-table-shell\">\r\n          <div className=\"rb-table-head\" style={{ gridTemplateColumns:'90px 1fr 1.5fr 120px 140px 120px 120px' }}>\r\n            <div className=\"rb-cell\">Icon</div>\r\n            <div className=\"rb-cell\">Tên</div>\r\n            <div className=\"rb-cell\">Mô tả</div>\r\n            <div className=\"rb-cell\">Giá</div>\r\n            <div className=\"rb-cell\">Khách sạn</div>\r\n            <div className=\"rb-cell\">Trạng thái</div>\r\n            <div className=\"rb-cell\">Đặt</div>\r\n          </div>\r\n          <div className=\"rb-table-body\">\r\n            {loading ? <div className=\"rb-row\"><div className=\"rb-cell\">Đang tải...</div></div> : error ? <div className=\"rb-row\"><div className=\"rb-cell\" style={{ color:'#b42318' }}>{error}</div></div> : items.length===0 ? <div className=\"rb-row\"><div className=\"rb-cell\">Không có dịch vụ.</div></div> : items.map((s, idx) => (\r\n              <div key={s.id} className=\"rb-row\" style={{ gridTemplateColumns:'90px 1fr 1.5fr 120px 140px 120px 120px', animationDelay:`${Math.min(idx,12)*30}ms` }}>\r\n                <div className=\"rb-cell\">\r\n                  {s.icon ? <img src={s.icon} alt=\"icon\" style={{ width:54, height:54, objectFit:'cover', borderRadius:10 }} /> : <div className=\"rb-img-wrap\" style={{ width:54, height:54, display:'flex', alignItems:'center', justifyContent:'center', fontSize:11 }}>No icon</div>}\r\n                </div>\r\n                <div className=\"rb-cell\" style={{ fontWeight:600 }}>\r\n                  <button className=\"rb-btn outline\" style={{ padding:'4px 6px', minHeight:32, fontSize:'.65rem' }} onClick={()=>openDetail(s)}>{s.name}</button>\r\n                </div>\r\n                <div className=\"rb-cell rb-desc\" title={s.description}>{s.description || '—'}</div>\r\n                <div className=\"rb-cell\" style={{ fontSize:13 }}>{Number(s.price||0).toLocaleString('vi-VN')} VND</div>\r\n                <div className=\"rb-cell\">{s.hotelName || '—'}</div>\r\n                <div className=\"rb-cell\">{statusBadge(s.status)}</div>\r\n                <div className=\"rb-cell\">\r\n                  <button className=\"rb-btn primary\" disabled={String(s.status||'').toLowerCase()==='inactive'} onClick={()=>{ setOrderService(s); setOrderQty(1); setOrderNote(''); setOrderMsg(''); }} style={{ width:'100%' }}>Đặt</button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {detailOpen && detail && (\r\n        <div className=\"rb-modal-backdrop\" onMouseDown={(e)=>{ if(e.target===e.currentTarget) closeDetail(); }}>\r\n          <div className=\"rb-modal\" onMouseDown={e=>e.stopPropagation()}>\r\n            <button className=\"rb-modal-close\" onClick={closeDetail} aria-label=\"Đóng\">×</button>\r\n            <h3 style={{ marginTop:0, marginBottom:14 }}>{detail.name}</h3>\r\n            <div style={{ display:'flex', gap:22, flexWrap:'wrap' }}>\r\n              <div style={{ flex:'0 0 200px' }}>\r\n                <div className=\"rb-img-wrap\" style={{ width:160, height:160, borderRadius:12, marginBottom:10 }}>\r\n                  {detail.icon ? <img src={detail.icon} alt=\"icon\" /> : <div style={{ width:'100%', height:'100%', display:'flex', alignItems:'center', justifyContent:'center', fontSize:13 }}>No icon</div>}\r\n                </div>\r\n                <div style={{ fontSize:'.75rem', lineHeight:1.4 }}>\r\n                  <div><strong>Giá:</strong> {Number(detail.price||0).toLocaleString('vi-VN')} VND</div>\r\n                  <div><strong>Trạng thái:</strong> {statusBadge(detail.status)}</div>\r\n                  <div><strong>Khách sạn:</strong> {detail.hotelName || '—'}</div>\r\n                </div>\r\n              </div>\r\n              <div style={{ flex:'1 1 300px', minWidth:250 }}>\r\n                <p style={{ whiteSpace:'pre-wrap', lineHeight:1.5, fontSize:'.8rem' }}>{detail.description || 'Không có mô tả.'}</p>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginTop:20, textAlign:'right' }}>\r\n              <button className=\"rb-btn outline\" onClick={closeDetail}>Đóng</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {orderService && (\r\n        <div className=\"rb-modal-backdrop\" onMouseDown={e=>{ if(e.target===e.currentTarget) setOrderService(null); }}>\r\n          <div className=\"rb-modal\" onMouseDown={e=>e.stopPropagation()} style={{ maxWidth:520 }}>\r\n            <button className=\"rb-modal-close\" onClick={()=>setOrderService(null)} aria-label=\"Đóng\">×</button>\r\n            <h3 style={{ marginTop:0, marginBottom:14, fontSize:'1.05rem' }}>Đặt dịch vụ</h3>\r\n            <div style={{ fontSize:'.75rem', marginBottom:12 }}><strong>Dịch vụ:</strong> {orderService.name}</div>\r\n            {!userEmail && <div style={{ background:'#fef3c7', border:'1px solid #fcd34d', padding:8, borderRadius:6, fontSize:'.7rem', marginBottom:12 }}>Bạn cần đăng nhập để đặt dịch vụ.</div>}\r\n            <form onSubmit={async (e)=>{ e.preventDefault(); if(!userEmail) return; setOrderLoading(true); setOrderMsg(''); try { const res = await fetch(`/api/services/${orderService.id}/order`, { method:'POST', headers:{ 'Content-Type':'application/json', 'x-user-email': userEmail }, body: JSON.stringify({ quantity: orderQty, note: orderNote }) }); if(!res.ok){ const t = await res.json().catch(()=>({})); throw new Error(t.message||'Đặt thất bại'); } setOrderMsg('Đặt thành công!'); setTimeout(()=>{ setOrderService(null); }, 900); } catch(err){ setOrderMsg(err.message||'Lỗi đặt'); } finally { setOrderLoading(false); } }}>\r\n              <div className=\"rb-field\" style={{ marginBottom:10 }}>\r\n                <label>Số lượng</label>\r\n                <input ref={qtyRef} type=\"number\" min={1} className=\"rb-input\" value={orderQty} onChange={e=>setOrderQty(Number(e.target.value)||1)} required />\r\n              </div>\r\n              <div className=\"rb-field\" style={{ marginBottom:14 }}>\r\n                <label>Ghi chú</label>\r\n                <textarea className=\"rb-input\" style={{ minHeight:80, resize:'vertical' }} value={orderNote} onChange={e=>setOrderNote(e.target.value)} placeholder=\"Yêu cầu thêm (không bắt buộc)\" />\r\n              </div>\r\n              {orderMsg && <div style={{ marginBottom:10, fontSize:'.7rem', color: orderMsg.includes('thành công')? '#059669':'#b42318' }}>{orderMsg}</div>}\r\n              <div style={{ display:'flex', justifyContent:'flex-end', gap:10 }}>\r\n                <button type=\"button\" className=\"rb-btn outline\" onClick={()=>setOrderService(null)}>Hủy</button>\r\n                <button type=\"submit\" className=\"rb-btn primary\" disabled={orderLoading||!userEmail}>{orderLoading? 'Đang gửi...' : 'Xác nhận'}</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}