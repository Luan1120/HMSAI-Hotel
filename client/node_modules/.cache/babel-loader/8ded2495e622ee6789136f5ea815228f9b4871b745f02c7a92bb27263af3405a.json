{"ast":null,"code":"var _jsxFileName = \"D:\\\\Git\\\\HMSAI-Hotel\\\\client\\\\src\\\\AdminReports.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { getUserRole, authHeaders } from './auth';\nimport './HomePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminReports({\n  isModal,\n  onClose\n}) {\n  _s();\n  const role = getUserRole();\n  const isAdmin = role === 'Admin';\n  useEffect(() => {\n    // Prevent background page from scrolling while modal is open\n    const prev = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n    return () => {\n      document.body.style.overflow = prev;\n    };\n  }, []);\n  // Default to current year full range\n  const initialYear = new Date().getFullYear();\n  const [from, setFrom] = useState(`${initialYear}-01-01`);\n  const [to, setTo] = useState(`${initialYear}-12-31`);\n  const [summary, setSummary] = useState({\n    totalBookings: 0,\n    checkInsCount: 0,\n    revenue: 0,\n    availableRooms: 0,\n    totalRooms: 0\n  });\n  const [year, setYear] = useState(() => new Date().getFullYear());\n  const [months, setMonths] = useState(Array.from({\n    length: 12\n  }, (_, i) => ({\n    month: i + 1,\n    revenue: 0\n  })));\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n  const [tick, setTick] = useState(0);\n  const load = async () => {\n    setLoading(true);\n    setErr('');\n    try {\n      const params = new URLSearchParams();\n      if (from) params.set('from', from);\n      if (to) params.set('to', to);\n      params.set('_', String(Date.now()));\n      const sRes = await fetch(`/api/admin/reports/summary?${params.toString()}`, {\n        cache: 'no-store',\n        headers: authHeaders()\n      });\n      if (!sRes.ok) throw new Error('Không thể tải tổng quan');\n      const s = await sRes.json();\n      setSummary({\n        totalBookings: s.totalBookings || 0,\n        checkInsCount: s.checkInsCount || 0,\n        revenue: Number(s.revenue || 0),\n        availableRooms: s.availableRooms || 0,\n        totalRooms: s.totalRooms || 0\n      });\n      // Align chart year with selected to-date if provided\n      const yParam = to ? new Date(to).getFullYear() : year;\n      if (yParam !== year) setYear(yParam);\n      const mRes = await fetch(`/api/admin/reports/monthly?year=${encodeURIComponent(yParam)}&_=${Date.now()}`, {\n        cache: 'no-store',\n        headers: authHeaders()\n      });\n      if (!mRes.ok) throw new Error('Không thể tải doanh thu theo tháng');\n      const mj = await mRes.json();\n      setMonths(Array.isArray(mj.months) ? mj.months : []);\n    } catch (e) {\n      setErr(e.message || 'Lỗi tải báo cáo');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (isAdmin) load();\n  }, []);\n  useEffect(() => {\n    if (isAdmin) load();\n  }, [year]);\n  // Auto-load when date filters change (debounced)\n  useEffect(() => {\n    if (!isAdmin) return;\n    const id = setTimeout(() => {\n      load();\n    }, 250);\n    return () => clearTimeout(id);\n  }, [isAdmin, from, to]);\n  // Keep chart year in sync with end date's year\n  useEffect(() => {\n    if (!to) return;\n    const y = new Date(to).getFullYear();\n    if (y !== year) setYear(y);\n  }, [to]);\n  const totalYearRevenue = useMemo(() => months.reduce((s, m) => s + Number(m.revenue || 0), 0), [months]);\n  const yearsList = useMemo(() => {\n    const y = new Date().getFullYear();\n    return [y - 1, y, y + 1];\n  }, []);\n  if (!isAdmin) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ph-table\",\n    style: {\n      padding: 16\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#b42318'\n      },\n      children: \"Ch\\u1EE9c n\\u0103ng ch\\u1EC9 d\\xE0nh cho qu\\u1EA3n tr\\u1ECB vi\\xEAn.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ph-table reports-root\",\n    style: {\n      padding: '16px 20px',\n      maxWidth: 'unset',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"home-rooms-title\",\n      style: {\n        textAlign: 'left',\n        marginTop: 0\n      },\n      children: \"B\\xC1O C\\xC1O TH\\u1ED0NG K\\xCA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-toolbar\",\n      children: [/*#__PURE__*/_jsxDEV(DateRangePicker, {\n        from: from,\n        to: to,\n        onChange: (f, t) => {\n          setFrom(f);\n          setTo(t);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-field reports-spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reports-label\",\n          children: \"Ch\\u1ECDn n\\u0103m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"reports-select\",\n          value: year,\n          onChange: e => {\n            setYear(Number(e.target.value));\n          },\n          children: yearsList.map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: y,\n            children: y\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n        gap: 12,\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        title: \"L\\u01B0\\u1EE3t check-in\",\n        value: String(summary.checkInsCount || 0),\n        color: \"#22c55e\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Kh\\xE1ch \\u0111\\xE3 \\u0111\\u1EB7t\",\n        value: String(summary.totalBookings || 0),\n        color: \"#0ea5e9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Doanh thu (VN\\u0110)\",\n        value: formatVND(summary.revenue),\n        color: \"#f59e0b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"S\\u1ED1 ph\\xF2ng tr\\u1ED1ng\",\n        value: String(summary.availableRooms || 0),\n        color: \"#64748b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"T\\u1ED5ng s\\u1ED1 ph\\xF2ng\",\n        value: String(summary.totalRooms || 0),\n        color: \"#334155\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(Chart, {\n        months: months\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              background: '#f7f7fb'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'left',\n                padding: '8px 6px'\n              },\n              children: \"Th\\xE1ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'left',\n                padding: '8px 6px'\n              },\n              children: \"Doanh thu (VN\\u0110)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [months.map(m => /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              borderTop: '1px solid #eee'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px'\n              },\n              children: [\"Th\\xE1ng \", m.month]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px'\n              },\n              children: formatVND(m.revenue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this)]\n          }, m.month, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              borderTop: '2px solid #ddd',\n              background: '#fafafa'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px',\n                fontWeight: 700\n              },\n              children: \"T\\u1ED5ng n\\u0103m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px',\n                fontWeight: 700\n              },\n              children: formatVND(totalYearRevenue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#b42318',\n        marginTop: 10\n      },\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminReports, \"26/NvHqfvF7CUwZHygCYBxkQdCk=\");\n_c = AdminReports;\nfunction DateRangePicker({\n  from,\n  to,\n  onChange\n}) {\n  _s2();\n  const f = parseYMD(from);\n  const t = parseYMD(to);\n  const years = useMemo(() => {\n    const now = new Date().getFullYear();\n    const list = [];\n    for (let y = now - 10; y <= now + 1; y++) list.push(y);\n    return list;\n  }, []);\n  const months = Array.from({\n    length: 12\n  }, (_, i) => i + 1);\n  const updateFrom = (y, m, d) => {\n    const dayMax = daysInMonth(y, m);\n    const dd = Math.min(d || 1, dayMax);\n    onChange(formatYMD(y, m, dd), to);\n  };\n  const updateTo = (y, m, d) => {\n    const dayMax = daysInMonth(y, m);\n    const dd = Math.min(d || dayMax, dayMax);\n    onChange(from, formatYMD(y, m, dd));\n  };\n  const fMax = daysInMonth(f.y, f.m);\n  const tMax = daysInMonth(t.y, t.m);\n  const fDays = Array.from({\n    length: fMax\n  }, (_, i) => i + 1);\n  const tDays = Array.from({\n    length: tMax\n  }, (_, i) => i + 1);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reports-field\",\n    style: {\n      gap: 14\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-field reports-field-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-label\",\n        children: \"T\\u1EEB:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"day\",\n        value: f.d,\n        onChange: e => updateFrom(f.y, f.m, Number(e.target.value)),\n        children: fDays.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: d,\n          children: d\n        }, d, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"month\",\n        value: f.m,\n        onChange: e => updateFrom(f.y, Number(e.target.value), f.d),\n        children: months.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: m,\n          children: [\"Th\\xE1ng \", m]\n        }, m, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 27\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"year\",\n        value: f.y,\n        onChange: e => updateFrom(Number(e.target.value), f.m, f.d),\n        children: years.map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: y,\n          children: y\n        }, y, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-field reports-field-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-label\",\n        children: \"\\u0110\\u1EBFn:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"day\",\n        value: t.d,\n        onChange: e => updateTo(t.y, t.m, Number(e.target.value)),\n        children: tDays.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: d,\n          children: d\n        }, d, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"month\",\n        value: t.m,\n        onChange: e => updateTo(t.y, Number(e.target.value), t.d),\n        children: months.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: m,\n          children: [\"Th\\xE1ng \", m]\n        }, m, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 27\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"year\",\n        value: t.y,\n        onChange: e => updateTo(Number(e.target.value), t.m, t.d),\n        children: years.map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: y,\n          children: y\n        }, y, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n}\n_s2(DateRangePicker, \"TBNy60Q+iOvBgkNxIaZlmeG+MDk=\");\n_c2 = DateRangePicker;\nfunction daysInMonth(year, month) {\n  return new Date(year, month, 0).getDate();\n}\nfunction pad(n) {\n  return String(n).padStart(2, '0');\n}\nfunction formatYMD(y, m, d) {\n  return `${y}-${pad(m)}-${pad(d)}`;\n}\nfunction parseYMD(s) {\n  try {\n    const [y, m, d] = s.split('-').map(Number);\n    return {\n      y,\n      m,\n      d\n    };\n  } catch {\n    const d = new Date();\n    return {\n      y: d.getFullYear(),\n      m: d.getMonth() + 1,\n      d: d.getDate()\n    };\n  }\n}\nfunction Chart({\n  months\n}) {\n  const max = Math.max(1, ...months.map(x => Number(x.revenue || 0)));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      overflowX: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minWidth: 680\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          margin: '6px 0 8px'\n        },\n        children: \"So s\\xE1nh doanh thu theo th\\xE1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'flex-end',\n          gap: 8,\n          height: 260,\n          padding: '12px 8px',\n          background: '#f7f7fb',\n          borderRadius: 8\n        },\n        children: months.map(m => {\n          const h = Math.round(200 * (Number(m.revenue || 0) / max));\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              title: `Tháng ${m.month} | Doanh thu: ${formatVND(m.revenue)}`,\n              style: {\n                width: 24,\n                height: h,\n                background: '#3b82f6',\n                borderRadius: 4\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#555',\n                marginTop: 6\n              },\n              children: [\"Th\\xE1ng \", m.month]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)]\n          }, m.month, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n_c3 = Chart;\nfunction Card({\n  title,\n  value,\n  color\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: '#fff',\n      borderRadius: 10,\n      padding: 12,\n      border: '1px solid #eee'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#666'\n      },\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 800,\n        color,\n        fontSize: 20,\n        marginTop: 4\n      },\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n}\n_c4 = Card;\nfunction formatVND(n) {\n  const v = Number(n || 0);\n  return v.toLocaleString('vi-VN') + ' đ';\n}\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"AdminReports\");\n$RefreshReg$(_c2, \"DateRangePicker\");\n$RefreshReg$(_c3, \"Chart\");\n$RefreshReg$(_c4, \"Card\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","getUserRole","authHeaders","jsxDEV","_jsxDEV","AdminReports","isModal","onClose","_s","role","isAdmin","prev","document","body","style","overflow","initialYear","Date","getFullYear","from","setFrom","to","setTo","summary","setSummary","totalBookings","checkInsCount","revenue","availableRooms","totalRooms","year","setYear","months","setMonths","Array","length","_","i","month","loading","setLoading","err","setErr","tick","setTick","load","params","URLSearchParams","set","String","now","sRes","fetch","toString","cache","headers","ok","Error","s","json","Number","yParam","mRes","encodeURIComponent","mj","isArray","e","message","id","setTimeout","clearTimeout","y","totalYearRevenue","reduce","m","yearsList","className","padding","children","color","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","textAlign","marginTop","DateRangePicker","onChange","f","t","value","target","map","display","gridTemplateColumns","gap","Card","title","formatVND","Chart","width","borderCollapse","background","borderTop","fontWeight","_c","_s2","parseYMD","years","list","push","updateFrom","d","dayMax","daysInMonth","dd","Math","min","formatYMD","updateTo","fMax","tMax","fDays","tDays","_c2","getDate","pad","n","padStart","split","getMonth","max","x","overflowX","minWidth","alignItems","height","borderRadius","h","round","flex","flexDirection","fontSize","_c3","border","_c4","v","toLocaleString","$RefreshReg$"],"sources":["D:/Git/HMSAI-Hotel/client/src/AdminReports.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { getUserRole, authHeaders } from './auth';\r\nimport './HomePage.css';\r\n\r\nexport default function AdminReports({ isModal, onClose }) {\r\n  const role = getUserRole();\r\n  const isAdmin = role === 'Admin';\r\n  useEffect(() => {\r\n    // Prevent background page from scrolling while modal is open\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n    return () => { document.body.style.overflow = prev; };\r\n  }, []);\r\n  // Default to current year full range\r\n  const initialYear = new Date().getFullYear();\r\n  const [from, setFrom] = useState(`${initialYear}-01-01`);\r\n  const [to, setTo] = useState(`${initialYear}-12-31`);\r\n  const [summary, setSummary] = useState({ totalBookings: 0, checkInsCount: 0, revenue: 0, availableRooms: 0, totalRooms: 0 });\r\n  const [year, setYear] = useState(() => new Date().getFullYear());\r\n  const [months, setMonths] = useState(Array.from({length:12}, (_,i)=>({month:i+1,revenue:0})));\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState('');\r\n  const [tick, setTick] = useState(0);\r\n\r\n  const load = async () => {\r\n    setLoading(true); setErr('');\r\n    try {\r\n      const params = new URLSearchParams();\r\n  if (from) params.set('from', from);\r\n  if (to) params.set('to', to);\r\n      params.set('_', String(Date.now()));\r\n      const sRes = await fetch(`/api/admin/reports/summary?${params.toString()}`, { cache: 'no-store', headers: authHeaders() });\r\n      if (!sRes.ok) throw new Error('Không thể tải tổng quan');\r\n      const s = await sRes.json();\r\n      setSummary({\r\n        totalBookings: s.totalBookings || 0,\r\n        checkInsCount: s.checkInsCount || 0,\r\n        revenue: Number(s.revenue || 0),\r\n        availableRooms: s.availableRooms || 0,\r\n        totalRooms: s.totalRooms || 0,\r\n      });\r\n      // Align chart year with selected to-date if provided\r\n  const yParam = to ? new Date(to).getFullYear() : year;\r\n      if (yParam !== year) setYear(yParam);\r\n      const mRes = await fetch(`/api/admin/reports/monthly?year=${encodeURIComponent(yParam)}&_=${Date.now()}`, { cache: 'no-store', headers: authHeaders() });\r\n      if (!mRes.ok) throw new Error('Không thể tải doanh thu theo tháng');\r\n      const mj = await mRes.json();\r\n      setMonths(Array.isArray(mj.months) ? mj.months : []);\r\n    } catch (e) {\r\n      setErr(e.message || 'Lỗi tải báo cáo');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { if (isAdmin) load(); }, []);\r\n  useEffect(() => { if (isAdmin) load(); }, [year]);\r\n  // Auto-load when date filters change (debounced)\r\n  useEffect(() => {\r\n    if (!isAdmin) return;\r\n    const id = setTimeout(() => { load(); }, 250);\r\n    return () => clearTimeout(id);\r\n  }, [isAdmin, from, to]);\r\n  // Keep chart year in sync with end date's year\r\n  useEffect(() => {\r\n    if (!to) return;\r\n    const y = new Date(to).getFullYear();\r\n    if (y !== year) setYear(y);\r\n  }, [to]);\r\n\r\n  const totalYearRevenue = useMemo(() => months.reduce((s, m) => s + Number(m.revenue || 0), 0), [months]);\r\n\r\n  const yearsList = useMemo(() => {\r\n    const y = new Date().getFullYear();\r\n    return [y-1, y, y+1];\r\n  }, []);\r\n\r\n  if (!isAdmin) return (\r\n    <div className=\"ph-table\" style={{ padding: 16 }}>\r\n      <div style={{ color:'#b42318' }}>Chức năng chỉ dành cho quản trị viên.</div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"ph-table reports-root\" style={{ padding: '16px 20px', maxWidth: 'unset', margin: '0 auto' }}>\r\n      <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>BÁO CÁO THỐNG KÊ</h2>\r\n\r\n      <div className=\"reports-toolbar\">\r\n        <DateRangePicker from={from} to={to} onChange={(f,t)=>{ setFrom(f); setTo(t); }} />\r\n        <div className=\"reports-field reports-spacer\" />\r\n        <div className=\"reports-field\">\r\n          <div className=\"reports-label\">Chọn năm:</div>\r\n          <select className=\"reports-select\" value={year} onChange={e=>{ setYear(Number(e.target.value)); }}>\r\n            {yearsList.map(y => <option key={y} value={y}>{y}</option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))', gap: 12, marginTop: 12 }}>\r\n        <Card title=\"Lượt check-in\" value={String(summary.checkInsCount || 0)} color=\"#22c55e\" />\r\n        <Card title=\"Khách đã đặt\" value={String(summary.totalBookings || 0)} color=\"#0ea5e9\" />\r\n        <Card title=\"Doanh thu (VNĐ)\" value={formatVND(summary.revenue)} color=\"#f59e0b\" />\r\n        <Card title=\"Số phòng trống\" value={String(summary.availableRooms || 0)} color=\"#64748b\" />\r\n        <Card title=\"Tổng số phòng\" value={String(summary.totalRooms || 0)} color=\"#334155\" />\r\n      </div>\r\n\r\n      <div style={{ marginTop: 16 }}>\r\n        <Chart months={months} />\r\n      </div>\r\n\r\n      <div style={{ marginTop: 16 }}>\r\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n          <thead>\r\n            <tr style={{ background:'#f7f7fb' }}>\r\n              <th style={{ textAlign:'left', padding: '8px 6px' }}>Tháng</th>\r\n              <th style={{ textAlign:'left', padding: '8px 6px' }}>Doanh thu (VNĐ)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {months.map(m => (\r\n              <tr key={m.month} style={{ borderTop: '1px solid #eee' }}>\r\n                <td style={{ padding: '8px 6px' }}>Tháng {m.month}</td>\r\n                <td style={{ padding: '8px 6px' }}>{formatVND(m.revenue)}</td>\r\n              </tr>\r\n            ))}\r\n            <tr style={{ borderTop: '2px solid #ddd', background: '#fafafa' }}>\r\n              <td style={{ padding: '8px 6px', fontWeight: 700 }}>Tổng năm</td>\r\n              <td style={{ padding: '8px 6px', fontWeight: 700 }}>{formatVND(totalYearRevenue)}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {err && <div style={{ color:'#b42318', marginTop: 10 }}>{err}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DateRangePicker({ from, to, onChange }){\r\n  const f = parseYMD(from);\r\n  const t = parseYMD(to);\r\n  const years = useMemo(() => {\r\n    const now = new Date().getFullYear();\r\n    const list = [];\r\n    for (let y = now - 10; y <= now + 1; y++) list.push(y);\r\n    return list;\r\n  }, []);\r\n  const months = Array.from({length:12}, (_,i)=>i+1);\r\n\r\n  const updateFrom = (y,m,d) => {\r\n    const dayMax = daysInMonth(y,m);\r\n    const dd = Math.min(d || 1, dayMax);\r\n    onChange(formatYMD(y,m,dd), to);\r\n  };\r\n  const updateTo = (y,m,d) => {\r\n    const dayMax = daysInMonth(y,m);\r\n    const dd = Math.min(d || dayMax, dayMax);\r\n    onChange(from, formatYMD(y,m,dd));\r\n  };\r\n\r\n  const fMax = daysInMonth(f.y, f.m);\r\n  const tMax = daysInMonth(t.y, t.m);\r\n  const fDays = Array.from({length:fMax}, (_,i)=>i+1);\r\n  const tDays = Array.from({length:tMax}, (_,i)=>i+1);\r\n\r\n  return (\r\n    <div className=\"reports-field\" style={{ gap: 14 }}>\r\n      <div className=\"reports-field reports-field-group\">\r\n        <div className=\"reports-label\">Từ:</div>\r\n        <select className=\"reports-select\" data-role=\"day\" value={f.d} onChange={e=>updateFrom(f.y, f.m, Number(e.target.value))}>\r\n          {fDays.map(d=> <option key={d} value={d}>{d}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"month\" value={f.m} onChange={e=>updateFrom(f.y, Number(e.target.value), f.d)}>\r\n          {months.map(m=> <option key={m} value={m}>Tháng {m}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"year\" value={f.y} onChange={e=>updateFrom(Number(e.target.value), f.m, f.d)}>\r\n          {years.map(y=> <option key={y} value={y}>{y}</option>)}\r\n        </select>\r\n      </div>\r\n      <div className=\"reports-field reports-field-group\">\r\n        <div className=\"reports-label\">Đến:</div>\r\n        <select className=\"reports-select\" data-role=\"day\" value={t.d} onChange={e=>updateTo(t.y, t.m, Number(e.target.value))}>\r\n          {tDays.map(d=> <option key={d} value={d}>{d}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"month\" value={t.m} onChange={e=>updateTo(t.y, Number(e.target.value), t.d)}>\r\n          {months.map(m=> <option key={m} value={m}>Tháng {m}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"year\" value={t.y} onChange={e=>updateTo(Number(e.target.value), t.m, t.d)}>\r\n          {years.map(y=> <option key={y} value={y}>{y}</option>)}\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction daysInMonth(year, month){\r\n  return new Date(year, month, 0).getDate();\r\n}\r\nfunction pad(n){ return String(n).padStart(2, '0'); }\r\nfunction formatYMD(y,m,d){ return `${y}-${pad(m)}-${pad(d)}`; }\r\nfunction parseYMD(s){\r\n  try{\r\n    const [y,m,d] = s.split('-').map(Number);\r\n    return { y, m, d };\r\n  }catch{ const d=new Date(); return { y:d.getFullYear(), m:d.getMonth()+1, d:d.getDate() }; }\r\n}\r\n\r\nfunction Chart({ months }){\r\n  const max = Math.max(1, ...months.map(x => Number(x.revenue||0)));\r\n  return (\r\n    <div style={{ width: '100%', overflowX: 'auto' }}>\r\n      <div style={{ minWidth: 680 }}>\r\n        <div style={{ fontWeight: 700, margin: '6px 0 8px' }}>So sánh doanh thu theo tháng</div>\r\n        <div style={{ display: 'flex', alignItems: 'flex-end', gap: 8, height: 260, padding: '12px 8px', background: '#f7f7fb', borderRadius: 8 }}>\r\n          {months.map(m => {\r\n            const h = Math.round(200 * (Number(m.revenue||0) / max));\r\n            return (\r\n              <div key={m.month} style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <div title={`Tháng ${m.month} | Doanh thu: ${formatVND(m.revenue)}`} style={{ width: 24, height: h, background: '#3b82f6', borderRadius: 4 }} />\r\n                <div style={{ fontSize: 12, color: '#555', marginTop: 6 }}>Tháng {m.month}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Card({ title, value, color }){\r\n  return (\r\n    <div style={{ background:'#fff', borderRadius: 10, padding: 12, border: '1px solid #eee' }}>\r\n      <div style={{ fontSize: 12, color: '#666' }}>{title}</div>\r\n      <div style={{ fontWeight: 800, color, fontSize: 20, marginTop: 4 }}>{value}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatVND(n){\r\n  const v = Number(n || 0);\r\n  return v.toLocaleString('vi-VN') + ' đ';\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}