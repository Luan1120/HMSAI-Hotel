{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\AdminReports.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\nimport { getUserRole, authHeaders } from './auth';\nimport './HomePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminReports({\n  isModal,\n  onClose\n}) {\n  _s();\n  const role = getUserRole();\n  const isAdmin = role === 'Admin';\n  useEffect(() => {\n    // Prevent background page from scrolling while modal is open\n    const prev = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n    return () => {\n      document.body.style.overflow = prev;\n    };\n  }, []);\n  // Default to current year full range\n  const initialYear = new Date().getFullYear();\n  const [from, setFrom] = useState(`${initialYear}-01-01`);\n  const [to, setTo] = useState(`${initialYear}-12-31`);\n  const [summary, setSummary] = useState({\n    totalBookings: 0,\n    checkInsCount: 0,\n    revenue: 0,\n    availableRooms: 0,\n    totalRooms: 0\n  });\n  const [year, setYear] = useState(() => new Date().getFullYear());\n  const [months, setMonths] = useState(Array.from({\n    length: 12\n  }, (_, i) => ({\n    month: i + 1,\n    revenue: 0\n  })));\n  const [loading, setLoading] = useState(false); // retained for potential spinner; use below\n  const [err, setErr] = useState('');\n  // removed unused tick state\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    setErr('');\n    try {\n      const params = new URLSearchParams();\n      if (from) params.set('from', from);\n      if (to) params.set('to', to);\n      params.set('_', String(Date.now()));\n      const sRes = await fetch(`/api/admin/reports/summary?${params.toString()}`, {\n        cache: 'no-store',\n        headers: authHeaders()\n      });\n      if (!sRes.ok) throw new Error('Không thể tải tổng quan');\n      const s = await sRes.json();\n      setSummary({\n        totalBookings: s.totalBookings || 0,\n        checkInsCount: s.checkInsCount || 0,\n        revenue: Number(s.revenue || 0),\n        availableRooms: s.availableRooms || 0,\n        totalRooms: s.totalRooms || 0\n      });\n      // Align chart year with selected to-date if provided\n      const yParam = to ? new Date(to).getFullYear() : year;\n      if (yParam !== year) setYear(yParam);\n      const mRes = await fetch(`/api/admin/reports/monthly?year=${encodeURIComponent(yParam)}&_=${Date.now()}`, {\n        cache: 'no-store',\n        headers: authHeaders()\n      });\n      if (!mRes.ok) throw new Error('Không thể tải doanh thu theo tháng');\n      const mj = await mRes.json();\n      setMonths(Array.isArray(mj.months) ? mj.months : []);\n    } catch (e) {\n      setErr(e.message || 'Lỗi tải báo cáo');\n    } finally {\n      setLoading(false);\n    }\n  }, [from, to, year]);\n  useEffect(() => {\n    if (isAdmin) load();\n  }, [isAdmin, load]);\n  useEffect(() => {\n    if (isAdmin) load();\n  }, [year, isAdmin, load]);\n  // Auto-load when date filters change (debounced)\n  useEffect(() => {\n    if (!isAdmin) return;\n    const id = setTimeout(() => {\n      load();\n    }, 250);\n    return () => clearTimeout(id);\n  }, [isAdmin, from, to, load]);\n  // Keep chart year in sync with end date's year\n  useEffect(() => {\n    if (!to) return;\n    const y = new Date(to).getFullYear();\n    if (y !== year) setYear(y);\n  }, [to, year]);\n  const totalYearRevenue = useMemo(() => months.reduce((s, m) => s + Number(m.revenue || 0), 0), [months]);\n  const yearsList = useMemo(() => {\n    const y = new Date().getFullYear();\n    return [y - 1, y, y + 1];\n  }, []);\n  if (!isAdmin) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ph-table\",\n    style: {\n      padding: 16\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#b42318'\n      },\n      children: \"Ch\\u1EE9c n\\u0103ng ch\\u1EC9 d\\xE0nh cho qu\\u1EA3n tr\\u1ECB vi\\xEAn.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ph-table reports-root\",\n    style: {\n      padding: '16px 20px',\n      maxWidth: 'unset',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"home-rooms-title\",\n      style: {\n        textAlign: 'left',\n        marginTop: 0\n      },\n      children: \"B\\xC1O C\\xC1O TH\\u1ED0NG K\\xCA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-toolbar\",\n      children: [/*#__PURE__*/_jsxDEV(DateRangePicker, {\n        from: from,\n        to: to,\n        onChange: (f, t) => {\n          setFrom(f);\n          setTo(t);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-field reports-spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reports-label\",\n          children: \"Ch\\u1ECDn n\\u0103m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"reports-select\",\n          value: year,\n          onChange: e => {\n            setYear(Number(e.target.value));\n          },\n          children: yearsList.map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: y,\n            children: y\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n        gap: 12,\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        title: \"L\\u01B0\\u1EE3t check-in\",\n        value: String(summary.checkInsCount || 0),\n        color: \"#22c55e\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Kh\\xE1ch \\u0111\\xE3 \\u0111\\u1EB7t\",\n        value: String(summary.totalBookings || 0),\n        color: \"#0ea5e9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Doanh thu (VN\\u0110)\",\n        value: formatVND(summary.revenue),\n        color: \"#f59e0b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"S\\u1ED1 ph\\xF2ng tr\\u1ED1ng\",\n        value: String(summary.availableRooms || 0),\n        color: \"#64748b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        title: \"T\\u1ED5ng s\\u1ED1 ph\\xF2ng\",\n        value: String(summary.totalRooms || 0),\n        color: \"#334155\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(Chart, {\n        months: months\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              background: '#f7f7fb'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'left',\n                padding: '8px 6px'\n              },\n              children: \"Th\\xE1ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                textAlign: 'left',\n                padding: '8px 6px'\n              },\n              children: \"Doanh thu (VN\\u0110)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [months.map(m => /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              borderTop: '1px solid #eee'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px'\n              },\n              children: [\"Th\\xE1ng \", m.month]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px'\n              },\n              children: formatVND(m.revenue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this)]\n          }, m.month, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              borderTop: '2px solid #ddd',\n              background: '#fafafa'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px',\n                fontWeight: 700\n              },\n              children: \"T\\u1ED5ng n\\u0103m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                padding: '8px 6px',\n                fontWeight: 700\n              },\n              children: formatVND(totalYearRevenue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10,\n        color: '#475569',\n        fontSize: 13\n      },\n      children: \"\\u0110ang t\\u1EA3i b\\xE1o c\\xE1o...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#b42318',\n        marginTop: 10\n      },\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminReports, \"jwwx7yTLDxJCkQoqBZ/zyb3X1CA=\");\n_c = AdminReports;\nfunction DateRangePicker({\n  from,\n  to,\n  onChange\n}) {\n  _s2();\n  const f = parseYMD(from);\n  const t = parseYMD(to);\n  const years = useMemo(() => {\n    const now = new Date().getFullYear();\n    const list = [];\n    for (let y = now - 10; y <= now + 1; y++) list.push(y);\n    return list;\n  }, []);\n  const months = Array.from({\n    length: 12\n  }, (_, i) => i + 1);\n  const updateFrom = (y, m, d) => {\n    const dayMax = daysInMonth(y, m);\n    const dd = Math.min(d || 1, dayMax);\n    onChange(formatYMD(y, m, dd), to);\n  };\n  const updateTo = (y, m, d) => {\n    const dayMax = daysInMonth(y, m);\n    const dd = Math.min(d || dayMax, dayMax);\n    onChange(from, formatYMD(y, m, dd));\n  };\n  const fMax = daysInMonth(f.y, f.m);\n  const tMax = daysInMonth(t.y, t.m);\n  const fDays = Array.from({\n    length: fMax\n  }, (_, i) => i + 1);\n  const tDays = Array.from({\n    length: tMax\n  }, (_, i) => i + 1);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reports-field\",\n    style: {\n      gap: 14\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-field reports-field-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-label\",\n        children: \"T\\u1EEB:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"day\",\n        value: f.d,\n        onChange: e => updateFrom(f.y, f.m, Number(e.target.value)),\n        children: fDays.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: d,\n          children: d\n        }, d, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"month\",\n        value: f.m,\n        onChange: e => updateFrom(f.y, Number(e.target.value), f.d),\n        children: months.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: m,\n          children: [\"Th\\xE1ng \", m]\n        }, m, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 27\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"year\",\n        value: f.y,\n        onChange: e => updateFrom(Number(e.target.value), f.m, f.d),\n        children: years.map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: y,\n          children: y\n        }, y, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reports-field reports-field-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reports-label\",\n        children: \"\\u0110\\u1EBFn:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"day\",\n        value: t.d,\n        onChange: e => updateTo(t.y, t.m, Number(e.target.value)),\n        children: tDays.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: d,\n          children: d\n        }, d, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"month\",\n        value: t.m,\n        onChange: e => updateTo(t.y, Number(e.target.value), t.d),\n        children: months.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: m,\n          children: [\"Th\\xE1ng \", m]\n        }, m, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 27\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"reports-select\",\n        \"data-role\": \"year\",\n        value: t.y,\n        onChange: e => updateTo(Number(e.target.value), t.m, t.d),\n        children: years.map(y => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: y,\n          children: y\n        }, y, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n}\n_s2(DateRangePicker, \"TBNy60Q+iOvBgkNxIaZlmeG+MDk=\");\n_c2 = DateRangePicker;\nfunction daysInMonth(year, month) {\n  return new Date(year, month, 0).getDate();\n}\nfunction pad(n) {\n  return String(n).padStart(2, '0');\n}\nfunction formatYMD(y, m, d) {\n  return `${y}-${pad(m)}-${pad(d)}`;\n}\nfunction parseYMD(s) {\n  try {\n    const [y, m, d] = s.split('-').map(Number);\n    return {\n      y,\n      m,\n      d\n    };\n  } catch {\n    const d = new Date();\n    return {\n      y: d.getFullYear(),\n      m: d.getMonth() + 1,\n      d: d.getDate()\n    };\n  }\n}\nfunction Chart({\n  months\n}) {\n  const max = Math.max(1, ...months.map(x => Number(x.revenue || 0)));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      overflowX: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minWidth: 680\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          margin: '6px 0 8px'\n        },\n        children: \"So s\\xE1nh doanh thu theo th\\xE1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'flex-end',\n          gap: 8,\n          height: 260,\n          padding: '12px 8px',\n          background: '#f7f7fb',\n          borderRadius: 8\n        },\n        children: months.map(m => {\n          const h = Math.round(200 * (Number(m.revenue || 0) / max));\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              title: `Tháng ${m.month} | Doanh thu: ${formatVND(m.revenue)}`,\n              style: {\n                width: 24,\n                height: h,\n                background: '#3b82f6',\n                borderRadius: 4\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#555',\n                marginTop: 6\n              },\n              children: [\"Th\\xE1ng \", m.month]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this)]\n          }, m.month, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n}\n_c3 = Chart;\nfunction Card({\n  title,\n  value,\n  color\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: '#fff',\n      borderRadius: 10,\n      padding: 12,\n      border: '1px solid #eee'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#666'\n      },\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 800,\n        color,\n        fontSize: 20,\n        marginTop: 4\n      },\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n}\n_c4 = Card;\nfunction formatVND(n) {\n  const v = Number(n || 0);\n  return v.toLocaleString('vi-VN') + ' đ';\n}\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"AdminReports\");\n$RefreshReg$(_c2, \"DateRangePicker\");\n$RefreshReg$(_c3, \"Chart\");\n$RefreshReg$(_c4, \"Card\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","getUserRole","authHeaders","jsxDEV","_jsxDEV","AdminReports","isModal","onClose","_s","role","isAdmin","prev","document","body","style","overflow","initialYear","Date","getFullYear","from","setFrom","to","setTo","summary","setSummary","totalBookings","checkInsCount","revenue","availableRooms","totalRooms","year","setYear","months","setMonths","Array","length","_","i","month","loading","setLoading","err","setErr","load","params","URLSearchParams","set","String","now","sRes","fetch","toString","cache","headers","ok","Error","s","json","Number","yParam","mRes","encodeURIComponent","mj","isArray","e","message","id","setTimeout","clearTimeout","y","totalYearRevenue","reduce","m","yearsList","className","padding","children","color","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","textAlign","marginTop","DateRangePicker","onChange","f","t","value","target","map","display","gridTemplateColumns","gap","Card","title","formatVND","Chart","width","borderCollapse","background","borderTop","fontWeight","fontSize","_c","_s2","parseYMD","years","list","push","updateFrom","d","dayMax","daysInMonth","dd","Math","min","formatYMD","updateTo","fMax","tMax","fDays","tDays","_c2","getDate","pad","n","padStart","split","getMonth","max","x","overflowX","minWidth","alignItems","height","borderRadius","h","round","flex","flexDirection","_c3","border","_c4","v","toLocaleString","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminReports.js"],"sourcesContent":["import React, { useEffect, useMemo, useState, useCallback } from 'react';\r\nimport { getUserRole, authHeaders } from './auth';\r\nimport './HomePage.css';\r\n\r\nexport default function AdminReports({ isModal, onClose }) {\r\n  const role = getUserRole();\r\n  const isAdmin = role === 'Admin';\r\n  useEffect(() => {\r\n    // Prevent background page from scrolling while modal is open\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n    return () => { document.body.style.overflow = prev; };\r\n  }, []);\r\n  // Default to current year full range\r\n  const initialYear = new Date().getFullYear();\r\n  const [from, setFrom] = useState(`${initialYear}-01-01`);\r\n  const [to, setTo] = useState(`${initialYear}-12-31`);\r\n  const [summary, setSummary] = useState({ totalBookings: 0, checkInsCount: 0, revenue: 0, availableRooms: 0, totalRooms: 0 });\r\n  const [year, setYear] = useState(() => new Date().getFullYear());\r\n  const [months, setMonths] = useState(Array.from({length:12}, (_,i)=>({month:i+1,revenue:0})));\r\n  const [loading, setLoading] = useState(false); // retained for potential spinner; use below\r\n  const [err, setErr] = useState('');\r\n  // removed unused tick state\r\n\r\n  const load = useCallback(async () => {\r\n    setLoading(true); setErr('');\r\n    try {\r\n      const params = new URLSearchParams();\r\n  if (from) params.set('from', from);\r\n  if (to) params.set('to', to);\r\n      params.set('_', String(Date.now()));\r\n      const sRes = await fetch(`/api/admin/reports/summary?${params.toString()}`, { cache: 'no-store', headers: authHeaders() });\r\n      if (!sRes.ok) throw new Error('Không thể tải tổng quan');\r\n      const s = await sRes.json();\r\n      setSummary({\r\n        totalBookings: s.totalBookings || 0,\r\n        checkInsCount: s.checkInsCount || 0,\r\n        revenue: Number(s.revenue || 0),\r\n        availableRooms: s.availableRooms || 0,\r\n        totalRooms: s.totalRooms || 0,\r\n      });\r\n      // Align chart year with selected to-date if provided\r\n  const yParam = to ? new Date(to).getFullYear() : year;\r\n      if (yParam !== year) setYear(yParam);\r\n      const mRes = await fetch(`/api/admin/reports/monthly?year=${encodeURIComponent(yParam)}&_=${Date.now()}`, { cache: 'no-store', headers: authHeaders() });\r\n      if (!mRes.ok) throw new Error('Không thể tải doanh thu theo tháng');\r\n      const mj = await mRes.json();\r\n      setMonths(Array.isArray(mj.months) ? mj.months : []);\r\n    } catch (e) {\r\n      setErr(e.message || 'Lỗi tải báo cáo');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [from, to, year]);\r\n\r\n  useEffect(() => { if (isAdmin) load(); }, [isAdmin, load]);\r\n  useEffect(() => { if (isAdmin) load(); }, [year, isAdmin, load]);\r\n  // Auto-load when date filters change (debounced)\r\n  useEffect(() => {\r\n    if (!isAdmin) return;\r\n    const id = setTimeout(() => { load(); }, 250);\r\n    return () => clearTimeout(id);\r\n  }, [isAdmin, from, to, load]);\r\n  // Keep chart year in sync with end date's year\r\n  useEffect(() => {\r\n    if (!to) return;\r\n    const y = new Date(to).getFullYear();\r\n    if (y !== year) setYear(y);\r\n  }, [to, year]);\r\n\r\n  const totalYearRevenue = useMemo(() => months.reduce((s, m) => s + Number(m.revenue || 0), 0), [months]);\r\n\r\n  const yearsList = useMemo(() => {\r\n    const y = new Date().getFullYear();\r\n    return [y-1, y, y+1];\r\n  }, []);\r\n\r\n  if (!isAdmin) return (\r\n    <div className=\"ph-table\" style={{ padding: 16 }}>\r\n      <div style={{ color:'#b42318' }}>Chức năng chỉ dành cho quản trị viên.</div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"ph-table reports-root\" style={{ padding: '16px 20px', maxWidth: 'unset', margin: '0 auto' }}>\r\n      <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>BÁO CÁO THỐNG KÊ</h2>\r\n\r\n      <div className=\"reports-toolbar\">\r\n        <DateRangePicker from={from} to={to} onChange={(f,t)=>{ setFrom(f); setTo(t); }} />\r\n        <div className=\"reports-field reports-spacer\" />\r\n        <div className=\"reports-field\">\r\n          <div className=\"reports-label\">Chọn năm:</div>\r\n          <select className=\"reports-select\" value={year} onChange={e=>{ setYear(Number(e.target.value)); }}>\r\n            {yearsList.map(y => <option key={y} value={y}>{y}</option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display:'grid', gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))', gap: 12, marginTop: 12 }}>\r\n        <Card title=\"Lượt check-in\" value={String(summary.checkInsCount || 0)} color=\"#22c55e\" />\r\n        <Card title=\"Khách đã đặt\" value={String(summary.totalBookings || 0)} color=\"#0ea5e9\" />\r\n        <Card title=\"Doanh thu (VNĐ)\" value={formatVND(summary.revenue)} color=\"#f59e0b\" />\r\n        <Card title=\"Số phòng trống\" value={String(summary.availableRooms || 0)} color=\"#64748b\" />\r\n        <Card title=\"Tổng số phòng\" value={String(summary.totalRooms || 0)} color=\"#334155\" />\r\n      </div>\r\n\r\n      <div style={{ marginTop: 16 }}>\r\n        <Chart months={months} />\r\n      </div>\r\n\r\n      <div style={{ marginTop: 16 }}>\r\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n          <thead>\r\n            <tr style={{ background:'#f7f7fb' }}>\r\n              <th style={{ textAlign:'left', padding: '8px 6px' }}>Tháng</th>\r\n              <th style={{ textAlign:'left', padding: '8px 6px' }}>Doanh thu (VNĐ)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {months.map(m => (\r\n              <tr key={m.month} style={{ borderTop: '1px solid #eee' }}>\r\n                <td style={{ padding: '8px 6px' }}>Tháng {m.month}</td>\r\n                <td style={{ padding: '8px 6px' }}>{formatVND(m.revenue)}</td>\r\n              </tr>\r\n            ))}\r\n            <tr style={{ borderTop: '2px solid #ddd', background: '#fafafa' }}>\r\n              <td style={{ padding: '8px 6px', fontWeight: 700 }}>Tổng năm</td>\r\n              <td style={{ padding: '8px 6px', fontWeight: 700 }}>{formatVND(totalYearRevenue)}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n  {loading && <div style={{ marginTop:10, color:'#475569', fontSize:13 }}>Đang tải báo cáo...</div>}\r\n  {err && <div style={{ color:'#b42318', marginTop: 10 }}>{err}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DateRangePicker({ from, to, onChange }){\r\n  const f = parseYMD(from);\r\n  const t = parseYMD(to);\r\n  const years = useMemo(() => {\r\n    const now = new Date().getFullYear();\r\n    const list = [];\r\n    for (let y = now - 10; y <= now + 1; y++) list.push(y);\r\n    return list;\r\n  }, []);\r\n  const months = Array.from({length:12}, (_,i)=>i+1);\r\n\r\n  const updateFrom = (y,m,d) => {\r\n    const dayMax = daysInMonth(y,m);\r\n    const dd = Math.min(d || 1, dayMax);\r\n    onChange(formatYMD(y,m,dd), to);\r\n  };\r\n  const updateTo = (y,m,d) => {\r\n    const dayMax = daysInMonth(y,m);\r\n    const dd = Math.min(d || dayMax, dayMax);\r\n    onChange(from, formatYMD(y,m,dd));\r\n  };\r\n\r\n  const fMax = daysInMonth(f.y, f.m);\r\n  const tMax = daysInMonth(t.y, t.m);\r\n  const fDays = Array.from({length:fMax}, (_,i)=>i+1);\r\n  const tDays = Array.from({length:tMax}, (_,i)=>i+1);\r\n\r\n  return (\r\n    <div className=\"reports-field\" style={{ gap: 14 }}>\r\n      <div className=\"reports-field reports-field-group\">\r\n        <div className=\"reports-label\">Từ:</div>\r\n        <select className=\"reports-select\" data-role=\"day\" value={f.d} onChange={e=>updateFrom(f.y, f.m, Number(e.target.value))}>\r\n          {fDays.map(d=> <option key={d} value={d}>{d}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"month\" value={f.m} onChange={e=>updateFrom(f.y, Number(e.target.value), f.d)}>\r\n          {months.map(m=> <option key={m} value={m}>Tháng {m}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"year\" value={f.y} onChange={e=>updateFrom(Number(e.target.value), f.m, f.d)}>\r\n          {years.map(y=> <option key={y} value={y}>{y}</option>)}\r\n        </select>\r\n      </div>\r\n      <div className=\"reports-field reports-field-group\">\r\n        <div className=\"reports-label\">Đến:</div>\r\n        <select className=\"reports-select\" data-role=\"day\" value={t.d} onChange={e=>updateTo(t.y, t.m, Number(e.target.value))}>\r\n          {tDays.map(d=> <option key={d} value={d}>{d}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"month\" value={t.m} onChange={e=>updateTo(t.y, Number(e.target.value), t.d)}>\r\n          {months.map(m=> <option key={m} value={m}>Tháng {m}</option>)}\r\n        </select>\r\n        <select className=\"reports-select\" data-role=\"year\" value={t.y} onChange={e=>updateTo(Number(e.target.value), t.m, t.d)}>\r\n          {years.map(y=> <option key={y} value={y}>{y}</option>)}\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction daysInMonth(year, month){\r\n  return new Date(year, month, 0).getDate();\r\n}\r\nfunction pad(n){ return String(n).padStart(2, '0'); }\r\nfunction formatYMD(y,m,d){ return `${y}-${pad(m)}-${pad(d)}`; }\r\nfunction parseYMD(s){\r\n  try{\r\n    const [y,m,d] = s.split('-').map(Number);\r\n    return { y, m, d };\r\n  }catch{ const d=new Date(); return { y:d.getFullYear(), m:d.getMonth()+1, d:d.getDate() }; }\r\n}\r\n\r\nfunction Chart({ months }){\r\n  const max = Math.max(1, ...months.map(x => Number(x.revenue||0)));\r\n  return (\r\n    <div style={{ width: '100%', overflowX: 'auto' }}>\r\n      <div style={{ minWidth: 680 }}>\r\n        <div style={{ fontWeight: 700, margin: '6px 0 8px' }}>So sánh doanh thu theo tháng</div>\r\n        <div style={{ display: 'flex', alignItems: 'flex-end', gap: 8, height: 260, padding: '12px 8px', background: '#f7f7fb', borderRadius: 8 }}>\r\n          {months.map(m => {\r\n            const h = Math.round(200 * (Number(m.revenue||0) / max));\r\n            return (\r\n              <div key={m.month} style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                <div title={`Tháng ${m.month} | Doanh thu: ${formatVND(m.revenue)}`} style={{ width: 24, height: h, background: '#3b82f6', borderRadius: 4 }} />\r\n                <div style={{ fontSize: 12, color: '#555', marginTop: 6 }}>Tháng {m.month}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Card({ title, value, color }){\r\n  return (\r\n    <div style={{ background:'#fff', borderRadius: 10, padding: 12, border: '1px solid #eee' }}>\r\n      <div style={{ fontSize: 12, color: '#666' }}>{title}</div>\r\n      <div style={{ fontWeight: 800, color, fontSize: 20, marginTop: 4 }}>{value}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatVND(n){\r\n  const v = Number(n || 0);\r\n  return v.toLocaleString('vi-VN') + ' đ';\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}