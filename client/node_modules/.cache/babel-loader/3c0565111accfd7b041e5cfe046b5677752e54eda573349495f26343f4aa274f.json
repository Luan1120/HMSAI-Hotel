{"ast":null,"code":"var _jsxFileName = \"D:\\\\DA_TichHop\\\\HMS_AI Hotel\\\\client\\\\src\\\\AdminBookings.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport './HomePage.css';\nimport { authHeaders, getUserRole } from './auth';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STATUS_FILTERS = [{\n  key: '',\n  label: 'Tất cả trạng thái'\n}, {\n  key: 'success',\n  label: 'Thành công'\n}, {\n  key: 'confirmed',\n  label: 'Đã xác nhận'\n}, {\n  key: 'pending',\n  label: 'Chờ xác nhận'\n}, {\n  key: 'canceled',\n  label: 'Đã hủy'\n}];\n\n// Color helper & badge renderer\nfunction bookingStatusClass(key) {\n  const v = String(key || '').toLowerCase();\n  if (v === 'success') return 'status-badge status-green';\n  if (v === 'canceled') return 'status-badge status-red';\n  if (v === 'pending' || v === 'confirmed') return 'status-badge status-yellow';\n  return 'status-badge';\n}\nfunction renderStatusBadge(k) {\n  const v = String(k || '').toLowerCase();\n  let label = '—';\n  if (v === 'success') label = 'Thành công';else if (v === 'confirmed') label = 'Đã xác nhận';else if (v === 'pending') label = 'Chờ xác nhận';else if (v === 'canceled') label = 'Đã hủy';\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: bookingStatusClass(v),\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 10\n  }, this);\n}\nexport default function AdminBookings({\n  isModal,\n  onClose\n}) {\n  _s();\n  const [q, setQ] = useState('');\n  const [status, setStatus] = useState('');\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [detail, setDetail] = useState(null);\n\n  // Update booking status helper (optimistic)\n  const updateStatus = async (booking, nextStatusKey) => {\n    const id = booking.bookingId;\n    const prev = booking.statusKey;\n    // optimistic\n    setItems(list => list.map(b => b.bookingId === id ? {\n      ...b,\n      statusKey: nextStatusKey\n    } : b));\n    try {\n      const res = await fetch(`/api/admin/bookings/${id}/status`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeaders()\n        },\n        body: JSON.stringify({\n          status: nextStatusKey\n        })\n      });\n      if (!res.ok) throw new Error('Cập nhật trạng thái thất bại');\n    } catch (e) {\n      // revert\n      setItems(list => list.map(b => b.bookingId === id ? {\n        ...b,\n        statusKey: prev\n      } : b));\n      alert(e.message || 'Lỗi cập nhật');\n    }\n  };\n  const fetchList = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const url = new URL('/api/admin/bookings', window.location.origin);\n      if (q) url.searchParams.set('q', q);\n      if (status) url.searchParams.set('status', status);\n      const res = await fetch(url, {\n        headers: {\n          ...authHeaders()\n        }\n      });\n      if (!res.ok) throw new Error('Không tải được danh sách đặt phòng');\n      const j = await res.json();\n      setItems(Array.isArray(j.items) ? j.items : []);\n    } catch (e) {\n      setError(e.message || 'Lỗi tải dữ liệu');\n      setItems([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchList();\n  }, []);\n  const debounceRef = useRef(null);\n  useEffect(() => {\n    if (debounceRef.current) clearTimeout(debounceRef.current);\n    debounceRef.current = setTimeout(fetchList, 250);\n    return () => {\n      if (debounceRef.current) clearTimeout(debounceRef.current);\n    };\n  }, [q, status]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-rooms\",\n    style: {\n      padding: isModal ? 0 : '80px 12px 20px'\n    },\n    children: [!isModal && /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"home-header\",\n      style: {\n        position: 'sticky',\n        top: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.png\",\n          alt: \"logo\",\n          className: \"home-header-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          className: \"home-header-title home-header-home-btn\",\n          children: \"TRANG CH\\u1EE6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ph-table\",\n      style: {\n        padding: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"home-rooms-title\",\n        style: {\n          textAlign: 'left',\n          marginTop: 0\n        },\n        children: \"Qu\\u1EA3n l\\xFD \\u0111\\u1EB7t ph\\xF2ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => e.preventDefault(),\n        className: \"au-toolbar\",\n        style: {\n          gridTemplateColumns: '1fr auto auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"au-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"au-input\",\n            placeholder: \"T\\xECm ki\\u1EBFm kh\\xE1ch h\\xE0ng...\",\n            value: q,\n            onChange: e => setQ(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"ph-btn ph-btn--secondary\",\n          value: status,\n          onChange: e => setStatus(e.target.value),\n          style: {\n            height: 36\n          },\n          children: STATUS_FILTERS.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s.key,\n            children: s.label\n          }, s.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 38\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ph-btn au-add-btn\",\n          type: \"button\",\n          onClick: () => alert('Chức năng thêm đặt phòng sẽ sớm có!'),\n          children: \"+ Th\\xEAm \\u0111\\u1EB7t ph\\xF2ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#666'\n        },\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 20\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#b42318'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 78\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-tr ph-head\",\n          style: {\n            gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"M\\xE3 \\u0111\\u01A1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"S\\u0110T\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"S\\u1ED1 ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Lo\\u1EA1i ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Ng\\xE0y nh\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Ng\\xE0y tr\\u1EA3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), items.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-td\",\n          style: {\n            padding: 12,\n            color: '#666'\n          },\n          children: \"Kh\\xF4ng c\\xF3 \\u0111\\u1EB7t ph\\xF2ng n\\xE0o.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this) : items.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-tr\",\n          style: {\n            gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.code\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.customerName || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.customerPhone || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.roomName || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: it.roomType || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: fmtDate(it.checkIn)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: fmtDate(it.checkOut)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            children: renderStatusBadge(it.statusKey)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ph-td\",\n            style: {\n              display: 'flex',\n              gap: 6,\n              whiteSpace: 'nowrap'\n            },\n            children: (() => {\n              const st = String(it.statusKey || '').toLowerCase();\n              const isPending = st === 'pending';\n              const disabled = !isPending;\n              return /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `ph-btn booking-action-btn ${isPending ? 'booking-action--active' : 'booking-action--disabled'}`,\n                  type: \"button\",\n                  disabled: disabled,\n                  onClick: async () => {\n                    if (!isPending) return;\n                    try {\n                      const r = await fetch(`/api/payments/${it.bookingId}/confirm`, {\n                        method: 'PUT',\n                        headers: {\n                          ...authHeaders(),\n                          'Content-Type': 'application/json'\n                        }\n                      });\n                      if (!r.ok) {\n                        const t = await r.text();\n                        throw new Error(t);\n                      }\n                      setItems(list => list.map(b => b.bookingId === it.bookingId ? {\n                        ...b,\n                        statusKey: 'success'\n                      } : b));\n                    } catch (e) {\n                      alert(e.message || 'Lỗi xác nhận');\n                    }\n                  },\n                  title: isPending ? 'Xác nhận thanh toán' : 'Đã xử lý',\n                  children: \"X\\xE1c nh\\u1EADn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `ph-btn booking-action-btn ${isPending ? 'booking-action--active' : 'booking-action--disabled'}`,\n                  type: \"button\",\n                  disabled: disabled,\n                  onClick: async () => {\n                    if (!isPending) return;\n                    if (!window.confirm('Hủy đơn đặt phòng này?')) return;\n                    try {\n                      const r = await fetch(`/api/payments/${it.bookingId}/admin-cancel`, {\n                        method: 'PUT',\n                        headers: {\n                          ...authHeaders(),\n                          'Content-Type': 'application/json'\n                        }\n                      });\n                      if (!r.ok) {\n                        const t = await r.text();\n                        throw new Error(t);\n                      }\n                      setItems(list => list.map(b => b.bookingId === it.bookingId ? {\n                        ...b,\n                        statusKey: 'canceled'\n                      } : b));\n                    } catch (e) {\n                      alert(e.message || 'Lỗi hủy');\n                    }\n                  },\n                  title: isPending ? 'Hủy đơn & hoàn 100%' : 'Đã xử lý',\n                  children: \"H\\u1EE7y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ph-btn ph-btn--secondary\",\n                  type: \"button\",\n                  onClick: () => setDetail(it),\n                  children: \"Chi ti\\u1EBFt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true);\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this)]\n        }, it.bookingId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-overlay\",\n      onMouseDown: e => {\n        if (e.target === e.currentTarget) setDetail(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-modal\",\n        onMouseDown: e => e.stopPropagation(),\n        style: {\n          width: 720,\n          maxWidth: '98%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ph-table\",\n          style: {\n            padding: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: 0\n            },\n            children: \"Chi ti\\u1EBFt \\u0111\\u1EB7t ph\\xF2ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 10,\n              display: 'grid',\n              gridTemplateColumns: '1fr 1fr',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"M\\xE3 \\u0111\\u01A1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 22\n              }, this), \" \", detail.code]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Tr\\u1EA1ng th\\xE1i:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 22\n              }, this), \" \", renderStatus(detail.statusKey)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Kh\\xE1ch h\\xE0ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 22\n              }, this), \" \", detail.customerName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"S\\u0110T:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 22\n              }, this), \" \", detail.customerPhone || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 22\n              }, this), \" \", detail.customerEmail || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Kh\\xE1ch s\\u1EA1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 22\n              }, this), \" \", detail.hotelName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Ph\\xF2ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 22\n              }, this), \" \", detail.roomName || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Lo\\u1EA1i ph\\xF2ng:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 22\n              }, this), \" \", detail.roomType || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Ng\\xE0y nh\\u1EADn:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 22\n              }, this), \" \", fmtDate(detail.checkIn)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Ng\\xE0y tr\\u1EA3:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 22\n              }, this), \" \", fmtDate(detail.checkOut)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"S\\u1ED1 \\u0111\\xEAm:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 22\n              }, this), \" \", detail.nights]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Kh\\xE1ch:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 22\n              }, this), \" \", detail.guests]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"T\\u1ED5ng ti\\u1EC1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 22\n              }, this), \" \", Number(detail.total || 0).toLocaleString('vi-VN'), \" VN\\u0110\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Thanh to\\xE1n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 22\n              }, this), \" \", detail.method || '—']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              textAlign: 'right'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ph-btn\",\n              onClick: () => setDetail(null),\n              children: \"\\u0110\\xF3ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\n        .status-red { background:#ffe8e6; color:#b42318; border-color:#f5b5ae; }\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\n        .booking-action-btn { min-width:82px; font-weight:700; letter-spacing:.3px; position:relative; overflow:hidden; }\n        .booking-action--active {\n          background:linear-gradient(135deg,#ffcc33,#ffe27a 55%,#fff3c1);\n          color:#222;\n          border:1px solid #f6c23e;\n          box-shadow:0 2px 4px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.4) inset;\n          transition: background .25s ease, box-shadow .25s ease, transform .15s ease;\n        }\n        .booking-action--active:hover { background:linear-gradient(135deg,#ffbd00,#ffd659 55%,#ffeaa4); box-shadow:0 4px 10px rgba(0,0,0,.18); }\n        .booking-action--active:active { transform:translateY(1px); }\n        .booking-action--active:focus-visible { outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 3px rgba(255,193,7,.55); }\n        .booking-action--disabled {\n          background:#d9d9d9;\n          color:#555;\n          cursor:not-allowed;\n          border:1px solid #d0d0d0;\n          box-shadow:0 1px 2px rgba(0,0,0,.06) inset, 0 0 0 1px #ececec;\n          text-shadow:0 1px 0 rgba(255,255,255,.55);\n        }\n        .booking-action--disabled:hover { background:#d9d9d9; }\n        .booking-action--disabled:focus-visible { outline:none; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminBookings, \"OSD6x0/7+zdOQRbcoJe+eLhsMSA=\");\n_c = AdminBookings;\nfunction renderStatus(k) {\n  const v = String(k || '').toLowerCase();\n  if (v === 'success') return 'Thành công';\n  if (v === 'confirmed') return 'Đã xác nhận';\n  if (v === 'pending') return 'Chờ xác nhận';\n  if (v === 'canceled') return 'Đã hủy';\n  return '—';\n}\nfunction fmtDate(d) {\n  if (!d) return '—';\n  const dt = new Date(d);\n  const dd = String(dt.getDate()).padStart(2, '0');\n  const mm = String(dt.getMonth() + 1).padStart(2, '0');\n  const yy = dt.getFullYear();\n  return `${dd}/${mm}/${yy}`;\n}\nvar _c;\n$RefreshReg$(_c, \"AdminBookings\");","map":{"version":3,"names":["React","useEffect","useRef","useState","authHeaders","getUserRole","jsxDEV","_jsxDEV","Fragment","_Fragment","STATUS_FILTERS","key","label","bookingStatusClass","v","String","toLowerCase","renderStatusBadge","k","className","children","fileName","_jsxFileName","lineNumber","columnNumber","AdminBookings","isModal","onClose","_s","q","setQ","status","setStatus","items","setItems","loading","setLoading","error","setError","detail","setDetail","updateStatus","booking","nextStatusKey","id","bookingId","prev","statusKey","list","map","b","res","fetch","method","headers","body","JSON","stringify","ok","Error","e","alert","message","fetchList","url","URL","window","location","origin","searchParams","set","j","json","Array","isArray","debounceRef","current","clearTimeout","setTimeout","style","padding","position","top","src","alt","href","textAlign","marginTop","onSubmit","preventDefault","gridTemplateColumns","placeholder","value","onChange","target","height","s","type","onClick","color","length","it","code","customerName","customerPhone","roomName","roomType","fmtDate","checkIn","checkOut","display","gap","whiteSpace","st","isPending","disabled","r","t","text","title","confirm","onMouseDown","currentTarget","stopPropagation","width","maxWidth","margin","renderStatus","customerEmail","hotelName","nights","guests","Number","total","toLocaleString","_c","d","dt","Date","dd","getDate","padStart","mm","getMonth","yy","getFullYear","$RefreshReg$"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminBookings.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport './HomePage.css';\r\nimport { authHeaders, getUserRole } from './auth';\r\n\r\nconst STATUS_FILTERS = [\r\n  { key: '', label: 'Tất cả trạng thái' },\r\n  { key: 'success', label: 'Thành công' },\r\n  { key: 'confirmed', label: 'Đã xác nhận' },\r\n  { key: 'pending', label: 'Chờ xác nhận' },\r\n  { key: 'canceled', label: 'Đã hủy' },\r\n];\r\n\r\n// Color helper & badge renderer\r\nfunction bookingStatusClass(key){\r\n  const v = String(key||'').toLowerCase();\r\n  if(v==='success') return 'status-badge status-green';\r\n  if(v==='canceled') return 'status-badge status-red';\r\n  if(v==='pending' || v==='confirmed') return 'status-badge status-yellow';\r\n  return 'status-badge';\r\n}\r\nfunction renderStatusBadge(k){\r\n  const v = String(k||'').toLowerCase();\r\n  let label = '—';\r\n  if (v === 'success') label = 'Thành công';\r\n  else if (v === 'confirmed') label = 'Đã xác nhận';\r\n  else if (v === 'pending') label = 'Chờ xác nhận';\r\n  else if (v === 'canceled') label = 'Đã hủy';\r\n  return <span className={bookingStatusClass(v)}>{label}</span>;\r\n}\r\n\r\nexport default function AdminBookings({ isModal, onClose }) {\r\n  const [q, setQ] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [detail, setDetail] = useState(null);\r\n\r\n  // Update booking status helper (optimistic)\r\n  const updateStatus = async (booking, nextStatusKey) => {\r\n    const id = booking.bookingId;\r\n    const prev = booking.statusKey;\r\n    // optimistic\r\n    setItems(list => list.map(b => b.bookingId===id ? { ...b, statusKey: nextStatusKey } : b));\r\n    try {\r\n      const res = await fetch(`/api/admin/bookings/${id}/status`, {\r\n        method:'PUT',\r\n        headers:{ 'Content-Type':'application/json', ...authHeaders() },\r\n        body: JSON.stringify({ status: nextStatusKey })\r\n      });\r\n      if(!res.ok) throw new Error('Cập nhật trạng thái thất bại');\r\n    } catch(e){\r\n      // revert\r\n      setItems(list => list.map(b => b.bookingId===id ? { ...b, statusKey: prev } : b));\r\n      alert(e.message || 'Lỗi cập nhật');\r\n    }\r\n  };\r\n\r\n  const fetchList = async () => {\r\n    setLoading(true); setError('');\r\n    try {\r\n      const url = new URL('/api/admin/bookings', window.location.origin);\r\n      if (q) url.searchParams.set('q', q);\r\n      if (status) url.searchParams.set('status', status);\r\n  const res = await fetch(url, { headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Không tải được danh sách đặt phòng');\r\n      const j = await res.json();\r\n      setItems(Array.isArray(j.items) ? j.items : []);\r\n    } catch (e) { setError(e.message || 'Lỗi tải dữ liệu'); setItems([]); }\r\n    finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => { fetchList(); }, []);\r\n  const debounceRef = useRef(null);\r\n  useEffect(() => {\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(fetchList, 250);\r\n    return () => { if (debounceRef.current) clearTimeout(debounceRef.current); };\r\n  }, [q, status]);\r\n\r\n  return (\r\n    <div className=\"admin-rooms\" style={{ padding: isModal ? 0 : '80px 12px 20px' }}>\r\n      {!isModal && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <a href=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</a>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Quản lý đặt phòng</h2>\r\n        <form onSubmit={(e)=>e.preventDefault()} className=\"au-toolbar\" style={{ gridTemplateColumns: '1fr auto auto' }}>\r\n          <div className=\"au-group\">\r\n            <input className=\"au-input\" placeholder=\"Tìm kiếm khách hàng...\" value={q} onChange={e=>setQ(e.target.value)} />\r\n          </div>\r\n          <select className=\"ph-btn ph-btn--secondary\" value={status} onChange={e=>setStatus(e.target.value)} style={{ height: 36 }}>\r\n            {STATUS_FILTERS.map(s => <option key={s.key} value={s.key}>{s.label}</option>)}\r\n          </select>\r\n          <button className=\"ph-btn au-add-btn\" type=\"button\" onClick={()=>alert('Chức năng thêm đặt phòng sẽ sớm có!')}>+ Thêm đặt phòng</button>\r\n        </form>\r\n\r\n        {loading ? <div style={{ color:'#666' }}>Đang tải...</div> : error ? <div style={{ color:'#b42318' }}>{error}</div> : (\r\n          <div>\r\n            <div className=\"ph-tr ph-head\" style={{ gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr' }}>\r\n              <div className=\"ph-td\">Mã đơn</div>\r\n              <div className=\"ph-td\">Khách hàng</div>\r\n              <div className=\"ph-td\">SĐT</div>\r\n              <div className=\"ph-td\">Số phòng</div>\r\n              <div className=\"ph-td\">Loại phòng</div>\r\n              <div className=\"ph-td\">Ngày nhận</div>\r\n              <div className=\"ph-td\">Ngày trả</div>\r\n              <div className=\"ph-td\">Trạng thái</div>\r\n              <div className=\"ph-td\">Hành động</div>\r\n            </div>\r\n            {items.length === 0 ? (\r\n              <div className=\"ph-td\" style={{ padding: 12, color: '#666' }}>Không có đặt phòng nào.</div>\r\n            ) : items.map(it => (\r\n              <div key={it.bookingId} className=\"ph-tr\" style={{ gridTemplateColumns: '130px 1.5fr 1.1fr 0.9fr 1.2fr 1.1fr 1.1fr 1fr 1.3fr' }}>\r\n                <div className=\"ph-td\">{it.code}</div>\r\n                <div className=\"ph-td\">{it.customerName || '—'}</div>\r\n                <div className=\"ph-td\">{it.customerPhone || '—'}</div>\r\n                <div className=\"ph-td\">{it.roomName || '—'}</div>\r\n                <div className=\"ph-td\">{it.roomType || '—'}</div>\r\n                <div className=\"ph-td\">{fmtDate(it.checkIn)}</div>\r\n                <div className=\"ph-td\">{fmtDate(it.checkOut)}</div>\r\n                <div className=\"ph-td\">{renderStatusBadge(it.statusKey)}</div>\r\n                <div className=\"ph-td\" style={{ display:'flex', gap:6, whiteSpace:'nowrap' }}>\r\n                  {(() => {\r\n                    const st = String(it.statusKey||'').toLowerCase();\r\n                    const isPending = st === 'pending';\r\n                    const disabled = !isPending;\r\n                    return (\r\n                      <>\r\n                        <button\r\n                          className={`ph-btn booking-action-btn ${isPending? 'booking-action--active':'booking-action--disabled'}`}\r\n                          type=\"button\"\r\n                          disabled={disabled}\r\n                          onClick={async()=>{\r\n                            if(!isPending) return;\r\n                            try {\r\n                              const r = await fetch(`/api/payments/${it.bookingId}/confirm`, { method:'PUT', headers:{ ...authHeaders(), 'Content-Type':'application/json' } });\r\n                              if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                              setItems(list => list.map(b => b.bookingId===it.bookingId ? { ...b, statusKey:'success' } : b));\r\n                            } catch(e){ alert(e.message||'Lỗi xác nhận'); }\r\n                          }}\r\n                          title={isPending? 'Xác nhận thanh toán' : 'Đã xử lý'}\r\n                        >Xác nhận</button>\r\n                        <button\r\n                          className={`ph-btn booking-action-btn ${isPending? 'booking-action--active':'booking-action--disabled'}`}\r\n                          type=\"button\"\r\n                          disabled={disabled}\r\n                          onClick={async()=>{\r\n                            if(!isPending) return;\r\n                            if(!window.confirm('Hủy đơn đặt phòng này?')) return;\r\n                            try {\r\n                              const r = await fetch(`/api/payments/${it.bookingId}/admin-cancel`, { method:'PUT', headers:{ ...authHeaders(), 'Content-Type':'application/json' } });\r\n                              if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                              setItems(list => list.map(b => b.bookingId===it.bookingId ? { ...b, statusKey:'canceled' } : b));\r\n                            } catch(e){ alert(e.message||'Lỗi hủy'); }\r\n                          }}\r\n                          title={isPending? 'Hủy đơn & hoàn 100%' : 'Đã xử lý'}\r\n                        >Hủy</button>\r\n                        <button className=\"ph-btn ph-btn--secondary\" type=\"button\" onClick={()=>setDetail(it)}>Chi tiết</button>\r\n                      </>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {detail && (\r\n        <div className=\"profile-overlay\" onMouseDown={(e)=>{ if (e.target===e.currentTarget) setDetail(null); }}>\r\n          <div className=\"profile-modal\" onMouseDown={(e)=>e.stopPropagation()} style={{ width: 720, maxWidth:'98%' }}>\r\n            <div className=\"ph-table\" style={{ padding: 16 }}>\r\n              <h3 style={{ margin: 0 }}>Chi tiết đặt phòng</h3>\r\n              <div style={{ marginTop: 10, display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 8 }}>\r\n                <div><b>Mã đơn:</b> {detail.code}</div>\r\n                <div><b>Trạng thái:</b> {renderStatus(detail.statusKey)}</div>\r\n                <div><b>Khách hàng:</b> {detail.customerName || '—'}</div>\r\n                <div><b>SĐT:</b> {detail.customerPhone || '—'}</div>\r\n                <div><b>Email:</b> {detail.customerEmail || '—'}</div>\r\n                <div><b>Khách sạn:</b> {detail.hotelName || '—'}</div>\r\n                <div><b>Phòng:</b> {detail.roomName || '—'}</div>\r\n                <div><b>Loại phòng:</b> {detail.roomType || '—'}</div>\r\n                <div><b>Ngày nhận:</b> {fmtDate(detail.checkIn)}</div>\r\n                <div><b>Ngày trả:</b> {fmtDate(detail.checkOut)}</div>\r\n                <div><b>Số đêm:</b> {detail.nights}</div>\r\n                <div><b>Khách:</b> {detail.guests}</div>\r\n                <div><b>Tổng tiền:</b> {Number(detail.total || 0).toLocaleString('vi-VN')} VNĐ</div>\r\n                <div><b>Thanh toán:</b> {detail.method || '—'}</div>\r\n              </div>\r\n              <div style={{ marginTop: 12, textAlign: 'right' }}>\r\n                <button className=\"ph-btn\" onClick={()=>setDetail(null)}>Đóng</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <style>{`\r\n        .status-badge { font-size:12px; padding:2px 8px 3px; border-radius:999px; border:1px solid transparent; font-weight:500; display:inline-block; }\r\n        .status-green { background:#e6f7ec; color:#086637; border-color:#bfe6ce; }\r\n        .status-red { background:#ffe8e6; color:#b42318; border-color:#f5b5ae; }\r\n        .status-yellow { background:#fff4d6; color:#8a6d00; border-color:#f2d291; }\r\n        .booking-action-btn { min-width:82px; font-weight:700; letter-spacing:.3px; position:relative; overflow:hidden; }\r\n        .booking-action--active {\r\n          background:linear-gradient(135deg,#ffcc33,#ffe27a 55%,#fff3c1);\r\n          color:#222;\r\n          border:1px solid #f6c23e;\r\n          box-shadow:0 2px 4px rgba(0,0,0,.12), 0 0 0 1px rgba(255,255,255,.4) inset;\r\n          transition: background .25s ease, box-shadow .25s ease, transform .15s ease;\r\n        }\r\n        .booking-action--active:hover { background:linear-gradient(135deg,#ffbd00,#ffd659 55%,#ffeaa4); box-shadow:0 4px 10px rgba(0,0,0,.18); }\r\n        .booking-action--active:active { transform:translateY(1px); }\r\n        .booking-action--active:focus-visible { outline:2px solid #fff; outline-offset:2px; box-shadow:0 0 0 3px rgba(255,193,7,.55); }\r\n        .booking-action--disabled {\r\n          background:#d9d9d9;\r\n          color:#555;\r\n          cursor:not-allowed;\r\n          border:1px solid #d0d0d0;\r\n          box-shadow:0 1px 2px rgba(0,0,0,.06) inset, 0 0 0 1px #ececec;\r\n          text-shadow:0 1px 0 rgba(255,255,255,.55);\r\n        }\r\n        .booking-action--disabled:hover { background:#d9d9d9; }\r\n        .booking-action--disabled:focus-visible { outline:none; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction renderStatus(k) {\r\n  const v = String(k||'').toLowerCase();\r\n  if (v === 'success') return 'Thành công';\r\n  if (v === 'confirmed') return 'Đã xác nhận';\r\n  if (v === 'pending') return 'Chờ xác nhận';\r\n  if (v === 'canceled') return 'Đã hủy';\r\n  return '—';\r\n}\r\n\r\nfunction fmtDate(d){ if(!d) return '—'; const dt=new Date(d); const dd=String(dt.getDate()).padStart(2,'0'); const mm=String(dt.getMonth()+1).padStart(2,'0'); const yy=dt.getFullYear(); return `${dd}/${mm}/${yy}`; }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}