{"ast":null,"code":"import _objectSpread from\"D:/DA_TichHop/HMS_AI Hotel/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState}from'react';import{Link,useNavigate}from'react-router-dom';import'./HomePage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function PaymentHistory(_ref){let{inline=false,onReview}=_ref;const navigate=useNavigate();const[user,setUser]=useState(null);const[items,setItems]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[q,setQ]=useState('');const[fromDate,setFromDate]=useState(()=>{const now=new Date();const start=new Date(now.getFullYear(),now.getMonth(),1);return toISODate(start);});const[toDate,setToDate]=useState(()=>{const now=new Date();const end=new Date(now.getFullYear(),now.getMonth()+1,0);return toISODate(end);});const[status,setStatus]=useState('all');const[page,setPage]=useState(1);const pageSize=10;useEffect(()=>{try{const u=localStorage.getItem('hmsUser');setUser(u?JSON.parse(u):null);}catch(_unused){setUser(null);}},[]);const fetchList=async()=>{if(!(user!==null&&user!==void 0&&user.email))return;setLoading(true);setError('');try{const url=new URL('/api/transactions',window.location.origin);url.searchParams.set('email',user.email);if(q)url.searchParams.set('q',q);if(status&&status!=='all')url.searchParams.set('status',status);if(fromDate)url.searchParams.set('from',fromDate);if(toDate)url.searchParams.set('to',toDate);const res=await fetch(url.toString());if(!res.ok)throw new Error('Không tải được dữ liệu');const j=await res.json();let raw=Array.isArray(j.items)?j.items:[];// Rehydrate refund info for canceled bookings (if server omitted it)\nraw=raw.map(it=>{if(it.paymentStatus==='canceled'){if(it.refundAmount==null){// Try localStorage cache first\ntry{const cache=localStorage.getItem('refund:'+it.bookingId);if(cache){const parsed=JSON.parse(cache);if(parsed&&typeof parsed.refundAmount!=='undefined'){return _objectSpread(_objectSpread({},it),{},{refundAmount:parsed.refundAmount,cancellationFee:parsed.cancellationFee});}}}catch(_unused2){}// Fallback compute (85% refund, 15% fee) based on total if available\nconst total=Number(it.total)||0;if(total>0){const refundAmount=Math.round(total*0.85);const cancellationFee=total-refundAmount;return _objectSpread(_objectSpread({},it),{},{refundAmount,cancellationFee});}}}return it;});setItems(raw);}catch(e){setError(e.message||'Lỗi tải dữ liệu');}finally{setLoading(false);}};useEffect(()=>{fetchList();},[user]);const filtered=useMemo(()=>items,[items]);const totalPages=Math.max(1,Math.ceil(filtered.length/pageSize));const pageItems=filtered.slice((page-1)*pageSize,page*pageSize);const topScrollRef=useRef(null);const tableRef=useRef(null);return/*#__PURE__*/_jsxs(\"div\",{className:inline?'':'home-root',style:{paddingTop:inline?0:80},children:[!inline&&/*#__PURE__*/_jsxs(\"header\",{className:\"home-header\",style:{position:'sticky',top:0},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home-header-left\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"logo\",className:\"home-header-logo\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"home-header-title home-header-home-btn\",children:\"TRANG CH\\u1EE6\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"home-header-icons\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"home-header-icon\",title:\"\\u0110\\u0103ng nh\\u1EADp\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/icon-user.png\",alt:\"user\",className:\"home-header-icon-img\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:inline?'6px':'16px 12px'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"home-rooms-title\",style:{textAlign:'left',marginTop:12},children:\"L\\u1ECBch s\\u1EED giao d\\u1ECBch\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rt-toolbar\",style:{alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rt-field rt-field--wide\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\u1EEB kh\\xF3a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"VD: HMS20250904 ho\\u1EB7c HMS-AI \\u0110\\xE0 N\\u1EB5ng\",value:q,onChange:e=>setQ(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rt-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\u1EEB ng\\xE0y\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fromDate,onChange:e=>setFromDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rt-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0110\\u1EBFn ng\\xE0y\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:toDate,min:fromDate||undefined,onChange:e=>setToDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rt-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsxs(\"select\",{value:status,onChange:e=>setStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"T\\u1EA5t c\\u1EA3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid\",children:\"\\u0110\\xE3 thanh to\\xE1n\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Ch\\u1EDD thanh to\\xE1n\"}),/*#__PURE__*/_jsx(\"option\",{value:\"canceled\",children:\"H\\u1EE7y\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn\",onClick:()=>{setPage(1);fetchList();},children:\"T\\xECm ki\\u1EBFm\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",onClick:()=>exportCsv(filtered),children:\"Xu\\u1EA5t CSV\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto',maxWidth:'100%'},ref:topScrollRef,className:\"ph-scroll-top\",children:/*#__PURE__*/_jsxs(\"div\",{ref:tableRef,className:\"ph-table\",role:\"table\",\"aria-label\":\"L\\u1ECBch s\\u1EED giao d\\u1ECBch\",style:{minWidth:1700},children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-tr ph-head ph-hist\",role:\"row\",children:['MÃ ĐẶT PHÒNG','KHÁCH SẠN','PHÒNG','LOẠI PHÒNG','NHẬN PHÒNG','TRẢ PHÒNG','SỐ ĐÊM','KHÁCH','GIÁ/ĐÊM','TỔNG TIỀN','THANH TOÁN','THỜI GIAN TT','PTTT','HÀNH ĐỘNG'].map(h=>/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",role:\"columnheader\",children:h},h))}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"ph-empty\",children:\"\\u0110ang t\\u1EA3i...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"ph-empty\",style:{color:'#c1121f'},children:error}):pageItems.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"ph-empty\",children:\"Ch\\u01B0a c\\xF3 giao d\\u1ECBch\"}):pageItems.map(it=>/*#__PURE__*/_jsxs(\"div\",{className:\"ph-tr ph-hist\",role:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-td code\",children:it.code}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.hotelName}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.roomName||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.roomType||'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:fmtDateTime(it.checkIn)}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:fmtDateTime(it.checkOut)}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td center\",children:it.nights}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.guests}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-td right\",children:[fmtMoney(it.pricePerNight),\" VND\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-td right\",children:[fmtMoney(it.total),\" VND\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:/*#__PURE__*/_jsx(StatusBadge,{status:it.paymentStatus})}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.paidAt?fmtDateTime(it.paidAt):'—'}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:it.method||'—'}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-td action ph-action-inline\",children:[(()=>{const reviewedKey='reviewedBooking:'+it.bookingId;let reviewed=false;try{reviewed=!!localStorage.getItem(reviewedKey);}catch(_unused3){}const reviewLabel=reviewed?'Đã đánh giá':'Đánh giá';const reviewNode=typeof onReview==='function'?/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:reviewed?'ph-link disabled':'ph-link',onClick:e=>{e.preventDefault();if(reviewed)return;onReview(it);try{localStorage.setItem(reviewedKey,'1');}catch(_unused4){};setItems(list=>list.map(x=>x.bookingId===it.bookingId?_objectSpread({},x):x));},children:reviewLabel}):/*#__PURE__*/_jsx(\"a\",{href:buildReviewHref(it),className:reviewed?'ph-link disabled':'ph-link',onClick:()=>{if(!reviewed){try{localStorage.setItem(reviewedKey,'1');}catch(_unused5){};}},children:reviewLabel});return/*#__PURE__*/_jsx(_Fragment,{children:reviewNode});})(),it.paymentStatus==='pending'&&/*#__PURE__*/_jsx(\"button\",{className:\"ph-cancel-btn\",onClick:async()=>{if(!window.confirm('Hủy giao dịch này? Hoàn 85%, phí 15%.'))return;try{const uRaw=localStorage.getItem('hmsUser');const email=uRaw?JSON.parse(uRaw).email:null;if(!email){alert('Chưa đăng nhập');return;}const r=await fetch(\"/api/payments/\".concat(it.bookingId,\"/cancel\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});if(!r.ok){const t=await r.text();throw new Error(t);}const j=await r.json();setItems(list=>list.map(x=>x.bookingId===it.bookingId?_objectSpread(_objectSpread({},x),{},{paymentStatus:'canceled',refundAmount:j.refundAmount,cancellationFee:j.cancellationFee}):x));// Persist refund info locally so it shows after navigation\ntry{localStorage.setItem('refund:'+it.bookingId,JSON.stringify({refundAmount:j.refundAmount,cancellationFee:j.cancellationFee}));}catch(_unused6){}}catch(e){alert(e.message||'Hủy thất bại');}},title:\"H\\u1EE7y giao d\\u1ECBch\",children:\"H\\u1EE7y\"}),it.paymentStatus==='canceled'&&it.refundAmount!=null&&/*#__PURE__*/_jsxs(\"span\",{className:\"ph-refund-note\",children:[\"Ho\\xE0n: \",Number(it.refundAmount).toLocaleString('vi-VN'),\" VND\"]})]})]},it.bookingId))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-pager\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:page<=1,onClick:()=>setPage(p=>Math.max(1,p-1)),children:\"\\xAB\"}),Array.from({length:totalPages},(_,i)=>i+1).slice(0,5).map(n=>/*#__PURE__*/_jsx(\"button\",{className:n===page?'active':'',onClick:()=>setPage(n),children:n},n)),/*#__PURE__*/_jsx(\"button\",{disabled:page>=totalPages,onClick:()=>setPage(p=>Math.min(totalPages,p+1)),children:\"\\xBB\"})]})]})]});}function StatusBadge(_ref2){let{status}=_ref2;const map={paid:{text:'Đã thanh toán',cls:'ok'},pending:{text:'Chờ thanh toán',cls:'pending'},canceled:{text:'Hủy',cls:'cancel'}};const s=map[status]||map.pending;return/*#__PURE__*/_jsx(\"span\",{className:\"ph-badge \".concat(s.cls),children:s.text});}function toISODate(d){const dt=new Date(d);const y=dt.getFullYear();const m=String(dt.getMonth()+1).padStart(2,'0');const day=String(dt.getDate()).padStart(2,'0');return\"\".concat(y,\"-\").concat(m,\"-\").concat(day);}function fmtDate(d){const dt=new Date(d);const dd=String(dt.getDate()).padStart(2,'0');const mm=String(dt.getMonth()+1).padStart(2,'0');const yy=dt.getFullYear();return\"\".concat(dd,\"/\").concat(mm,\"/\").concat(yy);}function fmtDateTime(d){if(!d)return'';const dt=new Date(d);const hh=String(dt.getHours()).padStart(2,'0');const mi=String(dt.getMinutes()).padStart(2,'0');return\"\".concat(fmtDate(dt),\" \").concat(hh,\":\").concat(mi);}function toISO(s){const[d,m,y]=s.split('/');return\"\".concat(y,\"-\").concat(m,\"-\").concat(d);}function fmtMoney(n){return Number(n||0).toLocaleString('vi-VN');}function exportCsv(list){const header=['Mã đặt','Khách sạn','Phòng','Loại phòng','Nhận','Trả','Số đêm','Khách','Giá/đêm','Tổng','Trạng thái','Thanh toán','PTTT'];const rows=list.map(it=>[it.code,it.hotelName,it.roomName||'',it.roomType||'',fmtDateTime(it.checkIn),fmtDateTime(it.checkOut),it.nights,it.guests,fmtMoney(it.pricePerNight),fmtMoney(it.total),it.paymentStatus,it.paidAt?fmtDateTime(it.paidAt):'',it.method]);const csv=[header,...rows].map(r=>r.map(v=>\"\\\"\".concat(String(v).replace(/\"/g,'\"\"'),\"\\\"\")).join(',')).join('\\n');const blob=new Blob([\"\\uFEFF\"+csv],{type:'text/csv;charset=utf-8;'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='lich-su-giao-dich.csv';a.click();}function buildReviewHref(it){const q=new URLSearchParams({bookingId:String(it.bookingId||''),hotel:String(it.hotelName||''),roomType:String(it.roomType||''),ci:it.checkIn?toISODate(it.checkIn):'',co:it.checkOut?toISODate(it.checkOut):''});return\"/review?\".concat(q.toString());}// Styles for .ph-action-inline, .ph-link, .ph-cancel-btn, .ph-refund-note moved to HomePage.css","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PaymentHistory","_ref","inline","onReview","navigate","user","setUser","items","setItems","loading","setLoading","error","setError","q","setQ","fromDate","setFromDate","now","Date","start","getFullYear","getMonth","toISODate","toDate","setToDate","end","status","setStatus","page","setPage","pageSize","u","localStorage","getItem","JSON","parse","_unused","fetchList","email","url","URL","window","location","origin","searchParams","set","res","fetch","toString","ok","Error","j","json","raw","Array","isArray","map","it","paymentStatus","refundAmount","cache","bookingId","parsed","_objectSpread","cancellationFee","_unused2","total","Number","Math","round","e","message","filtered","totalPages","max","ceil","length","pageItems","slice","topScrollRef","tableRef","className","style","paddingTop","children","position","top","src","alt","to","title","padding","textAlign","marginTop","alignItems","type","placeholder","value","onChange","target","min","undefined","onClick","exportCsv","overflowX","maxWidth","ref","role","minWidth","h","color","code","hotelName","roomName","roomType","fmtDateTime","checkIn","checkOut","nights","guests","fmtMoney","pricePerNight","StatusBadge","paidAt","method","reviewedKey","reviewed","_unused3","reviewLabel","reviewNode","href","preventDefault","setItem","_unused4","list","x","buildReviewHref","_unused5","confirm","uRaw","alert","r","concat","headers","body","stringify","t","text","_unused6","toLocaleString","disabled","p","from","_","i","n","_ref2","paid","cls","pending","canceled","s","d","dt","y","m","String","padStart","day","getDate","fmtDate","dd","mm","yy","hh","getHours","mi","getMinutes","toISO","split","header","rows","csv","v","replace","join","blob","Blob","a","document","createElement","createObjectURL","download","click","URLSearchParams","hotel","ci","co"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/PaymentHistory.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport './HomePage.css';\r\n\r\nexport default function PaymentHistory({ inline = false, onReview }) {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState(null);\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [q, setQ] = useState('');\r\n  const [fromDate, setFromDate] = useState(() => {\r\n    const now = new Date();\r\n    const start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    return toISODate(start);\r\n  });\r\n  const [toDate, setToDate] = useState(() => {\r\n    const now = new Date();\r\n    const end = new Date(now.getFullYear(), now.getMonth()+1, 0);\r\n    return toISODate(end);\r\n  });\r\n  const [status, setStatus] = useState('all');\r\n  const [page, setPage] = useState(1);\r\n  const pageSize = 10;\r\n\r\n  useEffect(() => {\r\n    try { const u = localStorage.getItem('hmsUser'); setUser(u? JSON.parse(u): null);} catch { setUser(null);} \r\n  }, []);\r\n\r\n  const fetchList = async () => {\r\n    if (!user?.email) return;\r\n    setLoading(true); setError('');\r\n    try {\r\n      const url = new URL('/api/transactions', window.location.origin);\r\n      url.searchParams.set('email', user.email);\r\n      if (q) url.searchParams.set('q', q);\r\n      if (status && status !== 'all') url.searchParams.set('status', status);\r\n      if (fromDate) url.searchParams.set('from', fromDate);\r\n      if (toDate) url.searchParams.set('to', toDate);\r\n      const res = await fetch(url.toString());\r\n      if (!res.ok) throw new Error('Không tải được dữ liệu');\r\n      const j = await res.json();\r\n      let raw = Array.isArray(j.items)? j.items: [];\r\n      // Rehydrate refund info for canceled bookings (if server omitted it)\r\n      raw = raw.map(it => {\r\n        if(it.paymentStatus === 'canceled') {\r\n          if(it.refundAmount == null) {\r\n            // Try localStorage cache first\r\n            try {\r\n              const cache = localStorage.getItem('refund:'+it.bookingId);\r\n              if(cache) {\r\n                const parsed = JSON.parse(cache);\r\n                if(parsed && typeof parsed.refundAmount !== 'undefined') {\r\n                  return { ...it, refundAmount: parsed.refundAmount, cancellationFee: parsed.cancellationFee };\r\n                }\r\n              }\r\n            } catch {}\r\n            // Fallback compute (85% refund, 15% fee) based on total if available\r\n            const total = Number(it.total)||0;\r\n            if(total>0) {\r\n              const refundAmount = Math.round(total * 0.85);\r\n              const cancellationFee = total - refundAmount;\r\n              return { ...it, refundAmount, cancellationFee };\r\n            }\r\n          }\r\n        }\r\n        return it;\r\n      });\r\n      setItems(raw);\r\n    } catch (e) { setError(e.message || 'Lỗi tải dữ liệu'); }\r\n    finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => { fetchList(); }, [user]);\r\n\r\n  const filtered = useMemo(() => items, [items]);\r\n  const totalPages = Math.max(1, Math.ceil(filtered.length / pageSize));\r\n  const pageItems = filtered.slice((page-1)*pageSize, page*pageSize);\r\n\r\n  const topScrollRef = useRef(null);\r\n  const tableRef = useRef(null);\r\n\r\n  return (\r\n    <div className={inline ? '' : 'home-root'} style={{ paddingTop: inline ? 0 : 80 }}>\r\n      {!inline && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <Link to=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</Link>\r\n          </div>\r\n          <div className=\"home-header-icons\">\r\n            <Link to=\"/login\" className=\"home-header-icon\" title=\"Đăng nhập\">\r\n              <img src=\"/icon-user.png\" alt=\"user\" className=\"home-header-icon-img\" />\r\n            </Link>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div style={{ padding: inline ? '6px' : '16px 12px' }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 12 }}>Lịch sử giao dịch</h2>\r\n        <div className=\"rt-toolbar\" style={{ alignItems: 'center' }}>\r\n          <div className=\"rt-field rt-field--wide\">\r\n            <label>Từ khóa</label>\r\n            <input type=\"text\" placeholder=\"VD: HMS20250904 hoặc HMS-AI Đà Nẵng\" value={q} onChange={(e)=>setQ(e.target.value)} />\r\n          </div>\r\n          <div className=\"rt-field\">\r\n            <label>Từ ngày</label>\r\n            <input type=\"date\" value={fromDate} onChange={(e)=>setFromDate(e.target.value)} />\r\n          </div>\r\n          <div className=\"rt-field\">\r\n            <label>Đến ngày</label>\r\n            <input type=\"date\" value={toDate} min={fromDate || undefined} onChange={(e)=>setToDate(e.target.value)} />\r\n          </div>\r\n          <div className=\"rt-field\">\r\n            <label>Trạng thái</label>\r\n            <select value={status} onChange={(e)=>setStatus(e.target.value)}>\r\n              <option value=\"all\">Tất cả</option>\r\n              <option value=\"paid\">Đã thanh toán</option>\r\n              <option value=\"pending\">Chờ thanh toán</option>\r\n              <option value=\"canceled\">Hủy</option>\r\n            </select>\r\n          </div>\r\n          <button className=\"ph-btn\" onClick={()=>{setPage(1); fetchList();}}>Tìm kiếm</button>\r\n          <button className=\"ph-btn ph-btn--secondary\" onClick={()=>exportCsv(filtered)}>Xuất CSV</button>\r\n        </div>\r\n\r\n        <div style={{ overflowX:'auto', maxWidth:'100%' }} ref={topScrollRef} className=\"ph-scroll-top\">\r\n          <div ref={tableRef} className=\"ph-table\" role=\"table\" aria-label=\"Lịch sử giao dịch\" style={{ minWidth:1700 }}>\r\n            <div className=\"ph-tr ph-head ph-hist\" role=\"row\">\r\n              {['MÃ ĐẶT PHÒNG','KHÁCH SẠN','PHÒNG','LOẠI PHÒNG','NHẬN PHÒNG','TRẢ PHÒNG','SỐ ĐÊM','KHÁCH','GIÁ/ĐÊM','TỔNG TIỀN','THANH TOÁN','THỜI GIAN TT','PTTT','HÀNH ĐỘNG'].map(h=> (\r\n                <div key={h} className=\"ph-td\" role=\"columnheader\">{h}</div>\r\n              ))}\r\n            </div>\r\n            {loading ? (\r\n              <div className=\"ph-empty\">Đang tải...</div>\r\n            ) : error ? (\r\n              <div className=\"ph-empty\" style={{ color: '#c1121f' }}>{error}</div>\r\n            ) : pageItems.length === 0 ? (\r\n              <div className=\"ph-empty\">Chưa có giao dịch</div>\r\n            ) : (\r\n              pageItems.map((it) => (\r\n                <div className=\"ph-tr ph-hist\" role=\"row\" key={it.bookingId}>\r\n                  <div className=\"ph-td code\">{it.code}</div>\r\n                  <div className=\"ph-td\">{it.hotelName}</div>\r\n                  <div className=\"ph-td\">{it.roomName || '—'}</div>\r\n                  <div className=\"ph-td\">{it.roomType || '—'}</div>\r\n                  <div className=\"ph-td\">{fmtDateTime(it.checkIn)}</div>\r\n                  <div className=\"ph-td\">{fmtDateTime(it.checkOut)}</div>\r\n                  <div className=\"ph-td center\">{it.nights}</div>\r\n                  <div className=\"ph-td\">{it.guests}</div>\r\n                  <div className=\"ph-td right\">{fmtMoney(it.pricePerNight)} VND</div>\r\n                  <div className=\"ph-td right\">{fmtMoney(it.total)} VND</div>\r\n                  <div className=\"ph-td\"><StatusBadge status={it.paymentStatus} /></div>\r\n                  <div className=\"ph-td\">{it.paidAt ? fmtDateTime(it.paidAt) : '—'}</div>\r\n                  <div className=\"ph-td\">{it.method || '—'}</div>\r\n                  <div className=\"ph-td action ph-action-inline\">\r\n                    {(() => {\r\n                      const reviewedKey = 'reviewedBooking:' + it.bookingId;\r\n                      let reviewed = false; try { reviewed = !!localStorage.getItem(reviewedKey); } catch {}\r\n                      const reviewLabel = reviewed ? 'Đã đánh giá' : 'Đánh giá';\r\n                      const reviewNode = (typeof onReview === 'function') ? (\r\n                        <a href=\"#\" className={reviewed? 'ph-link disabled' : 'ph-link'} onClick={(e)=>{ e.preventDefault(); if(reviewed) return; onReview(it); try { localStorage.setItem(reviewedKey,'1'); } catch {}; setItems(list=> list.map(x=> x.bookingId===it.bookingId ? { ...x } : x)); }}>{reviewLabel}</a>\r\n                      ) : (\r\n                        <a href={buildReviewHref(it)} className={reviewed? 'ph-link disabled':'ph-link'} onClick={()=>{ if(!reviewed){ try { localStorage.setItem(reviewedKey,'1'); } catch {}; } }}>{reviewLabel}</a>\r\n                      );\r\n                      return <>{reviewNode}</>;\r\n                    })()}\r\n                    {it.paymentStatus==='pending' && (\r\n                      <button\r\n                        className=\"ph-cancel-btn\"\r\n                        onClick={async()=>{\r\n                          if(!window.confirm('Hủy giao dịch này? Hoàn 85%, phí 15%.')) return;\r\n                          try {\r\n                            const uRaw = localStorage.getItem('hmsUser');\r\n                            const email = uRaw? JSON.parse(uRaw).email: null;\r\n                            if(!email) { alert('Chưa đăng nhập'); return; }\r\n                            const r = await fetch(`/api/payments/${it.bookingId}/cancel`, { method:'PUT', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email }) });\r\n                            if(!r.ok){ const t=await r.text(); throw new Error(t); }\r\n                            const j = await r.json();\r\n                            setItems(list => list.map(x => x.bookingId===it.bookingId ? { ...x, paymentStatus:'canceled', refundAmount:j.refundAmount, cancellationFee:j.cancellationFee } : x));\r\n                            // Persist refund info locally so it shows after navigation\r\n                            try { localStorage.setItem('refund:'+it.bookingId, JSON.stringify({ refundAmount:j.refundAmount, cancellationFee:j.cancellationFee })); } catch {}\r\n                          } catch(e){ alert(e.message||'Hủy thất bại'); }\r\n                        }}\r\n                        title=\"Hủy giao dịch\"\r\n                      >Hủy</button>\r\n                    )}\r\n                    {it.paymentStatus==='canceled' && (it.refundAmount!=null) && (\r\n                      <span className=\"ph-refund-note\">Hoàn: {Number(it.refundAmount).toLocaleString('vi-VN')} VND</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n        {/* Removed secondary scrollbar to keep UI clean */}\r\n\r\n        <div className=\"ph-pager\">\r\n          <button disabled={page<=1} onClick={()=>setPage((p)=>Math.max(1,p-1))}>«</button>\r\n          {Array.from({length: totalPages}, (_,i)=>i+1).slice(0,5).map(n => (\r\n            <button key={n} className={n===page? 'active': ''} onClick={()=>setPage(n)}>{n}</button>\r\n          ))}\r\n          <button disabled={page>=totalPages} onClick={()=>setPage((p)=>Math.min(totalPages,p+1))}>»</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StatusBadge({ status }) {\r\n  const map = {\r\n    paid: { text: 'Đã thanh toán', cls: 'ok' },\r\n    pending: { text: 'Chờ thanh toán', cls: 'pending' },\r\n    canceled: { text: 'Hủy', cls: 'cancel' },\r\n  };\r\n  const s = map[status] || map.pending;\r\n  return <span className={`ph-badge ${s.cls}`}>{s.text}</span>;\r\n}\r\n\r\nfunction toISODate(d){ const dt = new Date(d); const y=dt.getFullYear(); const m=String(dt.getMonth()+1).padStart(2,'0'); const day=String(dt.getDate()).padStart(2,'0'); return `${y}-${m}-${day}`; }\r\nfunction fmtDate(d){ const dt = new Date(d); const dd=String(dt.getDate()).padStart(2,'0'); const mm = String(dt.getMonth()+1).padStart(2,'0'); const yy = dt.getFullYear(); return `${dd}/${mm}/${yy}`; }\r\nfunction fmtDateTime(d){ if(!d) return ''; const dt=new Date(d); const hh=String(dt.getHours()).padStart(2,'0'); const mi=String(dt.getMinutes()).padStart(2,'0'); return `${fmtDate(dt)} ${hh}:${mi}`; }\r\nfunction toISO(s){ const [d,m,y] = s.split('/'); return `${y}-${m}-${d}`; }\r\nfunction fmtMoney(n){ return Number(n||0).toLocaleString('vi-VN'); }\r\nfunction exportCsv(list){\r\n  const header = ['Mã đặt','Khách sạn','Phòng','Loại phòng','Nhận','Trả','Số đêm','Khách','Giá/đêm','Tổng','Trạng thái','Thanh toán','PTTT'];\r\n  const rows = list.map(it => [\r\n    it.code,\r\n    it.hotelName,\r\n    (it.roomName||''),\r\n    (it.roomType||''),\r\n    fmtDateTime(it.checkIn),\r\n    fmtDateTime(it.checkOut),\r\n    it.nights,\r\n    it.guests,\r\n    fmtMoney(it.pricePerNight),\r\n    fmtMoney(it.total),\r\n    it.paymentStatus,\r\n    (it.paidAt?fmtDateTime(it.paidAt):''),\r\n    it.method\r\n  ]);\r\n  const csv = [header, ...rows].map(r=>r.map(v=>`\"${String(v).replace(/\"/g,'\"\"')}\"`).join(',')).join('\\n');\r\n  const blob = new Blob([\"\\uFEFF\"+csv], { type: 'text/csv;charset=utf-8;' });\r\n  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'lich-su-giao-dich.csv'; a.click();\r\n}\r\n\r\nfunction buildReviewHref(it){\r\n  const q = new URLSearchParams({\r\n    bookingId: String(it.bookingId || ''),\r\n    hotel: String(it.hotelName || ''),\r\n    roomType: String(it.roomType || ''),\r\n    ci: it.checkIn ? toISODate(it.checkIn) : '',\r\n    co: it.checkOut ? toISODate(it.checkOut) : '',\r\n  });\r\n  return `/review?${q.toString()}`;\r\n}\r\n\r\n// Styles for .ph-action-inline, .ph-link, .ph-cancel-btn, .ph-refund-note moved to HomePage.css\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}