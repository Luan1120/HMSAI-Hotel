{"ast":null,"code":"export function getCurrentUser(){try{const raw=localStorage.getItem('hmsUser');return raw?JSON.parse(raw):null;}catch(_unused){return null;}}export function getUserEmail(){const u=getCurrentUser();return u&&u.email?u.email:null;}export function getUserRole(){const u=getCurrentUser();const raw=u&&u.role?u.role:'Customer';const ascii=String(raw||'').normalize('NFD').replace(/[\\u0300-\\u036f]/g,'').toLowerCase();if(ascii==='admin'||ascii.includes('quan tri'))return'Admin';if(ascii==='staff'||ascii.includes('nhan vien')||ascii.includes('nhan-vien'))return'Staff';return'Customer';}export function hasRole(roles){const role=getUserRole();return Array.isArray(roles)?roles.includes(role):false;}export function authHeaders(){const email=getUserEmail();const headers={};if(email)headers['x-user-email']=email;return headers;}// Helper: kiểm tra đã đăng nhập chưa\nexport function isLoggedIn(){return!!getCurrentUser();}","map":{"version":3,"names":["getCurrentUser","raw","localStorage","getItem","JSON","parse","_unused","getUserEmail","u","email","getUserRole","role","ascii","String","normalize","replace","toLowerCase","includes","hasRole","roles","Array","isArray","authHeaders","headers","isLoggedIn"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/auth.js"],"sourcesContent":["export function getCurrentUser() {\r\n  try {\r\n    const raw = localStorage.getItem('hmsUser');\r\n    return raw ? JSON.parse(raw) : null;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function getUserEmail() {\r\n  const u = getCurrentUser();\r\n  return (u && u.email) ? u.email : null;\r\n}\r\n\r\nexport function getUserRole() {\r\n  const u = getCurrentUser();\r\n  const raw = (u && u.role) ? u.role : 'Customer';\r\n  const ascii = String(raw || '')\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase();\r\n  if (ascii === 'admin' || ascii.includes('quan tri')) return 'Admin';\r\n  if (ascii === 'staff' || ascii.includes('nhan vien') || ascii.includes('nhan-vien')) return 'Staff';\r\n  return 'Customer';\r\n}\r\n\r\nexport function hasRole(roles) {\r\n  const role = getUserRole();\r\n  return Array.isArray(roles) ? roles.includes(role) : false;\r\n}\r\n\r\nexport function authHeaders() {\r\n  const email = getUserEmail();\r\n  const headers = {};\r\n  if (email) headers['x-user-email'] = email;\r\n  return headers;\r\n}\r\n\r\n// Helper: kiểm tra đã đăng nhập chưa\r\nexport function isLoggedIn() {\r\n  return !!getCurrentUser();\r\n}\r\n"],"mappings":"AAAA,MAAO,SAAS,CAAAA,cAAcA,CAAA,CAAG,CAC/B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAC3C,MAAO,CAAAF,GAAG,CAAGG,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC,CAAG,IAAI,CACrC,CAAE,MAAAK,OAAA,CAAM,CACN,MAAO,KAAI,CACb,CACF,CAEA,MAAO,SAAS,CAAAC,YAAYA,CAAA,CAAG,CAC7B,KAAM,CAAAC,CAAC,CAAGR,cAAc,CAAC,CAAC,CAC1B,MAAQ,CAAAQ,CAAC,EAAIA,CAAC,CAACC,KAAK,CAAID,CAAC,CAACC,KAAK,CAAG,IAAI,CACxC,CAEA,MAAO,SAAS,CAAAC,WAAWA,CAAA,CAAG,CAC5B,KAAM,CAAAF,CAAC,CAAGR,cAAc,CAAC,CAAC,CAC1B,KAAM,CAAAC,GAAG,CAAIO,CAAC,EAAIA,CAAC,CAACG,IAAI,CAAIH,CAAC,CAACG,IAAI,CAAG,UAAU,CAC/C,KAAM,CAAAC,KAAK,CAAGC,MAAM,CAACZ,GAAG,EAAI,EAAE,CAAC,CAC5Ba,SAAS,CAAC,KAAK,CAAC,CAChBC,OAAO,CAAC,kBAAkB,CAAE,EAAE,CAAC,CAC/BC,WAAW,CAAC,CAAC,CAChB,GAAIJ,KAAK,GAAK,OAAO,EAAIA,KAAK,CAACK,QAAQ,CAAC,UAAU,CAAC,CAAE,MAAO,OAAO,CACnE,GAAIL,KAAK,GAAK,OAAO,EAAIA,KAAK,CAACK,QAAQ,CAAC,WAAW,CAAC,EAAIL,KAAK,CAACK,QAAQ,CAAC,WAAW,CAAC,CAAE,MAAO,OAAO,CACnG,MAAO,UAAU,CACnB,CAEA,MAAO,SAAS,CAAAC,OAAOA,CAACC,KAAK,CAAE,CAC7B,KAAM,CAAAR,IAAI,CAAGD,WAAW,CAAC,CAAC,CAC1B,MAAO,CAAAU,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,CAAGA,KAAK,CAACF,QAAQ,CAACN,IAAI,CAAC,CAAG,KAAK,CAC5D,CAEA,MAAO,SAAS,CAAAW,WAAWA,CAAA,CAAG,CAC5B,KAAM,CAAAb,KAAK,CAAGF,YAAY,CAAC,CAAC,CAC5B,KAAM,CAAAgB,OAAO,CAAG,CAAC,CAAC,CAClB,GAAId,KAAK,CAAEc,OAAO,CAAC,cAAc,CAAC,CAAGd,KAAK,CAC1C,MAAO,CAAAc,OAAO,CAChB,CAEA;AACA,MAAO,SAAS,CAAAC,UAAUA,CAAA,CAAG,CAC3B,MAAO,CAAC,CAACxB,cAAc,CAAC,CAAC,CAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}