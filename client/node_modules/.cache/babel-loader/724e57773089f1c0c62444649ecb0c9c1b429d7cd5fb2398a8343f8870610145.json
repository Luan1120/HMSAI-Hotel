{"ast":null,"code":"import _objectSpread from\"D:/DA_TichHop/HMS_AI Hotel/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState}from'react';import'./HomePage.css';import{authHeaders}from'./auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminUsers(_ref){let{isModal,onClose}=_ref;const[q,setQ]=useState('');const[users,setUsers]=useState([]);const[selectedUserId,setSelectedUserId]=useState(null);const[roles,setRoles]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[isCreateOpen,setIsCreateOpen]=useState(false);const[creating,setCreating]=useState(false);// submitting state\nconst[newUser,setNewUser]=useState({name:'',email:'',password:'',roleId:''});const[newErrors,setNewErrors]=useState({});const computedErrors=useMemo(()=>{const e={};const emailRe=/^\\S+@\\S+\\.\\S+$/;if(!newUser.name||!newUser.name.trim())e.name='Vui lòng nhập tên';if(!newUser.email||!emailRe.test(newUser.email))e.email='Email không hợp lệ';if(!newUser.password||String(newUser.password).length<6)e.password='Mật khẩu tối thiểu 6 ký tự';if(!newUser.roleId||Number.isNaN(Number(newUser.roleId)))e.roleId='Vui lòng chọn quyền';return e;},[newUser]);const isFormValid=useMemo(()=>Object.keys(computedErrors).length===0,[computedErrors]);const tooltipText=useMemo(()=>{if(isFormValid||creating)return'';const msgs=[];if(computedErrors.name)msgs.push(computedErrors.name);if(computedErrors.email)msgs.push(computedErrors.email);if(computedErrors.password)msgs.push(computedErrors.password);if(computedErrors.roleId)msgs.push(computedErrors.roleId);return msgs.join('; ');},[computedErrors,isFormValid,creating]);const fetchUsers=async function(){let queryVal=arguments.length>0&&arguments[0]!==undefined?arguments[0]:q;setLoading(true);setError('');try{const uRes=await fetch(\"/api/admin/users\".concat(queryVal?'?q='+encodeURIComponent(queryVal):''),{headers:_objectSpread({},authHeaders())});if(!uRes.ok)throw new Error('Không tải được người dùng');const uj=await uRes.json();setUsers(Array.isArray(uj.users)?uj.users:[]);}catch(e){setError(e.message||'Lỗi tải dữ liệu');setUsers([]);}finally{setLoading(false);}};// Fetch roles once\nuseEffect(()=>{(async()=>{try{const rRes=await fetch('/api/admin/roles',{headers:_objectSpread({},authHeaders())});if(rRes.ok){const rj=await rRes.json();setRoles(Array.isArray(rj.roles)?rj.roles:[]);}}catch(_unused){}})();},[]);useEffect(()=>{fetchUsers('');},[]);// Live filter as user types (debounced)\nconst debounceRef=useRef(null);useEffect(()=>{if(debounceRef.current)clearTimeout(debounceRef.current);debounceRef.current=setTimeout(()=>{fetchUsers(q);},250);return()=>{if(debounceRef.current)clearTimeout(debounceRef.current);};},[q]);const roleOptions=useMemo(()=>roles.map(r=>({value:r.id,label:r.name})),[roles]);const updateUserField=(id,field,value)=>{setUsers(prev=>prev.map(u=>u.id===id?_objectSpread(_objectSpread({},u),{},{[field]:value}):u));};const handleSave=async u=>{try{const res=await fetch(\"/api/admin/users/\".concat(u.id),{method:'PUT',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({name:u.name,email:u.email,phone:u.phone,address:u.address,roleId:u.roleId,status:u.status&&u.status.toLowerCase().includes('khóa')?'Block':'Active'})});if(!res.ok)throw new Error('Lưu thất bại');await fetchUsers(q);alert('Đã lưu');}catch(e){alert(e.message||'Lỗi lưu');}};const handleDelete=async u=>{if(!window.confirm('Xóa người dùng này?'))return;try{const res=await fetch(\"/api/admin/users/\".concat(u.id),{method:'DELETE',headers:_objectSpread({},authHeaders())});if(!res.ok)throw new Error('Xóa thất bại');await fetchUsers(q);}catch(e){alert(e.message||'Lỗi xóa');}};const handleLockToggle=async(u,lock)=>{// Optimistic UI update\nconst prevStatus=u.status;setUsers(prev=>prev.map(x=>x.id===u.id?_objectSpread(_objectSpread({},x),{},{status:lock?'Khóa':'Hoạt động'}):x));try{const res=await fetch(\"/api/admin/users/\".concat(u.id,\"/lock\"),{method:'PUT',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({lock})});if(!res.ok)throw new Error('Cập nhật trạng thái thất bại');// Refresh background (silent)\nfetchUsers(q);}catch(e){// Revert\nsetUsers(prev=>prev.map(x=>x.id===u.id?_objectSpread(_objectSpread({},x),{},{status:prevStatus}):x));alert(e.message||'Lỗi');}};const validateNew=u=>{const errs={};const emailRe=/^\\S+@\\S+\\.\\S+$/;if(!u.name||!u.name.trim())errs.name='Vui lòng nhập tên';if(!u.email||!emailRe.test(u.email))errs.email='Email không hợp lệ';if(!u.password||String(u.password).length<6)errs.password='Mật khẩu tối thiểu 6 ký tự';if(!u.roleId||Number.isNaN(Number(u.roleId)))errs.roleId='Vui lòng chọn quyền';return errs;};const handleNewUser=async()=>{const errs=validateNew(newUser);setNewErrors(errs);if(Object.keys(errs).length)return;setCreating(true);try{const payload={name:newUser.name.trim(),email:newUser.email.trim(),password:newUser.password,roleId:Number(newUser.roleId)};const res=await fetch('/api/admin/users',{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify(payload)});if(!res.ok){let msg='Tạo thất bại';try{const data=await res.json();if(data&&data.message)msg=data.message;}catch(_unused2){const txt=await res.text();if(txt)msg=txt;}throw new Error(msg);}setNewUser({name:'',email:'',password:'',roleId:''});setNewErrors({});await fetchUsers(q);setCreating(false);alert('Tạo người dùng thành công');setIsCreateOpen(false);}catch(e){alert(e.message||'Lỗi tạo');setCreating(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-users\",style:{padding:isModal?0:'80px 12px 20px'},children:[!isModal&&/*#__PURE__*/_jsx(\"header\",{className:\"home-header\",style:{position:'sticky',top:0},children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-header-left\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"logo\",className:\"home-header-logo\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"home-header-title home-header-home-btn\",children:\"TRANG CH\\u1EE6\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-table\",style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"home-rooms-title\",style:{textAlign:'left',marginTop:0},children:\"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>e.preventDefault(),className:\"au-toolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"au-group\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"au-input\",placeholder:\"T\\xECm ki\\u1EBFm ng\\u01B0\\u1EDDi d\\xF9ng...\",value:q,onChange:e=>setQ(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",type:\"button\",onClick:()=>{setQ('');fetchUsers('');},children:\"L\\xE0m m\\u1EDBi\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn au-add-btn\",type:\"button\",onClick:()=>{setIsCreateOpen(true);setNewErrors({});},children:\"+ Th\\xEAm ng\\u01B0\\u1EDDi d\\xF9ng\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{style:{color:'#666'},children:\"\\u0110ang t\\u1EA3i...\"}):error?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318'},children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ph-tr ph-head\",style:{gridTemplateColumns:'70px 1.2fr 1.6fr 1.1fr 0.9fr 1.1fr 1.2fr'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"ID\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"Ph\\xE2n quy\\u1EC1n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"})]}),users.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",style:{padding:12,color:'#666'},children:\"Kh\\xF4ng c\\xF3 ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0o.\"}):users.map((u,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"ph-tr au-row\"+(selectedUserId===u.id?' au-row--selected':''),style:{gridTemplateColumns:'70px 1.2fr 1.6fr 1.1fr 0.9fr 1.1fr 1.2fr','--row-index':idx},onClick:()=>setSelectedUserId(u.id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:u.id}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:/*#__PURE__*/_jsx(\"input\",{value:u.name||'',onFocus:()=>setSelectedUserId(u.id),onChange:e=>updateUserField(u.id,'name',e.target.value),style:{width:'100%',border:'1px solid #eee',borderRadius:6,padding:'6px 8px'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:/*#__PURE__*/_jsx(\"input\",{value:u.email||'',onFocus:()=>setSelectedUserId(u.id),onChange:e=>updateUserField(u.id,'email',e.target.value),style:{width:'100%',border:'1px solid #eee',borderRadius:6,padding:'6px 8px'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:/*#__PURE__*/_jsx(\"input\",{value:u.phone||'',onFocus:()=>setSelectedUserId(u.id),onChange:e=>updateUserField(u.id,'phone',e.target.value),style:{width:'100%',border:'1px solid #eee',borderRadius:6,padding:'6px 8px'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:/*#__PURE__*/_jsx(\"div\",{className:\"au-status-badge \"+((u.status||'').toLowerCase().includes('khóa')?'blocked':'active'),children:(u.status||'').toLowerCase().includes('khóa')?'Khóa':'Hoạt động'})}),/*#__PURE__*/_jsx(\"div\",{className:\"ph-td\",children:/*#__PURE__*/_jsxs(\"select\",{value:u.roleId||'',onFocus:()=>setSelectedUserId(u.id),onChange:e=>updateUserField(u.id,'roleId',Number(e.target.value)),style:{width:'100%',border:'1px solid #ddd',borderRadius:6,padding:'6px 8px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u2014\"}),roleOptions.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.value,children:r.label},r.value))]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ph-td\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn\",onClick:()=>handleSave(u),type:\"button\",children:\"L\\u01B0u\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",onClick:()=>handleDelete(u),type:\"button\",children:\"X\\xF3a\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn \".concat(u.status==='Khóa'?'unlock':'lock'),onClick:()=>handleLockToggle(u,!(u.status==='Khóa')),type:\"button\",children:u.status==='Khóa'?'Mở khóa':'Khóa'})]})]},u.id))]})]}),isCreateOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-overlay\",onMouseDown:e=>{if(e.target===e.currentTarget)setIsCreateOpen(false);},children:/*#__PURE__*/_jsx(\"div\",{className:\"profile-modal\",onMouseDown:e=>e.stopPropagation(),style:{width:640,maxWidth:'98%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"ph-table\",style:{padding:16},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"Th\\xEAm ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"au-create\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"T\\xEAn\",/*#__PURE__*/_jsx(\"input\",{placeholder:\"Nh\\u1EADp t\\xEAn\",className:!computedErrors.name?'':'au-error',value:newUser.name,onChange:e=>{setNewUser(_objectSpread(_objectSpread({},newUser),{},{name:e.target.value}));if(newErrors.name)setNewErrors(_objectSpread(_objectSpread({},newErrors),{},{name:undefined}));}}),newErrors.name?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318',fontSize:12,marginTop:4},children:newErrors.name}):null]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email\",/*#__PURE__*/_jsx(\"input\",{placeholder:\"v\\xED d\\u1EE5: user@example.com\",className:!computedErrors.email?'':'au-error',value:newUser.email,onChange:e=>{setNewUser(_objectSpread(_objectSpread({},newUser),{},{email:e.target.value}));if(newErrors.email)setNewErrors(_objectSpread(_objectSpread({},newErrors),{},{email:undefined}));}}),newErrors.email?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318',fontSize:12,marginTop:4},children:newErrors.email}):null]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"M\\u1EADt kh\\u1EA9u\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"T\\u1ED1i thi\\u1EC3u 6 k\\xFD t\\u1EF1\",className:!computedErrors.password?'':'au-error',value:newUser.password,onChange:e=>{setNewUser(_objectSpread(_objectSpread({},newUser),{},{password:e.target.value}));if(newErrors.password)setNewErrors(_objectSpread(_objectSpread({},newErrors),{},{password:undefined}));}}),newErrors.password?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318',fontSize:12,marginTop:4},children:newErrors.password}):null]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Quy\\u1EC1n\",/*#__PURE__*/_jsxs(\"select\",{className:!computedErrors.roleId?'':'au-error',value:newUser.roleId,onChange:e=>{const val=e.target.value;setNewUser(_objectSpread(_objectSpread({},newUser),{},{roleId:val?Number(val):''}));if(newErrors.roleId)setNewErrors(_objectSpread(_objectSpread({},newErrors),{},{roleId:undefined}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u2014\"}),roles.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.id,children:r.name},r.id))]}),newErrors.roleId?/*#__PURE__*/_jsx(\"div\",{style:{color:'#b42318',fontSize:12,marginTop:4},children:newErrors.roleId}):null]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12,display:'flex',gap:8,justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"span\",{title:!isFormValid&&!creating?tooltipText:'',style:{display:'inline-block'},children:/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn\",onClick:handleNewUser,disabled:creating||!isFormValid,type:\"button\",children:creating?'Đang tạo...':'Tạo'})}),/*#__PURE__*/_jsx(\"button\",{className:\"ph-btn ph-btn--secondary\",onClick:()=>setIsCreateOpen(false),type:\"button\",children:\"H\\u1EE7y\"})]})]})})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .au-toolbar { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:10px; }\\n        .au-row { position:relative; animation:auRowIn .45s cubic-bezier(.4,.2,.2,1) both; }\\n        .au-row:nth-child(odd) { background:linear-gradient(90deg,#fafafa,transparent); }\\n        @keyframes auRowIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }\\n        .au-row--selected { box-shadow:0 0 0 2px #4e8df7 inset; background:#f0f6ff !important; }\\n        .au-row--selected input, .au-row--selected select { background:#fff; }\\n        .au-row input:focus, .au-row select:focus { outline:none; border-color:#4e8df7; box-shadow:0 0 0 2px rgba(78,141,247,.25); }\\n        .ph-btn.lock { background:#ffb347; border:none; }\\n        .ph-btn.unlock { background:#3fb97d; border:none; }\\n        .ph-btn.lock:hover { filter:brightness(.95); }\\n        .ph-btn.unlock:hover { filter:brightness(.95); }\\n        .ph-btn.lock:active, .ph-btn.unlock:active { transform:translateY(1px); }\\n        .au-create label { display:flex; flex-direction:column; gap:4px; }\\n        .au-create input, .au-create select { border:1px solid #d0d5dd; border-radius:6px; padding:8px 10px; font-size:14px; transition:border-color .2s, box-shadow .25s; }\\n        .au-create input:focus, .au-create select:focus { border-color:#4e8df7; box-shadow:0 0 0 3px rgba(78,141,247,.2); outline:none; }\\n        .au-create .au-error { border-color:#d92d20 !important; box-shadow:0 0 0 2px rgba(217,45,32,.15); }\\n        .au-add-btn { transition:transform .25s, box-shadow .25s; }\\n        .au-add-btn:hover { transform:translateY(-2px); box-shadow:0 4px 12px -2px rgba(0,0,0,.15); }\\n        .au-status-badge { padding:6px 10px; border-radius:20px; font-size:13px; font-weight:500; text-align:center; line-height:1; display:inline-block; min-width:88px; }\\n        .au-status-badge.active { color:#137333; background:#e6f4ea; border:1px solid #a8d5b8; }\\n        .au-status-badge.blocked { color:#b42318; background:#fbeaea; border:1px solid #f2b0aa; }\\n      \"})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","authHeaders","jsx","_jsx","jsxs","_jsxs","AdminUsers","_ref","isModal","onClose","q","setQ","users","setUsers","selectedUserId","setSelectedUserId","roles","setRoles","loading","setLoading","error","setError","isCreateOpen","setIsCreateOpen","creating","setCreating","newUser","setNewUser","name","email","password","roleId","newErrors","setNewErrors","computedErrors","e","emailRe","trim","test","String","length","Number","isNaN","isFormValid","Object","keys","tooltipText","msgs","push","join","fetchUsers","queryVal","arguments","undefined","uRes","fetch","concat","encodeURIComponent","headers","_objectSpread","ok","Error","uj","json","Array","isArray","message","rRes","rj","_unused","debounceRef","current","clearTimeout","setTimeout","roleOptions","map","r","value","id","label","updateUserField","field","prev","u","handleSave","res","method","body","JSON","stringify","phone","address","status","toLowerCase","includes","alert","handleDelete","window","confirm","handleLockToggle","lock","prevStatus","x","validateNew","errs","handleNewUser","payload","msg","data","_unused2","txt","text","className","style","padding","children","position","top","src","alt","href","textAlign","marginTop","onSubmit","preventDefault","placeholder","onChange","target","type","onClick","color","gridTemplateColumns","idx","onFocus","width","border","borderRadius","onMouseDown","currentTarget","stopPropagation","maxWidth","fontSize","val","display","gap","justifyContent","title","disabled"],"sources":["D:/DA_TichHop/HMS_AI Hotel/client/src/AdminUsers.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport './HomePage.css';\r\nimport { authHeaders } from './auth';\r\n\r\nexport default function AdminUsers({ isModal, onClose }) {\r\n  const [q, setQ] = useState('');\r\n  const [users, setUsers] = useState([]);\r\n  const [selectedUserId, setSelectedUserId] = useState(null);\r\n  const [roles, setRoles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n  const [creating, setCreating] = useState(false); // submitting state\r\n  const [newUser, setNewUser] = useState({ name: '', email: '', password: '', roleId: '' });\r\n  const [newErrors, setNewErrors] = useState({});\r\n  const computedErrors = useMemo(() => {\r\n    const e = {};\r\n    const emailRe = /^\\S+@\\S+\\.\\S+$/;\r\n    if (!newUser.name || !newUser.name.trim()) e.name = 'Vui lòng nhập tên';\r\n    if (!newUser.email || !emailRe.test(newUser.email)) e.email = 'Email không hợp lệ';\r\n    if (!newUser.password || String(newUser.password).length < 6) e.password = 'Mật khẩu tối thiểu 6 ký tự';\r\n    if (!newUser.roleId || Number.isNaN(Number(newUser.roleId))) e.roleId = 'Vui lòng chọn quyền';\r\n    return e;\r\n  }, [newUser]);\r\n  const isFormValid = useMemo(() => Object.keys(computedErrors).length === 0, [computedErrors]);\r\n  const tooltipText = useMemo(() => {\r\n    if (isFormValid || creating) return '';\r\n    const msgs = [];\r\n    if (computedErrors.name) msgs.push(computedErrors.name);\r\n    if (computedErrors.email) msgs.push(computedErrors.email);\r\n    if (computedErrors.password) msgs.push(computedErrors.password);\r\n    if (computedErrors.roleId) msgs.push(computedErrors.roleId);\r\n    return msgs.join('; ');\r\n  }, [computedErrors, isFormValid, creating]);\r\n\r\n  const fetchUsers = async (queryVal = q) => {\r\n    setLoading(true); setError('');\r\n    try {\r\n  const uRes = await fetch(`/api/admin/users${queryVal ? ('?q=' + encodeURIComponent(queryVal)) : ''}`, { headers: { ...authHeaders() } });\r\n      if (!uRes.ok) throw new Error('Không tải được người dùng');\r\n      const uj = await uRes.json();\r\n      setUsers(Array.isArray(uj.users) ? uj.users : []);\r\n    } catch (e) {\r\n      setError(e.message || 'Lỗi tải dữ liệu');\r\n      setUsers([]);\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  // Fetch roles once\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n  const rRes = await fetch('/api/admin/roles', { headers: { ...authHeaders() } });\r\n        if (rRes.ok) {\r\n          const rj = await rRes.json();\r\n          setRoles(Array.isArray(rj.roles) ? rj.roles : []);\r\n        }\r\n      } catch {}\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => { fetchUsers(''); }, []);\r\n\r\n  // Live filter as user types (debounced)\r\n  const debounceRef = useRef(null);\r\n  useEffect(() => {\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(() => { fetchUsers(q); }, 250);\r\n    return () => { if (debounceRef.current) clearTimeout(debounceRef.current); };\r\n  }, [q]);\r\n\r\n  const roleOptions = useMemo(() => roles.map(r => ({ value: r.id, label: r.name })), [roles]);\r\n\r\n  const updateUserField = (id, field, value) => {\r\n    setUsers(prev => prev.map(u => u.id === id ? { ...u, [field]: value } : u));\r\n  };\r\n\r\n  const handleSave = async (u) => {\r\n    try {\r\n      const res = await fetch(`/api/admin/users/${u.id}`, {\r\n        method: 'PUT', headers: { 'Content-Type': 'application/json', ...authHeaders() },\r\n        body: JSON.stringify({ name: u.name, email: u.email, phone: u.phone, address: u.address, roleId: u.roleId, status: (u.status && u.status.toLowerCase().includes('khóa')) ? 'Block' : 'Active' })\r\n      });\r\n      if (!res.ok) throw new Error('Lưu thất bại');\r\n      await fetchUsers(q);\r\n      alert('Đã lưu');\r\n    } catch (e) { alert(e.message || 'Lỗi lưu'); }\r\n  };\r\n\r\n  const handleDelete = async (u) => {\r\n    if (!window.confirm('Xóa người dùng này?')) return;\r\n    try {\r\n  const res = await fetch(`/api/admin/users/${u.id}`, { method: 'DELETE', headers: { ...authHeaders() } });\r\n      if (!res.ok) throw new Error('Xóa thất bại');\r\n      await fetchUsers(q);\r\n    } catch (e) { alert(e.message || 'Lỗi xóa'); }\r\n  };\r\n\r\n  const handleLockToggle = async (u, lock) => {\r\n    // Optimistic UI update\r\n    const prevStatus = u.status;\r\n    setUsers(prev => prev.map(x => x.id===u.id ? { ...x, status: lock ? 'Khóa' : 'Hoạt động' } : x));\r\n    try {\r\n      const res = await fetch(`/api/admin/users/${u.id}/lock`, { method: 'PUT', headers: { 'Content-Type': 'application/json', ...authHeaders() }, body: JSON.stringify({ lock }) });\r\n      if (!res.ok) throw new Error('Cập nhật trạng thái thất bại');\r\n      // Refresh background (silent)\r\n      fetchUsers(q);\r\n    } catch (e) {\r\n      // Revert\r\n      setUsers(prev => prev.map(x => x.id===u.id ? { ...x, status: prevStatus } : x));\r\n      alert(e.message || 'Lỗi');\r\n    }\r\n  };\r\n\r\n  const validateNew = (u) => {\r\n    const errs = {};\r\n    const emailRe = /^\\S+@\\S+\\.\\S+$/;\r\n    if (!u.name || !u.name.trim()) errs.name = 'Vui lòng nhập tên';\r\n    if (!u.email || !emailRe.test(u.email)) errs.email = 'Email không hợp lệ';\r\n    if (!u.password || String(u.password).length < 6) errs.password = 'Mật khẩu tối thiểu 6 ký tự';\r\n    if (!u.roleId || Number.isNaN(Number(u.roleId))) errs.roleId = 'Vui lòng chọn quyền';\r\n    return errs;\r\n  };\r\n\r\n  const handleNewUser = async () => {\r\n    const errs = validateNew(newUser);\r\n    setNewErrors(errs);\r\n    if (Object.keys(errs).length) return;\r\n    setCreating(true);\r\n    try {\r\n      const payload = {\r\n        name: newUser.name.trim(),\r\n        email: newUser.email.trim(),\r\n        password: newUser.password,\r\n        roleId: Number(newUser.roleId)\r\n      };\r\n  const res = await fetch('/api/admin/users', { method: 'POST', headers: { 'Content-Type': 'application/json', ...authHeaders() }, body: JSON.stringify(payload) });\r\n      if (!res.ok) {\r\n        let msg = 'Tạo thất bại';\r\n        try {\r\n          const data = await res.json();\r\n          if (data && data.message) msg = data.message;\r\n        } catch {\r\n          const txt = await res.text();\r\n          if (txt) msg = txt;\r\n        }\r\n        throw new Error(msg);\r\n      }\r\n      setNewUser({ name: '', email: '', password: '', roleId: '' });\r\n      setNewErrors({});\r\n      await fetchUsers(q);\r\n      setCreating(false);\r\n      alert('Tạo người dùng thành công');\r\n      setIsCreateOpen(false);\r\n    } catch (e) { alert(e.message || 'Lỗi tạo'); setCreating(false); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-users\" style={{ padding: isModal ? 0 : '80px 12px 20px' }}>\r\n      {!isModal && (\r\n        <header className=\"home-header\" style={{ position: 'sticky', top: 0 }}>\r\n          <div className=\"home-header-left\">\r\n            <img src=\"/logo.png\" alt=\"logo\" className=\"home-header-logo\" />\r\n            <a href=\"/\" className=\"home-header-title home-header-home-btn\">TRANG CHỦ</a>\r\n          </div>\r\n        </header>\r\n      )}\r\n      <div className=\"ph-table\" style={{ padding: 16 }}>\r\n        <h2 className=\"home-rooms-title\" style={{ textAlign: 'left', marginTop: 0 }}>Quản lý người dùng</h2>\r\n        <form onSubmit={(e)=>e.preventDefault()} className=\"au-toolbar\">\r\n          <div className=\"au-group\">\r\n            <input className=\"au-input\" placeholder=\"Tìm kiếm người dùng...\" value={q} onChange={e=>setQ(e.target.value)} />\r\n            <button className=\"ph-btn ph-btn--secondary\" type=\"button\" onClick={()=>{ setQ(''); fetchUsers(''); }}>Làm mới</button>\r\n          </div>\r\n          <button className=\"ph-btn au-add-btn\" type=\"button\" onClick={()=>{ setIsCreateOpen(true); setNewErrors({}); }}>+ Thêm người dùng</button>\r\n        </form>\r\n        {loading ? <div style={{ color:'#666' }}>Đang tải...</div> : error ? <div style={{ color:'#b42318' }}>{error}</div> : (\r\n          <div>\r\n            <div className=\"ph-tr ph-head\" style={{ gridTemplateColumns: '70px 1.2fr 1.6fr 1.1fr 0.9fr 1.1fr 1.2fr' }}>\r\n              <div className=\"ph-td\">ID</div>\r\n              <div className=\"ph-td\">Tên</div>\r\n              <div className=\"ph-td\">Email</div>\r\n              <div className=\"ph-td\">Số điện thoại</div>\r\n              <div className=\"ph-td\">Trạng thái</div>\r\n              <div className=\"ph-td\">Phân quyền</div>\r\n              <div className=\"ph-td\">Hành động</div>\r\n            </div>\r\n            {users.length === 0 ? (\r\n              <div className=\"ph-td\" style={{ padding: 12, color: '#666' }}>Không có người dùng nào.</div>\r\n            ) : users.map((u,idx) => (\r\n              <div\r\n                key={u.id}\r\n                className={\"ph-tr au-row\" + (selectedUserId===u.id? ' au-row--selected':'')}\r\n                style={{ gridTemplateColumns: '70px 1.2fr 1.6fr 1.1fr 0.9fr 1.1fr 1.2fr', '--row-index': idx }}\r\n                onClick={()=> setSelectedUserId(u.id)}\r\n              >\r\n                <div className=\"ph-td\">{u.id}</div>\r\n                <div className=\"ph-td\"><input value={u.name || ''} onFocus={()=> setSelectedUserId(u.id)} onChange={e=>updateUserField(u.id, 'name', e.target.value)} style={{ width:'100%', border:'1px solid #eee', borderRadius:6, padding:'6px 8px' }} /></div>\r\n                <div className=\"ph-td\"><input value={u.email || ''} onFocus={()=> setSelectedUserId(u.id)} onChange={e=>updateUserField(u.id, 'email', e.target.value)} style={{ width:'100%', border:'1px solid #eee', borderRadius:6, padding:'6px 8px' }} /></div>\r\n                <div className=\"ph-td\"><input value={u.phone || ''} onFocus={()=> setSelectedUserId(u.id)} onChange={e=>updateUserField(u.id, 'phone', e.target.value)} style={{ width:'100%', border:'1px solid #eee', borderRadius:6, padding:'6px 8px' }} /></div>\r\n                <div className=\"ph-td\">\r\n                  <div className={\"au-status-badge \" + ((u.status||'').toLowerCase().includes('khóa') ? 'blocked':'active')}>\r\n                    {(u.status||'').toLowerCase().includes('khóa') ? 'Khóa' : 'Hoạt động'}\r\n                  </div>\r\n                </div>\r\n                <div className=\"ph-td\">\r\n                  <select value={u.roleId || ''} onFocus={()=> setSelectedUserId(u.id)} onChange={e=>updateUserField(u.id, 'roleId', Number(e.target.value))} style={{ width:'100%', border:'1px solid #ddd', borderRadius:6, padding:'6px 8px' }}>\r\n                    <option value=\"\">—</option>\r\n                    {roleOptions.map(r => <option key={r.value} value={r.value}>{r.label}</option>)}\r\n                  </select>\r\n                </div>\r\n                <div className=\"ph-td\">\r\n                  <button className=\"ph-btn\" onClick={()=>handleSave(u)} type=\"button\">Lưu</button>\r\n                  <button className=\"ph-btn ph-btn--secondary\" onClick={()=>handleDelete(u)} type=\"button\">Xóa</button>\r\n                  <button className={`ph-btn ${u.status==='Khóa'?'unlock':'lock'}`} onClick={()=>handleLockToggle(u, !(u.status==='Khóa'))} type=\"button\">{u.status==='Khóa'?'Mở khóa':'Khóa'}</button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {isCreateOpen && (\r\n        <div className=\"profile-overlay\" onMouseDown={(e)=>{ if (e.target===e.currentTarget) setIsCreateOpen(false); }}>\r\n          <div className=\"profile-modal\" onMouseDown={(e)=>e.stopPropagation()} style={{ width: 640, maxWidth:'98%' }}>\r\n            <div className=\"ph-table\" style={{ padding: 16 }}>\r\n              <h3 style={{ marginTop:0 }}>Thêm người dùng</h3>\r\n              <div className=\"au-create\">\r\n                <label>Tên\r\n                  <input placeholder=\"Nhập tên\" className={!computedErrors.name ? '' : 'au-error'} value={newUser.name} onChange={e=>{ setNewUser({...newUser, name:e.target.value}); if (newErrors.name) setNewErrors({...newErrors, name: undefined}); }} />\r\n                  {newErrors.name ? <div style={{ color:'#b42318', fontSize:12, marginTop:4 }}>{newErrors.name}</div> : null}\r\n                </label>\r\n                <label>Email\r\n                  <input placeholder=\"ví dụ: user@example.com\" className={!computedErrors.email ? '' : 'au-error'} value={newUser.email} onChange={e=>{ setNewUser({...newUser, email:e.target.value}); if (newErrors.email) setNewErrors({...newErrors, email: undefined}); }} />\r\n                  {newErrors.email ? <div style={{ color:'#b42318', fontSize:12, marginTop:4 }}>{newErrors.email}</div> : null}\r\n                </label>\r\n                <label>Mật khẩu\r\n                  <input type=\"password\" placeholder=\"Tối thiểu 6 ký tự\" className={!computedErrors.password ? '' : 'au-error'} value={newUser.password} onChange={e=>{ setNewUser({...newUser, password:e.target.value}); if (newErrors.password) setNewErrors({...newErrors, password: undefined}); }} />\r\n                  {newErrors.password ? <div style={{ color:'#b42318', fontSize:12, marginTop:4 }}>{newErrors.password}</div> : null}\r\n                </label>\r\n                <label>Quyền\r\n                  <select className={!computedErrors.roleId ? '' : 'au-error'} value={newUser.roleId} onChange={e=>{ const val = e.target.value; setNewUser({...newUser, roleId: val ? Number(val) : ''}); if (newErrors.roleId) setNewErrors({...newErrors, roleId: undefined}); }}>\r\n                    <option value=\"\">—</option>\r\n                    {roles.map(r=> <option key={r.id} value={r.id}>{r.name}</option>)}\r\n                  </select>\r\n                  {newErrors.roleId ? <div style={{ color:'#b42318', fontSize:12, marginTop:4 }}>{newErrors.roleId}</div> : null}\r\n                </label>\r\n              </div>\r\n              <div style={{ marginTop:12, display:'flex', gap:8, justifyContent:'center' }}>\r\n                <span title={(!isFormValid && !creating) ? tooltipText : ''} style={{ display:'inline-block' }}>\r\n                  <button className=\"ph-btn\" onClick={handleNewUser} disabled={creating || !isFormValid} type=\"button\">{creating ? 'Đang tạo...' : 'Tạo'}</button>\r\n                </span>\r\n                <button className=\"ph-btn ph-btn--secondary\" onClick={()=>setIsCreateOpen(false)} type=\"button\">Hủy</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <style>{`\r\n        .au-toolbar { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:10px; }\r\n        .au-row { position:relative; animation:auRowIn .45s cubic-bezier(.4,.2,.2,1) both; }\r\n        .au-row:nth-child(odd) { background:linear-gradient(90deg,#fafafa,transparent); }\r\n        @keyframes auRowIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }\r\n        .au-row--selected { box-shadow:0 0 0 2px #4e8df7 inset; background:#f0f6ff !important; }\r\n        .au-row--selected input, .au-row--selected select { background:#fff; }\r\n        .au-row input:focus, .au-row select:focus { outline:none; border-color:#4e8df7; box-shadow:0 0 0 2px rgba(78,141,247,.25); }\r\n        .ph-btn.lock { background:#ffb347; border:none; }\r\n        .ph-btn.unlock { background:#3fb97d; border:none; }\r\n        .ph-btn.lock:hover { filter:brightness(.95); }\r\n        .ph-btn.unlock:hover { filter:brightness(.95); }\r\n        .ph-btn.lock:active, .ph-btn.unlock:active { transform:translateY(1px); }\r\n        .au-create label { display:flex; flex-direction:column; gap:4px; }\r\n        .au-create input, .au-create select { border:1px solid #d0d5dd; border-radius:6px; padding:8px 10px; font-size:14px; transition:border-color .2s, box-shadow .25s; }\r\n        .au-create input:focus, .au-create select:focus { border-color:#4e8df7; box-shadow:0 0 0 3px rgba(78,141,247,.2); outline:none; }\r\n        .au-create .au-error { border-color:#d92d20 !important; box-shadow:0 0 0 2px rgba(217,45,32,.15); }\r\n        .au-add-btn { transition:transform .25s, box-shadow .25s; }\r\n        .au-add-btn:hover { transform:translateY(-2px); box-shadow:0 4px 12px -2px rgba(0,0,0,.15); }\r\n        .au-status-badge { padding:6px 10px; border-radius:20px; font-size:13px; font-weight:500; text-align:center; line-height:1; display:inline-block; min-width:88px; }\r\n        .au-status-badge.active { color:#137333; background:#e6f4ea; border:1px solid #a8d5b8; }\r\n        .au-status-badge.blocked { color:#b42318; background:#fbeaea; border:1px solid #f2b0aa; }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}